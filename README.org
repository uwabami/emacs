#+title: Emacs ã®è¨­å®š
# -*- mode: org; coding: utf-8-unix; indent-tabs-mode: nil -*-
#+startup: content
#+options: auto-id:t H:6
#+date: 2020-11-04 03:08:45
* ã¯ã˜ã‚ã«
  :PROPERTIES:
  :CUSTOM_ID: org66fa74cd
  :END:
  ã“ã“ã§ã¯ç§ã® Emacs ã®è¨­å®šã«ã¤ã„ã¦ã¾ã¨ã‚ã¦ã„ã¾ã™ï¼

  #+html: <amp-img src="https://travis-ci.org/uwabami/emacs.svg?branch=master" width="72px" height="20px" layout=fixed class="travis_badge"></amp-img>
  #+html: <amp-img src="https://img.shields.io/badge/License-GPLv3-blue.svg" width="92px" height="20px" layout="fixed"></amp-img>
  #+html: <a href="https://github.com/uwabami/emacs"><span class="icon-github"><svg id="SVGRoot" width="20px" height="20px" version="1.1" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="m5.4144 12.761c0 0.0645-0.0742 0.11613-0.16774 0.11613-0.10645 0.01-0.18064-0.0419-0.18064-0.11613 0-0.0645 0.0742-0.11613 0.16774-0.11613 0.0968-0.01 0.18064 0.0419 0.18064 0.11613zm-1.0032-0.14516c-0.0226 0.0645 0.0419 0.13871 0.13871 0.15806 0.0839 0.0323 0.18064 0 0.2-0.0645 0.0194-0.0645-0.0419-0.13871-0.13871-0.16775-0.0839-0.0226-0.17742 0.01-0.2 0.0742zm1.4258-0.0548c-0.0935 0.0226-0.15806 0.0839-0.14838 0.15806 0.01 0.0645 0.0935 0.10645 0.19032 0.0839 0.0936-0.0226 0.15806-0.0839 0.14839-0.14838-0.01-0.0613-0.0968-0.10323-0.19033-0.0935zm2.1226-12.361c-4.4742 0-7.8968 3.3968-7.8968 7.871 0 3.5774 2.2516 6.6387 5.4677 7.7161 0.41291 0.0742 0.55807-0.18064 0.55807-0.39032 0-0.2-0.01-1.3032-0.01-1.9806 0 0-2.2581 0.48387-2.7323-0.96129 0 0-0.36774-0.93871-0.89677-1.1806 0 0-0.73871-0.50645 0.0516-0.49677 0 0 0.80323 0.0645 1.2452 0.83226 0.70645 1.2452 1.8903 0.88709 2.3516 0.67419 0.0742-0.51613 0.28387-0.87419 0.51613-1.0871-1.8032-0.2-3.6226-0.46129-3.6226-3.5645 0-0.8871 0.24516-1.3323 0.76129-1.9-0.0839-0.20968-0.35806-1.0742 0.0839-2.1903 0.6742-0.20967 2.2258 0.87097 2.2258 0.87097 0.64516-0.18064 1.3387-0.27419 2.0258-0.27419 0.68709 0 1.3806 0.0936 2.0258 0.27419 0 0 1.5516-1.0839 2.2258-0.87097 0.44193 1.1194 0.16774 1.9806 0.0839 2.1903 0.51613 0.57096 0.83226 1.0161 0.83226 1.9 0 3.1129-1.9 3.3613-3.7032 3.5645 0.29678 0.25484 0.54839 0.73871 0.54839 1.4968 0 1.0871-0.01 2.4322-0.01 2.6968 0 0.20968 0.14839 0.46452 0.55807 0.39032 3.2258-1.071 5.4129-4.1322 5.4129-7.7097 0-4.4742-3.629-7.871-8.1032-7.871zm-4.7613 11.126c-0.0419 0.0323-0.0323 0.10646 0.0226 0.16775 0.0516 0.0516 0.12581 0.0742 0.16775 0.0323 0.0419-0.0323 0.0323-0.10645-0.0226-0.16774-0.0516-0.0516-0.12581-0.0742-0.16775-0.0323zm-0.34838-0.26129c-0.0226 0.0419 0.01 0.0935 0.0742 0.12581 0.0516 0.0323 0.11613 0.0226 0.13871-0.0226 0.0226-0.0419-0.01-0.0935-0.0742-0.12581-0.0645-0.0194-0.11613-0.01-0.13871 0.0226zm1.0452 1.1484c-0.0516 0.0419-0.0323 0.13871 0.0419 0.2 0.0742 0.0742 0.16775 0.0839 0.20968 0.0323 0.0419-0.0419 0.0226-0.13871-0.0419-0.2-0.071-0.0742-0.16775-0.0839-0.20968-0.0323zm-0.36774-0.47419c-0.0516 0.0323-0.0516 0.11613 0 0.19032 0.0516 0.0742 0.13871 0.10645 0.18064 0.0742 0.0516-0.0419 0.0516-0.1258 0-0.2-0.0452-0.0742-0.12903-0.10645-0.18064-0.0645z" fill="currentColor" stroke-width=".032258"/></svg></span></a>

  åŸºæœ¬æ–¹é‡ã¯ä»¥ä¸‹ã®é€šã‚Š:
** Debian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãªã‚‰ã°ãã‚Œã‚’å„ªå…ˆã™ã‚‹
   :PROPERTIES:
   :CUSTOM_ID: org5eaa4818
   :END:
   :[[https://en.wikipedia.org/wiki/Eating_your_own_dog_food][Eating your own dog food - Wikipedia]]

   Emacsã«é–¢é€£ã™ã‚‹Debianãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å¹¾ã¤ã‹ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã—ã¦ã„ã‚‹ã®ã§,
   å¯èƒ½ãªé™ã‚ŠDebianãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã“ã¨ã«ã—ã¦ã„ã¾ã™ï¼
** [[https://github.com/conao3/leaf.el][leaf.el]]ã§Emacs ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å°å…¥ã¨è¨­å®šã‚’è¡Œãªã†
   :PROPERTIES:
   :CUSTOM_ID: orgd2ba4ef2
   :END:
   è¨­å®šã«ã¯[[https://github.com/conao3/leaf.el][leaf.el]]ã‚’åˆ©ç”¨ã—ã¾ã™ï¼
   VCS ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå¹¾ã¤ã‹ã‚ã‚‹ã®ã§,
   ãã‚Œã‚‰ã«ã¤ã„ã¦ã¯[[https://github.com/dimitri/el-get][el-get]]ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ï¼
   ä»Šå¾Œã¯[[https://github.com/conao3/feather.el][feather.el]]ã‚‚è©¦ã—ã¦ã¿ãŸã„ã§ã™ã­ï¼
** è¨­å®šã¯ [[http://orgmode.org/][Org mode]] ã§æ›¸ããŸã„
   :PROPERTIES:
   :CUSTOM_ID: org458d9cf4
   :END:
   ä»¥å‰ã“ã‚“ãªãƒ–ãƒ­ã‚°è¨˜äº‹ã‚’æ›¸ãã¾ã—ãŸâ†’ [[http://uwabami.junkhub.org/log/20111213.html#p01][Emacsã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’orgã§æ›¸ã]]

   ã¨ã„ã†ã‚ã‘ã§, è¨­å®šã¯ [[http://orgmode.org/worg/org-contrib/babel/intro.html][Org Babel]] ã§æ›¸ã„ã¦ã„ã¾ã™.
   æœ¬ãƒ•ã‚¡ã‚¤ãƒ«(=README.org=) ã‹ã‚‰,
   Makefile å†…ã®ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ =~/init.el= ã‚’ç”Ÿæˆã—, byte-compile ã—ã¾ã™.
   #+begin_src makefile-gmake :tangle no
EMACS   ?= emacs
init.el: README.org
    $(EMACS) -Q -q --batch --eval \
       "(progn \
          (require 'ob-tangle) \
          (org-babel-tangle-file \"$<\" \"$@\" \"emacs-lisp\"))"
    $(EMACS) -q -l init.el --batch --eval '(kill-emacs)'
%.elc: %.el
    $(EMACS) -q -l init.el -batch -f batch-byte-compile $<
   #+end_src
   ã¤ã„ã§ã«, å‡ºåŠ›ã•ã‚Œã‚‹ =init.el= ç”¨ã®ãŠã¾ã˜ãªã„(?)ã¨ã—ã¦
   =lexsical-binding= ã‚’æœ‰åŠ¹ã«ã—ã¦ãŠãã¾ã™ï¼
   #+begin_src emacs-lisp :tangle init.el
;; -*- lexical-binding: nil -*-
   #+end_src
** èµ·å‹•ã®é«˜é€ŸåŒ–
   :PROPERTIES:
   :CUSTOM_ID: orgae182d4d
   :END:
   ã“ã®è¾ºã¯ [[https://emacs-jp.github.io/tips/startup-optimization][Emacs ã®èµ·å‹•æ™‚é–“ã‚’""è©°ã‚ã‚‹""]] ã‚’å‚è€ƒã«.
   è¨­å®šã¯ =early-init.el= ã«ç§»å‹•ã—ãŸæ–¹ãŒè‰¯ã„ã®ã‹ã‚‚ã—ã‚Œãªã„ã‹ãª.
*** profiler ã®èª­ã¿è¾¼ã¿
    :PROPERTIES:
    :CUSTOM_ID: org373f7f70
    :END:
    èµ·å‹•ã®é«˜é€ŸåŒ–ã®ãŸã‚ã«, å¿…è¦ã«å¿œã˜ã¦æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹.
    #+begin_src emacs-lisp :tangle init.el
;; (require 'profiler)
;; (profiler-start 'cpu)
    #+end_src
*** Magic File Name ã‚’ä¸€æ™‚çš„ã«ç„¡åŠ¹åŒ–
    :PROPERTIES:
    :CUSTOM_ID: orgb6dd6727
    :END:
    ã“ã‚Œã ã‘ã§ 0.2ç§’ç¸®ã¾ã£ãŸ. ã“ã‚Œã¯çŸ¥è¦‹ã§ã‚ã‚‹.
    #+begin_src emacs-lisp :tangle init.el
(defconst my:saved-file-name-handler-alist file-name-handler-alist)
(setq file-name-handler-alist nil)
(add-hook 'emacs-startup-hook
          (lambda ()
            (setq file-name-handler-alist my:saved-file-name-handler-alist)))
    #+end_src
*** GC ã®è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org77e2f299
    :END:
    èµ·å‹•æ™‚ã« garbage collection ã‚’ç™ºç”Ÿã•ã›ãªã„æ§˜ã«ã™ã‚‹.

    ãƒ¡ãƒ¢ãƒªå–°ã„ãªæ‹¡å¼µã‚’å…¥ã‚Œã¦ã„ã‚‹å ´åˆã«ã¯,
    å®‰æ˜“ã« =gc-cons-threshold= ã‚’ä¸Šã’ã‚‹ã®ã¯è€ƒãˆã‚‚ã®ã§ã‚ã‚‹.
    ã€Œgc ãŒèµ°ã‚‹â†’å¤§ããªé ˜åŸŸã‚’æƒé™¤ã™ã‚‹ã®ã§ãã®é–“ emacs ãŒæ­¢ã¾ã‚‹ã€
    ã¨ã„ã†äº‹ã‚’é »ç¹ã«çµŒé¨“ã™ã‚‹ã“ã¨ã«ãªã‚‹ã ã‚ã†.

    ã¨ã¯ã„ãˆ, ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã®ã¾ã¾ã ã¨
    èµ·å‹•æ™‚ã«çµæ§‹ garbage-collect ãŒèµ°ã£ã¦é…ããªã‚‹ã®ã§,
    èµ·å‹•æ™‚ã¯ =most-positive-fixnum= ã«ã—ã¦ãŠã„ã¦,
    èµ·å‹•å¾Œã« =emacs-startup-hook= ã§ default ã«æˆ»ã™ã‚ˆã†ã«ã—ã¦ã¿ãŸ.

    ã¤ã„ã§ã« =idle-timer= ã§å…¥åŠ›ãŒç„¡ã„æ™‚ã« GC ã‚’èµ°ã‚‰ã›ã‚‹ã“ã¨ã«.
    #+begin_src emacs-lisp :tangle init.el
(setq gc-cons-threshold most-positive-fixnum)
;; Run GC every 60 seconds if emacs is idle.
(run-with-idle-timer 60.0 t #'garbage-collect)
(add-hook 'emacs-startup-hook
          (lambda ()
            (setq gc-cons-threshold 800000)))
    #+end_src
*** =early-init.el=
    :PROPERTIES:
    :CUSTOM_ID: orgcb2bfa7b
    :END:
    Emacs >= 27 ã‹ã‚‰ã®æ©Ÿèƒ½.
    #+begin_src emacs-lisp :tangle early-init.el
(push '(menu-bar-lines   . 0) default-frame-alist)
(push '(tool-bar-lines   . 0) default-frame-alist)
(setq frame-inhibit-implied-resize t)
(setq site-run-file nil)
;; disable package
(setq package-enable-at-startup nil)
    #+end_src
** ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã®ä¿®æ­£
   :PROPERTIES:
   :CUSTOM_ID: org60bad8a3
   :END:
   åˆ†å‰²ã—ãŸè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ç¾¤ã‚„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§installã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
   ã®ç½®ãå ´æ‰€ã¯ =user-emacs-directory= ä»¥ä¸‹ã«ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

   ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã—ãŸ:
   #+begin_example
    ~/.emacs.d/
     |-- Makefile    â†  byte-compile ç”¨ã® rule
     |-- README.org  â†  æœ¬ãƒ•ã‚¡ã‚¤ãƒ«ï¼`org-babel-tangle' ã§ init.el ã‚’ç”Ÿæˆ
     |-- pkg
     |   |-- elpa/   â†  package.el ã§å°å…¥ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç½®ã‹ã‚Œã‚‹å ´æ‰€
     |   `-- el-get/ â†  el-get ã§å°å…¥ã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒç½®ã‹ã‚Œã‚‹å ´æ‰€
     |-- share/      â†  (åŸºæœ¬çš„ã«)å‚ç…§ã™ã‚‹ã ã‘ã®è³‡æºç½®ãå ´æ‰€
     `-- tmp/        â†  ä¸€æ¬¡ãƒ•ã‚¡ã‚¤ãƒ«ã®ç½®ãå ´æ‰€
   #+end_example
   ä¸Šè¨˜ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã§ä½¿ç”¨ã™ã‚‹ãŸã‚ã«
   ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ç½®ã‚’å®£è¨€ã—ã¦ãŠãã¾ã™ã€‚
   #+begin_src emacs-lisp :tangle init.el
(when load-file-name
  (setq user-emacs-directory
        (expand-file-name (file-name-directory load-file-name))))
(defconst my:d:share
  (expand-file-name "share/" user-emacs-directory))
(defconst my:d:tmp
  (expand-file-name "tmp/" user-emacs-directory))
(defconst my:d:pkg:elpa
  (expand-file-name "pkg/elpa" user-emacs-directory))
(defconst my:d:pkg:elget
  (expand-file-name "pkg/el-get" user-emacs-directory))
(dolist (my:d '(my:d:share
                my:d:tmp
                my:d:pkg:elpa
                my:d:pkg:elget))
  (lambda ()
    (unless (file-directory-p my:d)
      (make-directory my:d t))))
   #+end_src
   ãã®ä»–, è‰¯ãä½¿ã†ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚ã“ã“ã§è¨­å®šã—ã¦ãŠãã¾ã™ï¼
   #+begin_src emacs-lisp :tangle init.el
(defconst my:d:org (concat (getenv "HOME") "/Nextcloud/org/"))
   #+end_src
** Byte-Compile æ™‚ã® Common Lisp ã®èª­ã¿è¾¼ã¿
   :PROPERTIES:
   :CUSTOM_ID: org87c9febb
   :END:
   å¹¾ã¤ã‹ã®é–¢æ•°ã§ =Common-Lisp= çš„æŒ™å‹•ãŒæœŸå¾…ã•ã‚Œã¦ã„ã‚‹ã®ã§,
   =cl-lib= ã‚’èª­ã¿è¾¼ã‚“ã§ãŠãã¾ã™ï¼
   #+begin_src emacs-lisp :tangle init.el
(eval-when-compile (require 'cl-lib nil t))
;; el-get ãŒ cl ã«ä¾å­˜ã—ã¦ã„ã‚‹ã®ã§, ã“ã“ã§
;; `Package cl is deprecated' ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’æ­¢ã‚ã¦ãŠã.
(setq byte-compile-warnings '(not cl-functions obsolete))
   #+end_src
* Package é–¢é€£: [[https://emacs-jp.github.io/packages/package-management/package-el][package.el]], [[https://github.com/conao3/leaf.el][leaf.el]], [[https://github.com/dimitri/el-get][el-get]]
  :PROPERTIES:
  :CUSTOM_ID: orgcf4176e7
  :END:
  [[https://github.com/conao3/leaf.el][leaf.el]]ã®ãŠã‹ã’ã§,
  ç„¡ã„ã¨é€”æ–¹ã«æš®ã‚Œã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ä»¥å¤–ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ç„¡è¦–ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™.
** [[https://emacs-jp.github.io/packages/package-management/package-el][package.el]]
   :PROPERTIES:
   :CUSTOM_ID: orgc51eb87d
   :END:
   ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯åŸºæœ¬çš„ã« =package.el= ã§å°å…¥ã™ã‚‹ã®ã§, å…ˆãšã¯ãã®è¨­å®š. 
   #+begin_src emacs-lisp :tangle init.el
;; elpa/gnutls workaround
(when (or (version= "26.1" emacs-version)
          (version= "26.2" emacs-version))
  (setq gnutls-algorithm-priority "NORMAL:-VERS-TLS1.3"))
(eval-and-compile
  (custom-set-variables
   '(package-archives '(("gnu"   . "https://elpa.gnu.org/packages/")
                        ("melpa" . "https://melpa.org/packages/")
                        ))
   '(package-gnupghome-dir (expand-file-name ".gnupg" (getenv "HOME")))
   '(package-user-dir my:d:pkg:elpa)
   '(package-enable-at-startup t))
  (setq gnutls-algorithm-priority "NORMAL:-VERS-TLS1.3")
)
(eval-when-compile
  (unless (file-exists-p (locate-user-emacs-file "tmp/bootstrap-stamp"))
    (package-refresh-contents)
    (with-temp-buffer
      (write-file (locate-user-emacs-file "tmp/bootstrap-stamp")))
    ))
(package-initialize)
   #+end_src
** [[https://github.com/conao3/leaf.el][leaf.el]]
   :PROPERTIES:
   :CUSTOM_ID: orgc2ededbf
   :END:
   å€‹ã€…ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®è¨­å®šã«ã¯[[https://github.com/conao3/leaf.el][leaf.el]]ã‚’åˆ©ç”¨ã—ã¾ã™.
   è‡ªåˆ†ã§ä¿®æ­£ã—ãŸç‰ˆã‚„ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆã‚’åˆ¥ã®å ´æ‰€ã‹ã‚‰æŒã£ã¦ãã‚‹å ´åˆã¯
   [[https://github.com/conao3/leaf.el][leaf.el]]ã‹ã‚‰[[https://github.com/dimitri/el-get][el-get]]ã‚’å‘¼ã³å‡ºã—ã¾ã™.
   #+begin_src emacs-lisp :tangle init.el
(unless (package-installed-p 'leaf)
  (package-refresh-contents)
  (package-install 'leaf t))
(leaf leaf-keywords
  :ensure t
  :init
  (leaf blackout :ensure t)
  (leaf el-get
    :ensure t
    :preface
    (defconst el-get-dir my:d:pkg:elget) ;; override el-get default
    :custom ((el-get-notify-type       . 'message)
             (el-get-git-shallow-clone . t))
    )
  )
(leaf-keywords-init)
   #+end_src
* =exec-path-from-shell=: ç’°å¢ƒå¤‰æ•°ã®èª­ã¿è¾¼ã¿
  :PROPERTIES:
  :CUSTOM_ID: org9abae8f2
  :END:
  shell(zsh)ã§è¨­å®šã—ãŸ =PATH= ãªã©ã®ç’°å¢ƒå¤‰æ•°ã‚’Emacsã«å¼•ãç¶™ããŸã‚ã«
  [[https://github.com/purcell/exec-path-from-shell][purcell/exec-path-from-shell]] ã‚’ä½¿ã„ã¾ã™.
  ä»Šã®æ‰€
  - =SHELL=
  - =DEBFULLNAME=
  - =DEBEMAIL=
  - =TEXMFHOME=
  - =SKKSERVER=
  - =http_proxy=
  - =GPG_KEY_ID=
  - =GPG_AGENT_INFO=
  - =PASSWORD_STORE_DIR=
  - =PATH=
  ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™(å¤šã„ãª...).
  #+begin_src emacs-lisp :tangle init.el
(leaf exec-path-from-shell
  :ensure t
  :defun (exec-path-from-shell-initialize)
  :custom
  ((exec-path-from-shell-check-startup-files . nil)
   (exec-path-from-shell-variables
    . '("SHELL"
        "DEBFULLNAME"
        "DEBEMAIL"
        "SKKSERVER"
        "TEXMFHOME"
        "http_proxy"
        "GPG_KEY_ID"
        "GPG_AGENT_INFO"
        "PASSWORD_STORE_DIR"
        "PATH")))
  :config
  (exec-path-from-shell-initialize)
  (setq user-full-name    (concat (getenv "DEBFULLNAME"))
        user-mail-address (concat (getenv "DEBEMAIL")))
  (defconst my:d:password-store
    (if (getenv "PASSWORD_STORE_DIR")
        (expand-file-name (concat "Emacs/" (system-name))
                          (getenv "PASSWORD_STORE_DIR")) ""))
  )
  #+end_src
* èªè¨¼é–¢é€£: =plstore=, =password-store= ãªã©
  :PROPERTIES:
  :CUSTOM_ID: org1a8b35da
  :END:
  - =leaf-plstore= ã§ =plstore= ãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§,
    ãã®è¨­å®šã‚’ã—ã¦ãŠã.
  - =auth-password-store= ã§ auth-source ã¨ã—ã¦ =password-store= ã‚’ä½¿ã†.
  ã¨ã„ã£ãŸäº‹ã‚’ã—ã¦ã„ã‚‹.
  #+begin_src emacs-lisp :tangle init.el
(leaf *authentication
  :if (and (getenv "GPG_KEY_ID")
           (file-directory-p my:d:password-store))
  :init
  (setq leaf-default-plstore
        (plstore-open
         (expand-file-name "plstore.plist" my:d:password-store)))
  (add-to-list 'vc-directory-exclusion-list
               (expand-file-name my:d:password-store))
  (leaf auth-source
    :custom
    `((auth-source-gpg-encrypt-to . '(getenv "GPG_KEY_ID"))
      ;; (auth-sources
      ;; . ,(expand-file-name "authinfo.gpg" my:d:password-store))
      )
    )
  (leaf password-store :ensure t)
  (leaf auth-source-pass :ensure t)
  (leaf plstore
    :custom
    `((plstore-secret-keys . 'silent)
      (plstore-encrypt-to  . ,(getenv "GPG_KEY_ID")))
    )
  )
  #+end_src
* ç‹¬è‡ªé–¢æ•°
  :PROPERTIES:
  :CUSTOM_ID: org34ff2306
  :END:
  ç´°ã‹ã„ç‹¬è‡ªé–¢æ•°, ãªã©ï¼
** ãƒ•ã‚¡ã‚¤ãƒ«åã‚’ minibuffer ã«ãŠã•ã¾ã‚‹æ§˜ã«æ•´å½¢
   :PROPERTIES:
   :CUSTOM_ID: org452a76a8
   :END:
   zsh prompté¢¨å‘³ï¼
   #+begin_src emacs-lisp :tangle init.el
(defun my:shorten-file-path (fpath max-length)
  "Show up to `max-length' characters of a directory name `fpath' like zsh"
  (let* ((path (reverse (split-string (abbreviate-file-name fpath) "/")))
         (output "")
         (top (mapconcat 'identity (reverse (last path 3)) "/"))
         (vmax (- max-length 4 (length top)))
         (path (butlast path 3))
         )
    (while (and path
                (and (< (length output) vmax)
                     (< (length (concat "/" (car path) output)) vmax)))
      (setq output (concat "/" (car path) output))
      (setq path (cdr path)))
    ;; çœç•¥
    (when path
      (setq output (concat "/..." output)))
    (format "%s%s" top output)))
   #+end_src
** ç©ºã«ãªã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’å°‹ã­ãšã«è‡ªå‹•å‰Šé™¤
   :PROPERTIES:
   :CUSTOM_ID: org5b521483
   :END:
   ã‚´ãƒŸãŒæ®‹ã‚‰ãªã„ã—, åœ°å‘³ã«ä¾¿åˆ©ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf *delete-file-if-no-contents
  :preface (defun my:delete-file-if-no-contents ()
             (when (and (buffer-file-name (current-buffer))
                        (= (point-min) (point-max)))
               (delete-file
                (buffer-file-name (current-buffer)))))
  :config
  (if (not (memq 'my:delete-file-if-no-contents after-save-hook))
      (setq after-save-hook
            (cons 'my:delete-file-if-no-contents after-save-hook)))
  )
   #+end_src
** scratch ã‚’æ®ºã•ãªã„. æ¶ˆã—ãŸã‚‰å†ç”Ÿæˆ
   :PROPERTIES:
   :CUSTOM_ID: orge279b0e0
   :END:
   ...å…ƒãƒã‚¿ãŒã©ã“ã ã£ãŸã®ã‹å¿˜ã‚Œã¦ã—ã¾ã£ãŸ...
   #+begin_src emacs-lisp :tangle init.el
(leaf *keepscratchbuffer
  :preface
  (defun my:make-scratch (&optional arg)
    (interactive)
    (progn
      ;; "*scratch*" ã‚’ä½œæˆã—ã¦ buffer-list ã«æ”¾ã‚Šè¾¼ã‚€
      (set-buffer (get-buffer-create "*scratch*"))
      (funcall initial-major-mode)
      (erase-buffer)
      (when (and initial-scratch-message (not inhibit-startup-message))
        (insert initial-scratch-message))
      (or arg
          (progn
            (setq arg 0)
            (switch-to-buffer "*scratch*")))
      (cond ((= arg 0) (message "*scratch* is cleared up."))
            ((= arg 1) (message "another *scratch* is created")))))
  ;;
  (defun my:buffer-name-list ()
    (mapcar (function buffer-name) (buffer-list)))
  :hook  ((kill-buffer-query-functions
           . (lambda ()
               (if (string= "*scratch*" (buffer-name))
                   (progn (my:make-scratch 0) nil)
                 t)))
          (after-save-hook
           . (lambda ()
               (unless (member "*scratch*" (my:buffer-name-list))
                 (my:make-scratch 1)))))
  )
   #+end_src
** è¡Œæœ«ã®ç„¡é§„ãªç©ºç™½/æ”¹è¡Œã‚’å‰Šé™¤ã™ã‚‹
   :PROPERTIES:
   :CUSTOM_ID: org1effd724
   :END:
   @see [[http://d.hatena.ne.jp/tototoshi/20101202/1291289625][ç„¡é§„ãªè¡Œæœ«ã®ç©ºç™½ã‚’å‰Šé™¤ã™ã‚‹(Emacs Advent Calendar jp:2010)]]

   ãŸã ã—, RD ã‚„ Markdown ã ã¨ç©ºç™½è¡Œã«æ„å‘³ãŒã‚ã£ãŸã‚Šã™ã‚‹ã®ã§,
   å¿…è¦ã«å¿œã˜ã¦æ‹¡å¼µå­ã§åˆ¤æ–­ã—ã¦å¤–ã—ã¦ã„ã‚‹ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf *trailing-white-space
  :preface
  (defvar my:delete-trailing-whitespace-exclude-suffix
    (list "\\.rd$" "\\.md$" "\\.rbt$" "\\.rab$"))
  (defun my:delete-trailing-whitespace ()
    (interactive)
    (eval-when-compile (require 'cl-lib))
    (cond
     ((equal nil
             (cl-loop for pattern in my:delete-trailing-whitespace-exclude-suffix
                      thereis (string-match pattern buffer-file-name)))
      (delete-trailing-whitespace))))
  :hook (before-save-hook . my:delete-trailing-whitespace)
  )
   #+end_src
** ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ =C-M-= ã‚’æ‰“ã¤ãŸã‚ã«
   :PROPERTIES:
   :CUSTOM_ID: org194b826d
   :END:
   è©³ç´°ã¯
   [[https://superuser.com/questions/83166/using-c-m-to-do-a-query-replace-regexp-in-emacs-running-in-mac-terminal][Using C-M-% to do a query-replace-regexp in Emacs running in Mac terminal]]
   ã‚’å‚ç…§ã®ã“ã¨. terminal ã§ã¯ =C-%= (ã¤ã¾ã‚Š =Control-Shift-5= )ãŒå…¥åŠ›ã§ããªã„, ã¨ã„ã†è©±.

   ä»£ã‚ã‚Šã« =C-x @= ã‚’ =C-M-= ã«è§£é‡ˆã•ã›ã‚‹ã‚ˆã†ã«è¨­å®šã—ã¦ãŠã.
   #+begin_src emacs-lisp :tangle init.el
; cargo cult adaptation of event-apply-control-modifier
(defun my:event-apply-control-meta-modifiers (ignore-prompt)
  (vector
   (event-apply-modifier (event-apply-modifier (read-event)
                                               'control 26 "C-")
                         'meta 27 "M-")))
(define-key function-key-map (kbd "C-x @") 'my:event-apply-control-meta-modifiers)
   #+end_src
* è¨€èªã®è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: orgadf8c6bf
  :END:
  æœ€è¿‘ã®Emacsã¯localeã‹ã‚‰æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•åˆ¤åˆ¥ã™ã‚‹ã‚‰ã—ã„ã®ã§,
  ä»¥å‰è‰¯ãè¨­å®šã—ã¦ã„ãŸä»¥ä¸‹ã¯ä¸è¦ã‚‰ã—ã„ã§ã™ã­(ãƒ›ãƒ³ãƒˆã‹ãª...?)ã€‚
  #+begin_src emacs-lisp :tangle no
(set-language-environment "Japanese")
(prefer-coding-system 'utf-8)
(set-file-name-coding-system 'utf-8)
(set-keyboard-coding-system 'utf-8)
(set-terminal-coding-system 'utf-8)
(set-default 'buffer-file-coding-system 'utf-8)
  #+end_src
  ãªãŠ, m17n.org ã®æ¶ˆæ»…ã«ã‚ˆã£ã¦ä¸Šè¨˜è¨­å®šã«é–¢ã™ã‚‹æƒ…å ±ã®å‚ç…§å…ƒãŒæ¶ˆãˆãŸã€‚
  é©åˆ‡ãªå‚ç…§å…ƒã¯ã©ã“ã ã‚ã†...?
** cp5022x.el
   :PROPERTIES:
   :CUSTOM_ID: org58d8e6f8
   :END:
   Emacs23 ã‹ã‚‰å†…éƒ¨ãŒ Unicode ãƒ™ãƒ¼ã‚¹ã«ãªã£ã¦ã„ã¾ã™ã€‚

   ã—ã‹ã—æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›ã¯GNU libcã®iconvã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ãŸã‚,
   æ©Ÿç¨®ä¾å­˜æ–‡å­—ã‚’å«ã‚€æ–‡å­—ã‚³ãƒ¼ãƒ‰ã®å¤‰æ›ã‚’ã†ã¾ãè¡Œãªãˆã¾ã›ã‚“ã€‚
   ãã“ã§è¨€èªè¨­å®šå‰ã« =cp5022x.el= ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ã¦ã„ã¾ã™ã€‚
   #+begin_src emacs-lisp :tangle init.el
(leaf cp5022x
  :ensure t
  :require t
  :config
  (set-charset-priority 'ascii 'japanese-jisx0208 'latin-jisx0201
                        'katakana-jisx0201 'iso-8859-1 'unicode)
  (set-coding-system-priority 'utf-8 'euc-jp 'iso-2022-jp 'cp932)
  )
   #+end_src
* ä¸»ã«Emacsæœ¬ä½“, ãŠã‚ˆã³åŒæ¢±ã•ã‚Œã¦ã„ã‚‹æ‹¡å¼µã«é–¢ã™ã‚‹è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: org1927da44
  :END:
** çµ‚äº†æ™‚ã« =custom.el= ã‚’æ¶ˆã™
   :PROPERTIES:
   :CUSTOM_ID: orgd140a191
   :END:
   è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«æ¥µåŠ›ç§»ã™.
   #+begin_src emacs-lisp :tangle init.el
(leaf cus-edit
  :preface
  (setq custom-file (expand-file-name "custom.el" my:d:tmp))
  :custom
  `((custom-file . ,(expand-file-name "custom.el" my:d:tmp)))
  :hook
  `((kill-emacs-hook . (lambda ()
                         (if (file-exists-p custom-file)
                             (delete-file custom-file)))))
  )
   #+end_src
** =customize= ã§è¨­å®šã—ã¦ã„ãŸã‚¢ãƒ¬ã‚³ãƒ¬
   :PROPERTIES:
   :CUSTOM_ID: orgaee31636
   :END:
   =custom.el= ã«ã‚ã‚‹è¨­å®šã¯æ¥µåŠ›ã“ã¡ã‚‰ã«ç§»ã™ã‚ˆã†ã«ã—ã¦ã„ã‚‹.
   - å¤§æŠµã®å ´åˆã‚¿ãƒ¼ãƒŸãƒŠãƒ«å†…ã§ =-nw= ã¨ã—ã¦èµ·å‹•ã™ã‚‹ã—,
     ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¯è§¦ã£ãŸã“ã¨ãªã„ã®ã§ä½¿ã‚ãªã„ã®ã§,
     ãƒ•ãƒ¬ãƒ¼ãƒ , ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ç­‰ã‚’éè¡¨ç¤ºã«ã™ã‚‹ï¼
   - =.elc= ã¨ =.el= ã® timestamp ã‚’æ¯”è¼ƒã—, æ–°ã—ã„æ–¹ã‚’èª­ã¿è¾¼ã‚€
    (=load-prefer-newer= ã¯ Emacs >= 24.4 ã‹ã‚‰).
   - yes or no ã‚’ y or n ã«
   ä»–ã«ã‚‚ã‚¤ãƒ­ã‚¤ãƒ­ã¨. è¨­å®šãŒå¢—ãˆã¦ããŸã‚‰åˆ†ã‘ã‚‹.
  #+begin_src emacs-lisp :tangle init.el
(leaf cus-start
  :custom
  `(
    ;; è¡¨ç¤º
    (tool-bar-mode          . nil)  ; åŸºæœ¬ "-nw" ãªã®ã§ä¸è¦
    (scroll-bar-mode        . nil)  ; åŸºæœ¬ "-nw" ãªã®ã§ä¸è¦
    (menu-bar-mode          . nil)  ; åŸºæœ¬ "-nw" ãªã®ã§ä¸è¦
    (blink-cursor-mode      . nil)  ; åŸºæœ¬ "-nw" ãªã®ã§ä¸è¦
    (column-number-mode     . nil)  ; åŸºæœ¬ "-nw" ãªã®ã§ä¸è¦
    (ring-bell-function     . 'ignore)   ; ãƒ™ãƒ«ç„¡åŠ¹åŒ–
    ;; ç·¨é›†
    (tab-width              . 4)    ;; tab å¹… 4
    (indent-tabs-mode       . nil)  ;; tab ã§ã¯ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã—ãªã„
    (fill-column            . 72)   ;; RFC2822 é¢¨å‘³
    (truncate-lines         . nil)  ;; æŠ˜ã‚Šè¿”ã—ç„¡ã—
    (truncate-partial-width-windows . nil)
    (paragraph-start        . '"^\\([ ã€€ãƒ»â—‹<\t\n\f]\\|(?[0-9a-zA-Z]+)\\)")
    (auto-fill-mode         . nil)
    (next-line-add-newlines . nil)  ;; ãƒãƒƒãƒ•ã‚¡çµ‚ç«¯ã§ newline ã‚’å…¥ã‚Œãªã„
    (read-file-name-completion-ignore-case . t)  ; å¤§æ–‡å­—å°æ–‡å­—åŒºåˆ¥ç„¡ã—
    (save-abbrevs           . 'silent)
    ;; backup
    (auto-save-list-file-prefix . ,(expand-file-name ".saves-" my:d:tmp))
    (auto-save-default       . t)
    (auto-save-timeout       . 15)
    (auto-save-interval      . 60)
    (make-backup-files       . t)
    (backup-by-copying       . t)  ;; symlink ã¯ä½¿ã‚ãªã„
    (backup-directory-alist  . '(("." . ,my:d:tmp)))
    (auto-save-file-name-transforms . '((".*" ,my:d:tmp t)))
    (version-control         . t)
    (kept-new-versions       . 5)
    (kept-old-versions       . 5)
    (delete-old-versions     . t)
    (delete-auto-save-files  . t)
    ;; undo/redo - æ•°å­—ã«æ ¹æ‹ ç„¡ã—
    (undo-limit              . 200000)
    (undo-strong-limit       . 260000)
    (history-length          . t)  ;; ç„¡åˆ¶é™(ã®ç­ˆ)
    ;; (save-silently           . t)
    ;;
    (safe-local-variable-values
     . '((org-link-file-path-type . absolute)))
    )
  :config
  (when (boundp 'load-prefer-newer)
    (setq load-prefer-newer t))
  ;; yes or no ã‚’ y or n ã«
  (fset 'yes-or-no-p 'y-or-n-p)
  )
  #+end_src
** =startup=: èµ·å‹•ã¯é™ã‹ã«
   :PROPERTIES:
   :CUSTOM_ID: org9eac26e0
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf startup
  :custom
  ((inhibit-startup-screen            . t)
   (inhibit-startup-message           . t)
   (inhibit-startup-echo-area-message . t)
   (initial-scratch-message           . nil)
   )
  )
  #+end_src
** =hl-mode=: ç¾åœ¨è¡Œã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
   :PROPERTIES:
   :CUSTOM_ID: org58ba514c
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf hl-line
  :hook
  (emacs-startup-hook . global-hl-line-mode)
  )
  #+end_src
** é¸æŠãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«è‰²ä»˜ã‘
   :PROPERTIES:
   :CUSTOM_ID: orgd5c20561
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf simple
  :hook
  (emacs-startup-hook . transient-mark-mode)
  )
  #+end_src
** =show-paren-mode=: å¯¾å¿œã™ã‚‹æ‹¬å¼§ã‚’å¼·èª¿è¡¨ç¤º
   :PROPERTIES:
   :CUSTOM_ID: org281c29f0
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf paren
  :custom
  ((show-paren-style  . 'mixed))
  :hook
  (emacs-startup-hook . show-paren-mode)
  )
  #+end_src
** =linum-mode= : è¡Œç•ªå·è¡¨ç¤º
   :PROPERTIES:
   :CUSTOM_ID: orgdd3a7c08
   :END:
   å¿…è¦ã«å¿œã˜ã¦æœ‰åŠ¹ã«ã™ã‚‹ã®ã§, åŸºæœ¬ä½¿ã‚ãªã„.
   é€šå¸¸ã¯ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã«è¡Œç•ªå·ã‚„æ¡ç•ªå·ã‚’è¡¨ç¤ºã—ãªã„ã‚ˆã†ã™ã‚‹.
   ã¤ã„ã§ã« =linum-mode= ã‚’æœ‰åŠ¹ã«ã—ãŸå ´åˆã®æ¡è¡¨ç¤ºã‚’ 5 æ¡ã«.
  #+begin_src emacs-lisp :tangle init.el
(leaf line-number-mode
  :custom
  ((linum-format     . "%5d ")
   (line-number-mode . nil))
  )
  #+end_src
** byte-compile é–¢é€£
   :PROPERTIES:
   :CUSTOM_ID: org45fe96c0
   :END:
  - debug ã¯è¡¨ç¤ºã—ãªã„: å¿…è¦ã«å¿œã˜ã¦ t ã«å¤‰æ›´ã™ã‚‹
  - Compile-Log ã®éè¡¨ç¤º: ã»ã¨ã‚“ã©è¦‹ãªã„ã—ï¼
  - Warning ã®æŠ‘åˆ¶: ã“ã‚Œã‚‚ã»ã¨ã‚“ã©è¦‹ãªã„ã—ï¼
  ä»–ã«ã‚‚å¢—ãˆãã†ã ãŒ
  #+begin_src emacs-lisp :tangle init.el
(eval-and-compile
  (leaf bytecomp
    :custom
    ((byte-compile-warnings . '(not
                                obsolete
                                free-vars
                                unresolved
                                callargs
                                redefine
                                noruntime
                                cl-functions
                                interactive-only
                                make-local))
     (debug-on-error        . nil))
    :config
    (let ((win (get-buffer-window "*Compile-Log*")))
      (when win (delete-window win)))
    )
  )
  #+end_src
** =autorevert=: ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤‰æ›´ã•ã‚ŒãŸã‚‰å†èª­ã¿è¾¼ã¿
   :PROPERTIES:
   :CUSTOM_ID: org41afd6b6
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf autorevert
  :custom
  ((auto-revert-interval . 0.1))
  :hook
  (emacs-startup-hook . global-auto-revert-mode)
  )
  #+end_src
** =savehist=: å¤‰æ›´å±¥æ­´ã‚’ä¿å­˜
   :PROPERTIES:
   :CUSTOM_ID: org246148ce
   :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf savehist
  :custom
  `((savehist-file
     . ,(expand-file-name "history" my:d:tmp)))
  :hook
  ((emacs-startup-hook . savehist-mode))
  )
  #+end_src
** ãƒ•ã‚¡ã‚¤ãƒ«, ãƒ‡ã‚¤ãƒ¬ã‚¯ãƒˆãƒªæ•´ç†
   :PROPERTIES:
   :CUSTOM_ID: org35f3de20
   :END:
   =~/.emacs.d/= ä»¥ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒè»¢ãŒã‚‹ã®ãŒãªã‚“ã‹å«Œãªã®ã§,
   æ°—ãŒã¤ãåº¦ã«è¨­å®šã—ã¦ã„ã‚‹.
   #+begin_src emacs-lisp :tangle init.el
(leaf *change-default-file-location
  :custom
  `(;; url
    (url-configuration-directory
     . ,(expand-file-name "url" my:d:tmp))
    ;; nsm
    (nsm-settings-file
     . ,(expand-file-name "nsm.data" my:d:tmp ))
    ;; bookmark
    (bookmark-default-file
     . ,(expand-file-name "bookmarks" my:d:share))
    ;; eshell
    (eshell-directory-name
     . ,(expand-file-name "eshell" my:d:tmp))
    )
  )
   #+end_src
   ä»–ã«ã‚‚ã‚¤ãƒ­ã‚¤ãƒ­ã‚ã‚Šãã†ï¼
   =bookmark= ã¯ã¡ã‚ƒã‚“ã¨ä½¿ã„ã“ãªã—ãŸã„æ‰€ã§ã¯ã‚ã‚‹ãŒï¼
** =eldoc=: emacs-lisp document
   :PROPERTIES:
   :CUSTOM_ID: org6a5a84f9
   :END:
   minibuffer ã§ã¯ eldoc ã«ãŠé»™ã‚Šé ‚ãã€‚
   #+begin_src emacs-lisp :tangle init.el
(leaf eldoc
  :hook (emacs-lisp-mode-hook . turn-on-eldoc-mode)
  :blackout t
  :preface
  (defun my:shutup-eldoc-message (f &optional string)
    (unless (active-minibuffer-window)
      (funcall f string)))
  :advice
  (:around eldoc-message
           my:shutup-eldoc-message)
  )
   #+end_src
** =midnight=: ä¸€å®šæœŸé–“ä½¿ç”¨ã—ãªã‹ã£ãŸ buffer ã‚’è‡ªå‹•å‰Šé™¤
   :PROPERTIES:
   :CUSTOM_ID: org2157dacb
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf midnight
  :custom
  ((clean-buffer-list-delay-general . 1))
  :hook
  (emacs-startup-hook . midnight-mode))
   #+end_src
** =uniquify=: ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã®ãƒ•ã‚¡ã‚¤ãƒ«åã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚‚è¡¨ç¤ºã™ã‚‹
   :PROPERTIES:
   :CUSTOM_ID: org9a0cf611
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf uniquify
  :custom
  ((uniquify-buffer-name-style . 'post-forward-angle-brackets)
   (uniquify-min-dir-content   . 1))
  )
   #+end_src
** =whitespace=: ç©ºç™½ã®å¼·èª¿è¡¨ç¤º
   :PROPERTIES:
   :CUSTOM_ID: org68c5e01b
   :END:
   èƒŒæ™¯ã‚‚å¤‰ãˆã‚ˆã†ã‹ãªã...
   #+begin_src emacs-lisp :tangle init.el
(leaf whitespace
  :blackout ((global-whitespace-mode . "")
             (whitespace-mode        . ""))
  :hook (after-init-hook . global-whitespace-mode)
  :custom
  ((whitespace-line-column      . 72)
   (whitespace-style
    . '(face        ; faceã‚’ä½¿ã†
        trailing    ; è¡Œæœ«ã®ç©ºç™½ã‚’å¯¾è±¡.
        tabs        ; tab
        spaces      ; space
        ))
   (whitespace-display-mappings . '((space-mark ?\u3000 [?\â–¡])
                                    (tab-mark ?\t [?\u00BB ?\t] [?\\ ?\t])))
   (whitespace-space-regexp     . "\\(\u3000+\\)")
   (whitespace-global-modes     . '(not eww-mode
                                        term-mode
                                        eshell-mode
                                        org-agenda-mode
                                        calendar-mode))
   )
  )
   #+end_src
** =saveplace=: å‰å›ã®ä¿®æ­£ä½ç½®ã‚’è¨˜æ†¶ã™ã‚‹.
   :PROPERTIES:
   :CUSTOM_ID: org285d3b12
   :END:
   è¨˜æ†¶ã®ä¿å­˜å…ˆã‚’ =~/.emacs.d/tmp/emacs-places= ã«å¤‰æ›´.
   #+begin_src emacs-lisp :tangle init.el
(leaf save-place
  :custom
  `((save-place . t)
    (save-place-file
     . ,(expand-file-name "emacs-places"  my:d:tmp))
    )
  :hook (emacs-startup-hook . save-place-mode)
  :config
  (setq save-place-ingore-files-regexp
        (format "\\(%s\\)\\|\\(%s\\)"
                save-place-ignore-files-regexp
                tramp-file-name-regexp))
  )
   #+end_src
** =time-stamp=: ä¿å­˜æ™‚ã« timestamp ã‚’è‡ªå‹•æ›´æ–°
   :PROPERTIES:
   :CUSTOM_ID: orgd064b693
   :END:
   ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã„ã‚ã„ã‚ã¨è¡çªã—ãŸã®ã§
   æ›´æ–°æ–‡å­—åˆ—ã‚’å¤‰æ›´ã—,  =ï¼„Lastupdate: 2= (ï¼„ã¯åŠè§’) ãŒã‚ã£ãŸã‚‰
   timestamp ã‚’æ›´æ–°ã™ã‚‹æ§˜ã«ã—ãŸï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf time-stamp
  :hook (before-save-hook . time-stamp)
  :custom
  ((time-stamp-active     . t)
   (time-stamp-line-limit . 10)
   (time-stamp-start      . "$Lastupdate: 2")
   (time-stamp-end        . "\\$")
   (time-stamp-format     . "%Y-%02m-%02d %02H:%02M:%02S")
   )
  )
   #+end_src
   ãƒ¢ãƒ¼ãƒ‰ç‹¬è‡ªã®è¨­å®š(ä¾‹ãˆã° Org ã¨ã‹)ã«é–¢ã—ã¦ã¯åˆ¥é€”ï¼
** =tramp=: ssh è¶Šã—ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç·¨é›†
   :PROPERTIES:
   :CUSTOM_ID: org04853162
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf tramp
  :preface
  (setq tramp-persistency-file-name (expand-file-name "tramp" my:d:tmp))
  :custom
  `((tramp-persistency-file-name
     . ,(expand-file-name "tramp" my:d:tmp))
    (tramp-completion-reread-directory-timeout . nil)
    )
  :hook
  (kill-emacs-hook
   . (lambda ()
       (if (file-exists-p tramp-persistency-file-name)
           (delete-file tramp-persistency-file-name))))
  )
   #+end_src
** =browse-url=
   :PROPERTIES:
   :CUSTOM_ID: org456d3821
   :END:
   ãƒ–ãƒ©ã‚¦ã‚¶å‘¼ã³å‡ºã—ã¯ =xdg-open/open= ã«ä¸¸æŠ•ã’.
   #+begin_src emacs-lisp :tangle init.el

(leaf browse-url
  :require t
  :bind ("C-c C-j" . browse-url-at-point)
  :defer-config
  (cond ((executable-find "xdg-open")
         (setq browse-url-browser-function 'browse-url-xdg-open
               browse-url-secondary-browser-function 'browse-url-xdg-open))
        ((eq system-type 'darwin)
         (setq browse-url-browser-function 'browse-url-default-macosx-browser
               browse-url-secondary-browser-function 'browse-url-default-macosx-browser))
        (t
         ;; (setq browse-url-browser-function 'w3m-browse-url)
         (setq browse-url-browser-function 'eww-browse-url)
         ))
  )
   #+end_src
** =server=: Emacs server
   :PROPERTIES:
   :CUSTOM_ID: org931fd3cc
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf server
  :require t
  :config
  (unless (server-running-p)
    (server-start))
  )
   #+end_src
** buffer ã®å°åˆ·
   :PROPERTIES:
   :CUSTOM_ID: orgdd48e2df
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf ps-mule
  :custom
  ((ps-multibyte-buffer . 'non-latin-printer))
  :config
  (defalias 'ps-mule-header-string-charset 'ignore)
  )
   #+end_src
* =recentf=: æœ€è¿‘ä½¿ã£ãŸãƒ•ã‚¡ã‚¤ãƒ«å±¥æ­´ã®ä¿ç®¡
  :PROPERTIES:
  :CUSTOM_ID: org43970469
  :END:
  ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãéš›ã«ã¯ =my:counsel-recentf= ã‚’ä½¿ã†ã®ã§,
  çµå±€å±¥æ­´ã‚’è²¯ã‚ã‚‹è¨­å®šã‚’ã—ã¦ã„ã‚‹äº‹ã«ãªã£ã¦ã„ã‚‹.
  ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å±¥æ­´ã‚‚å–ã‚Œã‚‹ã®ã§ recentf-ext ã‚’å…¥ã‚Œã¦ãŠã
  #+begin_src emacs-lisp :tangle init.el
(leaf recentf
  :defun
  (recentf-save-list recentf-cleanup)
  :preface
  (leaf shut-up
    :ensure t
    :init
    (defvar shut-up-ignore t))
  (defun my:recentf-save-list-silence ()
    "Shut up"
    (interactive)
    (let ((message-log-max nil))
      (shut-up (recentf-save-list)))
    (message ""))
  ;;
  (defun my:recentf-cleanup-silence ()
    "Shut up"
    (interactive)
    (let ((message-log-max nil))
      (shut-up (recentf-cleanup)))
    (message ""))
  ;;
  :init
  (leaf recentf-ext :ensure t)
  :hook
  ((after-init-hook . recentf-mode)
   (focus-out-hook  . my:recentf-save-list-silence)
   (focus-out-hook  . my:recentf-cleanup-silence))
  :custom
  `((recentf-save-file       . ,(expand-file-name "recentf" my:d:tmp))
    (recentf-max-saved-items . 2000)
    (recentf-auto-cleanup    . 'never)
    (recentf-exclude         . '(".recentf"
                                 "^/tmp\\.*"
                                 "^/private\\.*"
                                 "^/var/folders\\.*"
                                 "/TAGS$"
                                 "\\.*è‰ç¨¿\\.*"
                                 "^#\\.*"
                                 "^/home/uwabami/.mozilla/\\.*"
                                 "^/home/uwabami/.emacs.d/tmp/\\.*"
                                 "^/home/uwabami/.dotfiles/Emacs/tmp/\\.*"
                                 "^/[^/:]+:"
                                 "bookmarks"
                                 "org-recent-headings.dat"
                                 "^/mnt/c/\\.*"
                                 )))
  )
  #+end_src
* =all-the-icons-in-terminal=: ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã‚‚icon fontã‚’ä½¿ã„ãŸã„ã€‚
  :PROPERTIES:
  :CUSTOM_ID: orgd903bf1d
  :END:
  [[https://github.com/domtronn/all-the-icons.el][all-the-icons.el]]ã®ãƒ‡ãƒ¼ã‚¿ã‚’ä¿®æ­£ã—ã¦,
  [[https://github.com/sebastiencs/icons-in-terminal][icons in terminal]]ã‚’ä¿®æ­£ã—ãŸ
  è‡ªä½œãƒ•ã‚©ãƒ³ãƒˆã®ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿ã«è¡Œãã‚ˆã†ã«ã—ã¦ã¿ã¾ã—ãŸã€‚
  #+begin_src emacs-lisp :tangle init.el
(leaf all-the-icons
  :ensure t
  :init (leaf memoize :ensure t)
  :require t
  :custom
  ((all-the-icons-scale-factor   . 0.9)
   (all-the-icons-default-adjust . 0.0))
  )
(leaf all-the-icons-in-terminal
  :el-get (all-the-icons-in-terminal
           :type github
           :pkgname "uwabami/isfit-plus")
  :after all-the-icons
  :require t
  :config
  (add-to-list 'all-the-icons-mode-icon-alist
               '(f90-mode all-the-icons-faicon "facebook")) ;; facebook!?
  (add-to-list 'all-the-icons-mode-icon-alist
               '(wl-folder-mode all-the-icons-faicon "folder-o" ))
  (add-to-list 'all-the-icons-mode-icon-alist
               '(wl-summary-mode all-the-icons-faicon "folder-open-o"))
  (add-to-list 'all-the-icons-mode-icon-alist
               '(wl-draft-mode all-the-icons-material "drafts"))
  (add-to-list 'all-the-icons-mode-icon-alist
               '(mime-view-mode all-the-icons-faicon "envelope-o"))
  )
  #+end_src
** SOMEDAY East Asian Ambiguos å¯¾å¿œ [0/1]
   :PROPERTIES:
   :CUSTOM_ID: orgd3ca00ac
   :END:
   East Asian Ambiguosã‚’2æ–‡å­—å¹…ã«ã—ã¦, ã¤ã„ã§ã«
   CJK ä»¥å¤–ã® East Asian Ambiguosã¨çµµæ–‡å­—ã‚‚2æ–‡å­—å¹…ã«ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚
   æ‹™ä½œã®ä¿®æ­£ãƒ­ã‚±ãƒ¼ãƒ«ã¯ã“ã¡ã‚‰: [[https://github.com/uwabami/locale-eaw-emoji]]
   #+begin_src emacs-lisp :tangle init.el
(leaf locale-eaw-emoji
  :el-get uwabami/locale-eaw-emoji
  :after all-the-icons-in-terminal
  :require t
  :config
  (eaw-and-emoji-fullwidth)
  )
   #+end_src
   - [ ] æœ€è¿‘, EAWã¯ä¸€æ–‡å­—å¹…å¼·åˆ¶ã®æ–¹ãŒè‰¯ã„ã‹ãªã, ã¨ã‹æ‚©ã¿ä¸­.
** macOSå¯¾å¿œ
   :PROPERTIES:
   :CUSTOM_ID: orgcf967538
   :END:
   æœ€è¿‘è‰¯ãè§¦ã‚‹æ§˜ã«ãªã£ãŸã®ã§è¨­å®šã—ã¦ã„ã‚‹ã€‚
   +ã¾ã‚, ã‚¤ãƒã‚¤ãƒæ…£ã‚Œãªã„è¨³ã§ã™ã‘ã‚Œã©+
   #+begin_src emacs-lisp :tangle init.el
(leaf *mac-encoding
  :if (eq system-type 'darwin)
  (leaf ucs-normalize
    :require t
    :defvar (mac-pass-control-to-system ns-command-modifier ns-alternate-modifier)
    :config
    (set-file-name-coding-system 'utf-8-hfs)
    (setq locale-coding-system 'utf-8-hfs)
    (setq mac-pass-control-to-system t  ;; Ctrl ã‚’ Mac ã‹ã‚‰å¥ªã„å–ã‚‹
          ns-command-modifier 'meta     ;; Cmd ã¨ Option ã‚’é€†ã«ã™ã‚‹
          ns-alternate-modifier 'super)
    (global-set-key [ns-drag-file] 'ns-find-file)
    )
  )
   #+end_src
** SOMEDAY Windows(WSL2)å¯¾å¿œ [/]
   :PROPERTIES:
   :CUSTOM_ID: org3416eeb2
   :END:
   #+begin_src emacs-lisp
(leaf *wsl2-path
  :if (getenv "WSL_DISTRO_NAME")
  :init
  (defun set-drvfs-alist ()
    (interactive)
    (setq drvfs-alist
          (mapcar
           (lambda (x)
             (when (string-match "\\(.*\\)|\\(.*?\\)/?$" x)
               (cons (match-string 1 x) (match-string 2 x))))
           (split-string (concat
                          ;; //wsl$ ãƒ‘ã‚¹æƒ…å ±ã®è¿½åŠ 
                          (when (or (not (string-match "Microsoft" (shell-command-to-string "uname -v")))
                                    (>= (string-to-number (nth 1 (split-string operating-system-release "-"))) 18362))
                            (concat "/|" (shell-command-to-string "wslpath -m /")))
                          (shell-command-to-string
                           "mount | grep -E ' type (9p|drvfs) ' | grep -v '^tools on /init type 9p' | sed -r 's/(.*) on (.*) type (9p|drvfs) .*/\\2\\|\\1/' | sed 's!\\\\!/!g'"))
                         "\n" t))))

  (defconst windows-path-style-regexp "\\`\\(.*/\\)?\\([a-zA-Z]:\\\\.*\\|[a-zA-Z]:/.*\\|\\\\\\\\.*\\|//.*\\)")

  (defun windows-path-convert-file-name (name)
    (setq name (replace-regexp-in-string windows-path-style-regexp "\\2" name t nil))
    (setq name (replace-regexp-in-string "\\\\" "/" name))
    (let ((case-fold-search t))
      (cl-loop for (mountpoint . source) in drvfs-alist
               if (string-match (concat "^\\(" (regexp-quote source) "\\)\\($\\|/\\)") name)
               return (replace-regexp-in-string "^//" "/" (replace-match mountpoint t t name 1))
               finally return name)))

  (defun windows-path-run-real-handler (operation args)
    "Run OPERATION with ARGS."
    (let ((inhibit-file-name-handlers
           (cons 'windows-path-map-drive-hook-function
                 (and (eq inhibit-file-name-operation operation)
                      inhibit-file-name-handlers)))
          (inhibit-file-name-operation operation))
      (apply operation args)))

  (defun windows-path-map-drive-hook-function (operation name &rest args)
    "Run OPERATION on cygwin NAME with ARGS."
    (windows-path-run-real-handler
     operation
     (cons (windows-path-convert-file-name name)
           (if (stringp (car args))
               (cons (windows-path-convert-file-name (car args))
                     (cdr args))
             args))))
  :hook
  (after-init-hook
   . (lambda ()
       (progn
         (set-drvfs-alist)
         (add-to-list 'my:saved-file-name-handler-alist
                      (cons windows-path-style-regexp
                            'windows-path-map-drive-hook-function)))))
  )
   #+end_src
   - [ ] ä½¿ã†æ°—ã«ãªã£ãŸã‚‰ä½•ã‹ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„, æ°—ãŒã—ã¦ã„ã‚‹
* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: org7d9d4027
  :END:
   è¡¨ç¤ºã®æ›´æ–°ã¨ =japanese-holidays= ã«ã‚ˆã‚‹æ—¥æœ¬ã®ä¼‘æ—¥ã®è¿½åŠ 
   #+begin_src emacs-lisp :tangle init.el
(leaf calendar
  :custom
  (;; ç¥æ—¥ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è¡¨ç¤º
   (mark-holidays-in-calendar . t)
   ;; æœˆã¨æ›œæ—¥ã®è¡¨ç¤ºèª¿æ•´
   (calendar-month-name-array . ["01" "02" "03" "04" "05" "06"
                                 "07" "08" "09" "10" "11" "12" ])
   (calendar-day-name-array   . ["æ—¥" "æœˆ" "ç«" "æ°´" "æœ¨" "é‡‘" "åœŸ"])
   (calendar-day-header-array . ["æ—¥" "æœˆ" "ç«" "æ°´" "æœ¨" "é‡‘" "åœŸ"])
   ;; æ—¥æ›œé–‹å§‹
   (calendar-week-start-day   . 0))
  :config
  (with-eval-after-load 'calendar
    (leaf japanese-holidays
      :ensure t
      :custom
      ((japanese-holiday-weekend         . '(0 6))
       (japanese-holiday-weekend-marker  . '(holiday  ;; æ—¥
                                             nil      ;; æœˆ
                                             nil      ;; ç«
                                             nil      ;; æ°´
                                             nil      ;; æœ¨
                                             nil      ;; é‡‘
                                             japanese-holiday-saturday)))
      :hook
      ((calendar-today-visible-hook   . japanese-holiday-mark-weekend)
       (calendar-today-invisible-hook . japanese-holiday-mark-weekend)
       (calendar-today-visible-hook   . calendar-mark-today))
      :config
      (setq calendar-holidays (append japanese-holidays))
      )
    )
  )
   #+end_src
* ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: org8aa6f45e
  :END:
  æ—¢ã«æ‰‹ç™–ã«ãªã£ã¦ã—ã¾ã£ã¦ã„ã‚‹ã‚¢ãƒ¬ã‚³ãƒ¬ï¼
  ç‰¹ã« =[home]= ã¨ =[end]= ã¯ç„¡ã„ã¨é€”æ–¹ã«æš®ã‚Œã¾ã™ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf-keys (("C-h"     . backward-delete-char)
            ("C-c M-a" . align-regexp)
            ("C-c ;"   . comment-region)
            ("C-c M-;" . uncomment-region)
            ("C-/"     . undo)
            ("C-c M-r" . replace-regexp)
            ("C-c r"   . replace-string)
            ("<home>"  . beginning-of-buffer)
            ("<end>"   . end-of-buffer)
            ("C-c M-l" . toggle-truncate-lines)))
  #+end_src
* =migemo=: ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«æ¤œç´¢
  :PROPERTIES:
  :CUSTOM_ID: org5d9ade19
  :END:
  ç„¡ã„ã¨é€”æ–¹ã«æš®ã‚Œã‚‹ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf migemo
  :if (executable-find "cmigemo")
  :ensure t
  :require t
  :custom
  '((migemo-user-dictionary  . nil)
    (migemo-regex-dictionary . nil)
    (migemo-options          . '("-q" "--emacs"))
    (migemo-command          . "cmigemo")
    (migemo-coding-system    . 'utf-8-unix))
  :init
  (cond
   ((and (eq system-type 'darwin)
         (file-directory-p "/usr/local/share/migemo/utf-8/"))
    (setq migemo-dictionary "/usr/local/share/migemo/utf-8/migemo-dict"))
   (t
    (setq migemo-dictionary "/usr/share/cmigemo/utf-8/migemo-dict")))
  :config
  (migemo-init)
  )
  #+end_src
* SOMEDAY =eww=: å†…è”µãƒ–ãƒ©ã‚¦ã‚¶ [0/3]
  :PROPERTIES:
  :CUSTOM_ID: org35bd4bc4
  :END:
  ãƒªãƒ³ã‚¯ã‚’ç°¡å˜ã«è¾¿ã‚‹(Hit-a-Hint) ã®ãŸã‚ã« =ace-link= ã‚‚å…¥ã‚Œã¦ãŠã
   #+begin_src emacs-lisp :tangle init.el
(leaf eww
  :preface
  (unless (file-directory-p (expand-file-name "eww" my:d:tmp))
    (make-directory (expand-file-name "eww" my:d:tmp)))
  :init
  (leaf ace-link :ensure t)
  (leaf addressbar
    :el-get (addressbar
             :type github
             :pkgname "lurdan/emacs-addressbar")
    :custom
    `((addressbar-persistent-history-directory
       . ,(expand-file-name my:d:tmp))
      (addressbar-ignore-url-regexp
       . "\\(://duckduckgo\\.com/\\|google\\.com/search\\)")
      (addressbar-search-command-alist
       .  '("g" . "https://google.com/search?&gws_rd=cr&complete=0&pws=0&tbs=li:1&q="))
      (addressbar-display-url-max-length . 60)
      ))
  (leaf shr
    :custom
    ((shr-use-colors    . nil)
     (shr-use-fonts     . nil)
     (shr-image-animate . nil)
     (shr-width         . 72))
    )
  :bind (("<f2>" . eww)
         (:eww-mode-map
          ("r"   . eww-reload)
          ("o"   . eww)
          ("&"   . eww-browse-with-external-browser)
          ("b"   . eww-back-url)
          ("]"   . eww-next-url)
          ("["   . eww-previous-url)
          ("g"   . eww-top-url)
          ("+"   . my:eww-increase-width)
          ("-"   . my:eww-decrease-width)
          ("h"   . backward-char)
          ("j"   . next-line)
          ("k"   . previous-line)
          ("l"   . forward-char)
          ("/"   . isearch-forward)
          ("?"   . isearch-backward)
          ("n"   . isearch-next)
          ("N"   . isearch-previous)
          ("f"   . ace-link-eww))
         )
  :custom
  `((eww-bookmarks-directory
     . ,(expand-file-name "eww" my:d:tmp))
    (eww-search-prefix
     . "https://www.google.com/search?&gws_rd=cr&complete=0&pws=0&tbs=li:1&q="))
  :config
  (ace-link-setup-default)
  ;; :init
  ;; ;;
  ;; (defun eww-disable-images ()
  ;;   "ewwã§ç”»åƒè¡¨ç¤ºã•ã›ãªã„"
  ;;   (interactive)
  ;;   (setq-local shr-put-image-function 'shr-put-image-alt)
  ;;   (eww-reload))
  ;; ;;
  ;; (defun eww-enable-images ()
  ;;   "ewwã§ç”»åƒè¡¨ç¤ºã•ã›ã‚‹"
  ;;   (interactive)
  ;;   (setq-local shr-put-image-function 'shr-put-image)
  ;;   (eww-reload))
  ;; (defun shr-put-image-alt (spec alt &optional flags)
  ;;   (insert alt))
  ;; ;;
  ;; ;;
  ;; (defun eww-mode-hook--disable-image ()
  ;;   (setq-local shr-put-image-function 'shr-put-image-alt))
  ;; (add-hook 'eww-mode-hook 'eww-mode-hook--disable-image)
  )
   #+end_src
   - [ ] èƒŒæ™¯è‰²ã®æŒ‡å®š
   - [ ] å¹…ã®å¼·åˆ¶
* SOMEDAY =elscreen=: ãƒãƒƒãƒ•ã‚¡ãƒ¼ç”¨ GNU screen ã‚‚ã©ã [0/2]
  :PROPERTIES:
  :CUSTOM_ID: orgd9b46f9c
  :END:
  emacs-jpã®folkç‰ˆã‚’åˆ©ç”¨ä¸­.
  modeline ã®è¡¨ç¤ºãã®ã‚‚ã®ã¯ç„¡åŠ¹åŒ–ã—ã¦ãŠãï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf elscreen
  :ensure t
  :custom
  ((elscreen-display-tab             . 8)
   (elscreen-tab-display-control     . nil)
   (elscreen-display-screen-number   . nil)
   (elscreen-prefix-key              . "") ;; ãªã‚“ã‹ã‚«ãƒƒã‚³æ‚ªã„ãªã...
   )
  :config
  (elscreen-start)
  )
;; (leaf elscreen-multi-term
;;   :el-get  wamei/elscreen-multi-term
;;  )
  #+end_src
  - [ ] Debian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç‰ˆã¯å¤ã„ï¼æ›´æ–°ã™ã¹ã

  ã¤ã„ã§ã« elscreenâ‡” zsh ã§ã®é€£æºã‚’è¨­å®šã—ã¦ãŠã.
  è©³ç´°ã¯
  - [[https://masutaka.net/chalow/2011-09-28-1.html][ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã® zsh ã¨ Emacs ã‚’é¢¨ã®ã‚ˆã†ã«é§†ã‘æŠœã‘ã‚‹ï¼]]
  - [[http://syohex.hatenablog.com/entry/20111026/1319606395][cdeã‚’æ”¹è‰¯]]
  - [[https://qiita.com/__hage/items/2dd732b4dd68e124e8bd][cdeã¨elscreen-separate-buffer-listã®ç›¸æ€§ãŒæ‚ªã„]]
  ãªã©ã‚’å‚ç…§ã®ã“ã¨.
  #+begin_src emacs-lisp :tangle init.el
(defun return-current-working-directory-to-shell ()
  (interactive)
  (expand-file-name
   (with-current-buffer
       (if (featurep 'elscreen)
           (let* ((frame-confs (elscreen-get-frame-confs (selected-frame)))
                  (num (nth 1 (assoc 'screen-history frame-confs)))
                  (cur-window-conf
                   (assoc 'window-configuration
                          (assoc num (assoc 'screen-property frame-confs))))
                  (marker (nth 2 cur-window-conf)))
             (marker-buffer marker))
         (nth 1
              (assoc 'buffer-list
                     (nth 1 (nth 1 (current-frame-configuration))))))
     default-directory)))
  #+end_src
  - [ ] =counsel-find-file= ã ã¨å‹•ä½œã—ãªã„ã“ã¨ãŒã‚ã‚‹. è¬
* æ—¥æœ¬èªå…¥åŠ›: =ddskk=
  :PROPERTIES:
  :CUSTOM_ID: orgb83f65a0
  :END:
  [[http://openlab.ring.gr.jp/skk/ddskk-ja.html][Daredevil SKK (DDSKK)]] ã‚’ãƒ¡ã‚¤ãƒ³ã§ä½¿ç”¨ä¸­ï¼ç„¡ã„ã¨é€”æ–¹ã«æš®ã‚Œã‚‹ï¼
  ã¡ãªã¿ã«GTKãŒæœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã¨ =gtk-immodule= ãªã‚“ã‹ã¨è¡çªã™ã‚‹ã®ã§
  =~/.Xresources= ã§ xim ã‚’ç„¡åŠ¹ã«ã—ã¦ãŠãã¨è‰¯ã„ï¼
  ä¾‹ãˆã°ä»¥ä¸‹ã®æ§˜ã«:
  #+begin_src conf :tangle no
! disable XIM
Emacs*useXIM: false
  #+end_src
** Emacs æœ¬ä½“å´ã®è¨­å®š(ddskk)
   :PROPERTIES:
   :CUSTOM_ID: orgeaefbd62
   :END:
   å®Ÿéš›ã®è¨­å®šã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œãªã‚ã‚Œã‚‹ãŸã‚
   ã“ã“ã§ã¯è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½ç½®å¤‰æ›´ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ï¼
   #+begin_src emacs-lisp :tangle init.el
(defvar skk-user-directory (concat my:d:tmp "skk"))
(unless (file-directory-p skk-user-directory)
  (make-directory skk-user-directory))
(unless (locate-library "skk")
  (package-install 'ddskk t))
(leaf skk
  :bind (("C-x j"   . skk-mode)
         ("C-x C-j" . skk-mode)
         ("C-\\"    . skk-mode))
  :init
  (setq skk-init-file (concat user-emacs-directory "init-ddskk")
        default-input-method "japanese-skk" )
  )
   #+end_src
** DDSKK æœ¬ä½“ã®è¨­å®š
   :PROPERTIES:
   :CUSTOM_ID: org03d84f47
   :END:
*** åŸºæœ¬å‹•ä½œ
    :PROPERTIES:
    :CUSTOM_ID: orgab495f21
    :END:
    byte-compile ã®ç‚ºã®èª­ã¿è¾¼ã¿
#+begin_src emacs-lisp :tangle init-ddskk.el
(eval-when-compile (require 'skk))
#+end_src
    sticky shift: [[http://homepage1.nifty.com/blankspace/emacs/sticky.html][sticky shift]] ã‚’å‚ç…§ã®ã“ã¨.
    ddskk ã® 14.2 ä»¥é™ã‹ã‚‰åŒæ¢±ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ(ã‚ã‚ŠãŒãŸã„)
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-sticky-key ";")
    #+end_src
    å¤‰æ›å€™è£œã®è¡¨ç¤ºä½ç½®
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-show-candidates-always-pop-to-buffer nil)
    #+end_src
    å€™è£œè¡¨ç¤ºä»¶æ•°ã‚’2åˆ—ã«
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-henkan-number-to-display-candidates 5)
    #+end_src
    æ—¥æœ¬èªè¡¨ç¤ºã—ãªã„
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-japanese-message-and-error nil)
    #+end_src
    ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’æ—¥æœ¬èªã«ã—ãªã„ -> toolbar éè¡¨ç¤ºã ã—.
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-show-japanese-menu nil)
    #+end_src
    æ³¨é‡ˆã®è¡¨ç¤º
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-show-annotation nil)
    #+end_src
    ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®è¡¨ç¤ºã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-latin-mode-string "[_A]")
(setq skk-hiragana-mode-string "[ã‚]")
(setq skk-katakana-mode-string "[ã‚¢]")
(setq skk-jisx0208-latin-mode-string "[ï¼¡]")
(setq skk-jisx0201-mode-string "[_ï½±]")
(setq skk-abbrev-mode-string "[aA]")
(setq skk-indicator-use-cursor-color nil)
    #+end_src
    ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’å·¦ç«¯ã«è¡¨ç¤º
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-status-indicator 'left)
    #+end_src
    mode-line ãŒå‹•ãã®ãŒè¨±ã›ãªã„ã®ã§, ã¡ã‚‡ã£ã¨ä¿®æ­£
    #+begin_src emacs-lisp :tangle init-ddskk.el
(defadvice skk-make-indicator-alist
    (after my:set-skk-default-indicator activate)
  (dolist (elem
           '((abbrev " [aA]" . "--[aA]:")
             (latin " [_A]" . "--[_A]:")
             (default " [--]" . "--[--]:"))
           )
    (setq ad-return-value
          (append (cons elem nil)
                  (delq (assoc (car elem) ad-return-value) ad-return-value)))))
;;
;;(setq skk-show-inline t)
    #+end_src
    ã‚«ãƒ¼ã‚½ãƒ«ã«ã¯è‰²ã‚’ã¤ã‘ãªã„
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-use-color-cursor nil)
    #+end_src
    ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
    #+begin_src emacs-lisp :tangle init-ddskk.el
(global-set-key "\C-x\C-j" 'skk-mode)
(global-set-key "\C-xj" 'skk-mode)
(global-set-key "\C-j" 'skk-mode)
(global-set-key "\C-\\" 'skk-mode)
    #+end_src
    åŠè§’ã‚«ãƒŠã‚’å…¥åŠ›
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-use-jisx0201-input-method t)
    #+end_src
    Enter ã§æ”¹è¡Œã—ãªã„
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-egg-like-newline t)
    #+end_src
    "ã€Œ"ã‚’å…¥åŠ›ã—ãŸã‚‰"ã€"ã‚‚è‡ªå‹•ã§æŒ¿å…¥
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-auto-insert-paren t)
    #+end_src
    å¥èª­ç‚¹å¤‰æ›ãƒ«ãƒ¼ãƒ«
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-kuten-touten-alist
      '(
        (jp    . ("ã€‚" . "ã€"))
        (jp-en . ("ã€‚" . ", "))
        (en-jp . ("ï¼" . "ï¼Œ"))
        (en    . (". " . ", "))
        ))
(setq-default skk-kutouten-type 'en)
    #+end_src
    å…¨è§’è¨˜å·ã®å¤‰æ›: @ ã§ã®æ—¥ä»˜å…¥åŠ›ã¯ä½¿ã‚ãªã„
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-rom-kana-rule-list
      (append skk-rom-kana-rule-list
              '(("!" nil "!")
                (":" nil ":")
                (";" nil ";")
                ("?" nil "?")
                ("z " nil "ã€€")
                ("\\" nil "\\")
                ("@" nil "@")
                )))
    #+end_src
    é€ã‚Šä»®åãŒå³å¯†ã«æ­£ã—ã„å€™è£œã‚’å„ªå…ˆ
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-henkan-strict-okuri-precedence t)
    #+end_src
    è¾æ›¸ã®å…±æœ‰
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-share-private-jisyo t)
    #+end_src
    å¤‰æ›å€™è£œã‚’ç¸¦ã«è¡¨ç¤º
    #+begin_src emacs-lisp :tangle init-ddskk.el
;; (setq skk-show-inline 'vertical)
(setq skk-show-inline nil)
    #+end_src
*** è¾æ›¸ã®è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: orgb6cec722
    :END:
    è¿½åŠ ã—ã¦ã„ã‚‹è¾æ›¸ã®ä¸€è¦§ã¯
    - [[http://www.chibutsu.org/jisho/][åœ°çƒç‰©ç†è¾æ›¸]]
    - [[http://www.geocities.jp/living_with_plasma/tanudic.html][å¤©æ–‡ãƒ»å¤©ä½“ç‰©ç†ç”¨èªã®æ¼¢å­—å¤‰æ›ç”¨è¾æ›¸]]
    - ã¯ã¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
    - [[http://matsucon.net/material/dic/][2ã¡ã‚ƒã‚“ã­ã‚‹é¡”æ–‡å­—è¾æ›¸ MatsuCon]]
    - [[http://matsucon.net/][MatsuCon]]
    ã¨ã„ã£ãŸæ‰€.
    ã¯ã¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‹ã‚‰ã®è¾æ›¸ã®æŠ½å‡ºã¯ [[http://d.hatena.ne.jp/znz][znz]] ã•ã‚“ã®
    - [[http://rubyist.g.hatena.ne.jp/znz/20060924/p1][ã€Œã¯ã¦ãªãƒ€ã‚¤ã‚¢ãƒªãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãµã‚ŠãŒãªãƒªã‚¹ãƒˆã€ã‚’ SKK ã®è¾æ›¸ã«å¤‰æ›]]
    ã‚’å‚è€ƒã«.
    [[http://matsucon.net/][MatsuCon]] ã§å…¬é–‹ã•ã‚Œã¦ã„ã‚‹é¡”æ–‡å­—ã«é–¢ã—ã¦ã¯
    é¡”æ–‡å­—ã« ; ã‚„ ãŒå«ã¾ã‚Œã¦ã„ã‚‹å ´åˆã«, é©å®œquoteã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§
    ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§é©å½“ã«å¤‰æ›.
    #+begin_src ruby :tangle no
#!/usr/bin/env ruby
require 'nkf'
src = ARGV[0]
if ARGV.size < 1
  puts "usage: ime2skk.rb ime_dictionary"
  exit 0
end
File.open(src, "r") {|f|
  f.each do |line|
    line_euc = NKF.nkf("-S -e",line)
    if line_euc =~ /^([^!]+?)\t(.+?)\t.+$/
      entry = $1
      content = $2
      if content =~/;/
        puts entry + " /(concat \"" + content.gsub(';','\\\\073') + "\")/"
      elsif content =~/\//
        puts entry + " /(concat \"" + content.gsub('/','\\\\057') + "\")/"
      else
        puts entry + " /" + content + "/"
      end
    end
  end
}
    #+end_src
    ä»–ã«ã‚‚ quote ã™ã‚‹å¿…è¦ã‚ã‚‹ã‚ˆã†ãªæ°—ã‚‚ã™ã‚‹ã‘ã‚Œã©, ãã‚Œã¯æ°—ãŒã¤ã„ãŸæ™‚ã«.

    è¾æ›¸ã‚µãƒ¼ãƒãŒãã‚‚ãã‚‚ UTF-8 ã‚’æ‰±ãˆã‚Œã°è‰¯ã„ã®ã ã‘ã‚Œã©ã‚‚.
    è¾æ›¸ã‚µãƒ¼ãƒã®æŒ‡å®šã¯ä»¥ä¸‹.
    #+begin_src emacs-lisp :tangle init-ddskk.el
(cond
 ((getenv "SKKSERVER")
  (setq skk-server-host (getenv "SKKSERVER")
        skk-server-portnum "1178"
        skk-large-jisyo nil)
  (add-to-list 'skk-search-prog-list
               '(skk-server-completion-search) t)
  (add-to-list 'skk-search-prog-list
               '(skk-comp-by-server-completion) t))
 (t
  (setq skk-get-jisyo-directory (concat my:d:tmp "skk-jisyo")
        skk-large-jisyo (concat skk-get-jisyo-directory "/SKK-JISYO.L")))
 )
(when (file-exists-p "/usr/local/share/skkdic/SKK-JISYO.emoji.utf8")
  (setq skk-extra-jisyo-file-list
        (list '("/usr/local/share/skkdic/SKK-JISYO.emoji.utf8" . utf-8))))
    #+end_src
    è¾æ›¸ç™»éŒ²ã®éš›ã«é€ã‚Šä»®åã‚’å‰Šé™¤
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-check-okurigana-on-touroku 'auto)
    #+end_src
    æ¼¢å­—ç™»éŒ²ã®ãƒŸã‚¹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹
    #+begin_src emacs-lisp :tangle init-ddskk.el
(setq skk-check-okurigana-on-touroku t)
    #+end_src
    å€‹äººè¾æ›¸ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰
    #+BEGIN_SRC emacs-lisp :tangle init-ddskk.el
(setq skk-jisyo-code 'utf-8-unix)
    #+END_SRC
*** ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒ
    :PROPERTIES:
    :CUSTOM_ID: org0cbdad2e
    :END:
    minibuffer å†…ã§ã¯å¼·åˆ¶çš„ã« skk off.
    ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒã¯ migemo ã«ä»»ã›ã‚‹ã“ã¨ã«ï¼
    #+begin_src emacs-lisp :tangle init-ddskk.el
(add-hook 'skk-mode-hook
          (lambda ()
            (and (skk-in-minibuffer-p)
                 (skk-mode-exit))))
(setq skk-isearch-start-mode 'latin)
    #+end_src
* è£œå®Œ: =ido=
  :PROPERTIES:
  :CUSTOM_ID: orge3fb8a64
  :END:
  è£œå®Œã¯ =ido= ãŒè»½ã„ã—é€Ÿã„ã®ã§å¥½ã¿.
  è¦‹ãŸç›®ãŒã¡ã‚‡ã£ã¨ç°¡ç´ ã™ãã‚‹æ°—ã‚‚ã™ã‚‹ã®ã§ã€ãªã‚“ã¨ã‹å¼„ã‚ŠãŸã„æ‰€ã§ã¯ã‚ã‚‹ã€‚
** =ido= ã®è¨­å®š
   :PROPERTIES:
   :CUSTOM_ID: orgc92613c0
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf ido
  :init
  (leaf ido-completing-read+ :ensure t)
  ;; (leaf ido-describe-bindings :ensure t)
  :bind (("C-x C-f" . ido-find-file))
  :preface
  (defun my:ido-disable-line-trucation ()
    (set (make-local-variable 'truncate-lines) nil))
  ;;
  (defun my:ido-remove-tramp-from-cache nil
    "Remove any TRAMP entries from `ido-dir-file-cache'.
    This stops tramp from trying to connect to remote hosts on emacs startup,
    which can be very annoying."
    (interactive)
    (setq ido-dir-file-cache
          (cl-remove-if
           (lambda (x)
             (string-match "/\\(rsh\\|ssh\\|telnet\\|su\\|sudo\\|sshx\\|krlogin\\|ksu\\|rcp\\|scp\\|rsync\\|scpx\\|fcp\\|nc\\|ftp\\|smb\\|adb\\):" (car x)))
           ido-dir-file-cache)))
  ;;
  (defun my:ido-kill-emacs-hook ()
    (my:ido-remove-tramp-from-cache)
    (ido-save-history))
  :advice (:override ido-kill-emacs-hook
                     my:ido-kill-emacs-hook)
  :hook ((ido-setup-hook
          . (lambda ()
              (define-key ido-completion-map (kbd "C-h") 'ido-delete-backward-updir)
              (define-key ido-completion-map (kbd "C-l") 'ido-delete-backward-updir)))
         (ido-minibuffer-setup-hook . my:ido-disable-line-trucation))
  :init
  ;; è£œå®Œã§ç„¡è¦–ã™ã‚‹æ‹¡å¼µå­ã®è¿½åŠ ï¼ãã®ã†ã¡å¢—ãˆã‚‹ï¼
  (cl-loop for ext in
           '(;; TeX
             ".dvi"
             ".fdb_latexmk"
             ".fls"
             ".ilg"
             ".jqz"
             ".nav"
             ".out"
             ".snm"
             ".synctex\\.gz"
             ".vrb"
             ;; fortran >= 90
             ".mod"
             ;; zsh
             ".zwc"
             ;; libtool
             ".in"
             ".libs/"
             ;; fxxkin Apple
             ".DS_Store"
             "._DS_Store"
             ;; "org-id-locations"
             )
           do (add-to-list 'completion-ignored-extensions ext))
  :custom
  `(;; prefix match å…¥åŠ›ã‚’å…ˆé ­ä¸€è‡´å¯èƒ½
    (ido-enable-prefix             . nil)
    ;; TAB ã§åå‰ã®ä¸€è‡´ã¾ã§ãã®å¾Œ RET ã§å®Ÿè¡Œ
    (ido-confirm-unique-completion . t)
    ;; . ã‚’ prefix ã¨ã—ã¦æ‰±ã†
    (ido-enable-dot-prefix         . nil)
    ;; flx matching ã‚’è©¦ã™éš›ã«ã¯ prefix ã‚’ç„¡åŠ¹åŒ–ã™ã‚‹ã“ã¨
    (ido-enable-flex-matching      . t)
    ;;
    (ido-default-file-method       . 'selected-window)
    (ido-default-buffer-method     . 'selected-window)
    ;; avoid [Too Big]
    (ido-max-directory-size        . 1000000)
    ;; Tramp ã§ã¯ç„¡åŠ¹åŒ–
    (ido-enable-tramp-completion   . nil)
    ;; ido-vertical ã‚‚èª¿ã¹ãªã„ã¨ã‚¢ã‚«ãƒ³æ§˜ãª.
    (ido-use-faces                 . t)
    ;; æ‹¡å¼µå­ã«ã¯ match ã—ãªã„
    (ido-ignore-extensions         . t)
    ;; è£œå®Œã§ããªã„å ´åˆã®æŒ™å‹• â† "ä½•ã‚‚ã—ãªã„" ã¯å¯èƒ½ã‹ãª? nil?
    (ido-cannot-complete-command   . 'ido-next-match)
    ;; è£œå®Œå€™è£œãŒç„¡ã„å ´åˆã« search ã‚’å§‹ã‚ã‚‹é•·ã• â‡’ -1 ã§åœæ­¢
    (ido-auto-merge-work-directories-length . -1)
    ;; è£œå®Œå€™è£œãŒç„¡ã„å ´åˆã« search ã‚’å§‹ã‚ã‚‹æ™‚é–“
    ;; run-with-timer ã«ä¸ãˆã‚‹å€¤ãªã®ã§, ã¨ã‚Šã‚ãˆãšé•·ã‚(30åˆ†)ã«ã—ã¦ãŠã
    (ido-auto-merge-delay-time     . 1800)
    ;; è£œå®Œçµæœã®ä¿å­˜
    (ido-save-directory-list-file
     . ,(expand-file-name "ido.last" my:d:tmp)))
  :config
  (ido-mode t)
  ;; (ido-everywhere t)   ; <- éå»ã®é¸æŠã‚’è¦šãˆã¦ã„ã‚‹å¥´ã¨ç›¸æ€§æ‚ªã„.
  )
   #+end_src
** =flx-ido=: flex match ã®å¼·åŒ–
   :PROPERTIES:
   :CUSTOM_ID: org72b78bcc
   :END:
   æ›–æ˜§ãƒãƒƒãƒãŒéå¸¸ã«ç›´æ„Ÿçš„ã«ãªã£ãŸï¼åœ°å‘³ã«ä¾¿åˆ©ã§æ‰‹æ”¾ã›ãªã„ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf flx-ido
  :ensure t
  :custom
  `((flx-ido-use-faces . t)
    (flx-ido-threshold . 10000))
  :hook
  (emacs-startup-hook . (lambda () (flx-ido-mode 1)))
  )
   #+end_src
** =ido-flx-with-migemo=: flx + migemo
   :PROPERTIES:
   :CUSTOM_ID: orge285b835
   :END:
   ã“ã‚Œã¯ä¾¿åˆ©ã 
   #+begin_src emacs-lisp :tangle init.el
(leaf ido-flex-with-migemo
  :if (executable-find "cmigemo")
  :ensure t
  :after (flx migemo)
  :config
  (ido-flex-with-migemo-mode)
  )
   #+end_src
** SOMEDAY =ido-vertical-mode=: å€™è£œã‚’ç¸¦ã«ä¸¦ã¹ã¦è¡¨ç¤º [/]
   :PROPERTIES:
   :CUSTOM_ID: orgba1f040e
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf ido-vertical-mode
  :ensure t
  :after all-the-icons-in-terminal
  :preface
  (defface my:ido-indicator
    '((((class color) (background light)) :foreground "#FFBF7F")
      (((class color) (background dark)) :foreground "#FFBF7F"))
    "Face used by Ido highlighting the arrow.")
  :custom
  `(;; è£œå®Œå€™è£œæ•°ã®è¡¨ç¤º
    (ido-vertical-show-count  . t)
    ;; ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
    (ido-vertical-define-keys . 'C-n-C-p-up-down-left-right)
    ;; minibuffer ã®é«˜ã•åˆ¶é™
    (ido-max-window-height    . 0.3)
    ;; å€™è£œé¸æŠè¡¨ç¤ºã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    (ido-vertical-indicator
     . ,(format "%s"
                (all-the-icons-faicon "hand-o-right"
                                      :face 'my:ido-indicator)))
    )
  :hook
  (emacs-startup-hook . (lambda () (ido-vertical-mode 1)))
  )
   #+end_src
   - [ ] Debian ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å¤ã„ï¼æ›´æ–°ã™ã‚‹ã“ã¨
** =amx=
   :PROPERTIES:
   :CUSTOM_ID: org28528ad3
   :END:
   M-x ã‚’ ido ã§. ä»¥å‰ã¯ smex ã‚’åˆ©ç”¨ã—ã¦ã„ãŸãŒ, amx ã«ä¹—ã‚Šæ›ãˆãŸ.
   #+begin_src emacs-lisp :tangle init.el
(leaf amx
  :bind (("M-x" . amx))
  :ensure t
  :custom
  `(;; backend 'ivy or 'ido or 'auto
    (amx-backend . 'ido)
    ;; prompt
    (amx-prompt-string . "amx: ")
    ;; keybind
    (amx-show-key-bindings . nil)
    ;; å±¥æ­´
    (amx-save-file
     . ,(expand-file-name "amx-items" my:d:tmp))
    (amx-history-length . 128))
  )
   #+end_src
** =ido-recentf=: recentf ã‚’ ido ã§
   :PROPERTIES:
   :CUSTOM_ID: org56240c5e
   :END:
   "recentf-list" ã®çµæœã‚’æ•´å½¢ã—ã¦, minibuffer ã«ç´ã¾ã‚‹æ§˜ã«ç¸®å°ã—ãŸã‚Š
   #+begin_src emacs-lisp :tangle init.el
(leaf *ido-recentf-open
  :preface
  (defun ido-recentf-open ()
    "Use `ido-completing-read' to \\[find-file] a recent file"
    (interactive)
    (let ((files (mapcar (lambda (f)
                           (cons (my:shorten-file-path f 70) f))
                         recentf-list)))
      (let ((selected (ido-completing-read "Files: " (mapcar #'car files))))
        (find-file (assoc-default selected files)))))
  :bind ("C-x C-r" . ido-recentf-open)
  )
   #+end_src
** ido-ghq
   :PROPERTIES:
   :CUSTOM_ID: org7eb97621
   :END:
   ghq list ã‚’ ido ã§é¸ã‚“ã§ dired ã§é–‹ã
   #+begin_src emacs-lisp :tangle init.el
(leaf ido-ghq
  :if (executable-find "ghq")
  :el-get uwabami/ido-ghq
  :bind (("C-x f" . ido-ghq-open))
  :config
  (setq ido-ghq-short-list t)
  )
   #+end_src
* æ ¡æ­£, è¾æ›¸ç­‰
  :PROPERTIES:
  :CUSTOM_ID: org15a06190
  :END:
** =redpen-paragraph=: [[http://redpen.cc/][redpen]] ã«ã‚ˆã‚‹æ–‡ç« æ ¡æ­£
   :PROPERTIES:
   :CUSTOM_ID: orgc780f35e
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf redpen-paragraph
  :if (and (executable-find "redpen")
           (file-directory-p "~/.config/redpen"))
  :ensure t
  :bind
  (("C-c C-r" . redpen-paragraph))
  :hook
  ((LaTeX-mode-hook
    . (lambda ()
        (setq redpen-commands
              '(
                ;; for english command
                "redpen -r json2 -c ~/.config/redpen/redpen-conf-en.xml -f latex %s 2>/dev/null"
                ;; for japanese command
                "redpen -r json2 -c ~/.config/redpen/redpen-conf-ja.xml -f latex %s 2>/dev/null"
                )))
    ))
  :init
  (defvar redpen-commands
    '(
      ;; for english command
      "redpen -r json2 -c ~/.config/redpen/redpen-conf-en.xml %s 2>/dev/null"
      ;; for japanese command
      "redpen -r json2 -c ~/.config/redpen/redpen-conf-ja.xml %s 2>/dev/null"
      ))
  ;;redpen-paragraph-force-reading-whole t
  )
   #+end_src
** =ispell=: spell checker
   :PROPERTIES:
   :CUSTOM_ID: org3737a28e
   :END:
   ispell ã¯ã‚³ãƒãƒ³ãƒ‰ã¨ã—ã¦ =aspell= ã‚’åˆ©ç”¨ã™ã‚‹.
   #+begin_src emacs-lisp :tangle init.el
(leaf ispell
  :if (file-executable-p "aspell")
  :custom
  (ispell-program-name . "aspell")
  :config
  (add-to-list 'ispell-skip-region-alist '("[^\000-\377]+"))
  )
   #+end_src
** =flyspell=: on-the-fly spell checker [0/1]
   :PROPERTIES:
   :CUSTOM_ID: org820e6b6d
   :END:
   flyspell-mode ã¯åˆ¥é€”æœ‰åŠ¹åŒ–ã—ã¦ãŠã„ãŸæ–¹ãŒè‰¯ã„ã®ã‹ã‚‚ã—ã‚Œãªã„
   #+begin_src emacs-lisp :tangle init.el
(leaf flyspell
  :ensure t
  :blackout (flyspell-mode . "F")
  :defun
  flyspell-emacs-popup-textual
  :preface
  (defun my:flyspell-popup-choose (orig event poss word)
    (if (window-system)
        (funcall orig event poss word)
      (flyspell-emacs-popup-textual event poss word)))
  :advice (:around flyspell-emacs-popup
                   my:flyspell-popup-choose)
  :hook
  ;; flyspell-prog-mode ã¨ã® switch ãŒæ¬²ã—ã„
  ((LaTeX-mode-hook . flyspell-mode))
  )
   #+end_src
   - [ ] flyspell-prog-mode ã¨ã® switch ãŒæ¬²ã—ã„
** =lookup=: é›»å­è¾æ›¸ã®æ¤œç´¢
   :PROPERTIES:
   :CUSTOM_ID: org3002f57f
   :END:
   EPWINGåŒ–ã—ãŸè¾æ›¸ç¾¤ã‚’æ¤œç´¢ã™ã‚‹ãŸã‚ã« =lookup-el= ver. 1.4 ç³»åˆ—ã‚’åˆ©ç”¨
   #+begin_src emacs-lisp :tangle init.el
(leaf lookup
  :if (and (file-exists-p "/etc/emacs/site-start.d/50lookup-el.el")
           (file-exists-p "/usr/local/share/dict/lookup-enabled"))
  :commands (lookup lookup-region lookup-pattern)
  :bind (("C-c w" . lookup-pattern)
         ("C-c W" . lookup-word))
  :custom
  (lookup-search-agents
   . '((ndeb "/usr/local/share/dict/eijiro" :alias "è‹±è¾éƒ")
       (ndeb "/usr/local/share/dict/waeijiro" :alias "å’Œè‹±è¾éƒ")
       (ndeb "/usr/local/share/dict/rikagaku5" :alias "ç†åŒ–å­¦è¾å…¸ ç¬¬5ç‰ˆ")
       (ndeb "/usr/local/share/dict/koujien4" :alias "åºƒè¾è‹‘ ç¬¬4ç‰ˆ")
       (ndeb "/usr/local/share/dict/wadai5" :alias "ç ”ç©¶ç¤¾ å’Œè‹±å¤§è¾å…¸ ç¬¬5ç‰ˆ")
       (ndeb "/usr/local/share/dict/eidai6" :alias "ç ”ç©¶ç¤¾ è‹±å’Œå¤§è¾å…¸ ç¬¬6ç‰ˆ")
       (ndeb "/usr/local/share/dict/colloc" :alias "ç ”ç©¶ç¤¾ è‹±å’Œæ´»ç”¨å¤§è¾å…¸ ")))
  )
   #+end_src
* Copy & Paste:
  :PROPERTIES:
  :CUSTOM_ID: org12fd2b4e
  :END:
** Linux ã§ã¯ =xclip= ã‚’åˆ©ç”¨
   :PROPERTIES:
   :CUSTOM_ID: org1689d1f5
   :END:
   clipboard ã¨ PRIMARY ã®åŒæœŸã«ã¯ =gpaste= ã‚’ä½¿ã£ã¦ã„ã‚‹ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf xclip
  :if (and (executable-find "xclip")
           (eq system-type 'gnu/linux))
  :ensure t
  :config
  (xclip-mode 1))
   #+end_src
** macOS ã§ã¯ =pbcopy/pbpaste= ã‚’åˆ©ç”¨.
   :PROPERTIES:
   :CUSTOM_ID: orgb2de5472
   :END:
   =pbcopy/pbpase= ã®å‘¼ã³å‡ºã—æ–¹ãŒå¤‰ã‚ã£ãŸ? å‹•ã‹ãªã„æ™‚ãŒã‚ã‚‹æ§˜ãªã€‚
   #+begin_src emacs-lisp :tangle init.el
(leaf *macOSclipborad
  :if (eq system-type 'darwin)
  :preface
  (defun my:copy-from-osx ()
    "Get string via pbpaste"
    (shell-command-to-string "pbpaste"))
  (defun my:paste-to-osx (text &optional push)
    "put `TEXT' via pbcopy with `PUSH' mode"
    (let ((process-connection-type nil))
      (let ((proc (start-process "pbcopy" "*Messages*" "pbcopy")))
        (process-send-string proc text)
        (process-send-eof proc))))
  :config
  (setq interprogram-cut-function   'my:paste-to-osx
        interprogram-paste-function 'my:copy-from-osx)
  )
   #+end_src
* =ibuffer=: buffer ã®æ“ä½œ
  :PROPERTIES:
  :CUSTOM_ID: org5f756509
  :END:
  buffer ã‚’çœºã‚ã‚‹ã®ã¯ ibuffer ãŒå¥½ã¿
  #+begin_src emacs-lisp :tangle init.el
(leaf ibuffer
  :after all-the-icons-in-terminal
  :defun (ibuffer-current-buffer)
  :defvar (ibuffer-formats)
  :preface
  (defun my:ibuffer-find-file ()
    "Like `find-file', but default to the directory of the buffer at point."
    (interactive)
    (let ((default-directory
            (let ((buf (ibuffer-current-buffer)))
              (if (buffer-live-p buf)
                  (with-current-buffer buf
                    default-directory)
                default-directory))))
      (find-file default-directory)))
  ;;
  :bind (("C-x C-b" . ibuffer-other-window)
         ("C-x b"   . ibuffer-other-window)
         ("C-x M-b" . ibuffer)
         (:ibuffer-mode-map
          ("C-x C-f" . my:ibuffer-find-file))
         )
  :config
  (define-ibuffer-column icon (:name "  ")
    (let ((icon
           (if (and (buffer-file-name)
                    (all-the-icons-auto-mode-match?))
               (all-the-icons-icon-for-file
                (file-name-nondirectory (buffer-file-name)))
             (all-the-icons-icon-for-mode major-mode ))))
      (if (symbolp icon)
          (setq icon
                (all-the-icons-faicon
                 "file-o"
                 :face 'all-the-icons-dsilver))
        icon)))
  ;;
  (setq ibuffer-formats
        `((mark modified read-only
                " " (icon 2 2 :left :elide)
                ,(propertize " " 'display `(space :align-to 8))
                (name 18 18 :left :elide)
                " " (size 9 -1 :right)
                " " (mode 16 16 :left :elide) " " filename-and-process)
          (mark " " (name 16 -1) " " filename)))
  )
  #+end_src
* =wanderulst=: MUA ã®è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: org2c2abb9b
  :END:
  MUA ã¨ã—ã¦ Wanderlust ã‚’ä½¿ã£ã¦ã„ã‚‹
  - [[https://wanderlust.github.io/wl-docs/wl-ja.html][Wanderlust â€“ Yet Another Message Interface On Emacsen â€“]]
** Emacs æœ¬ä½“å´ã®è¨­å®š(wanderlust)
   :PROPERTIES:
   :CUSTOM_ID: org47a9ca66
   :END:
   Emacs æœ¬ä½“ã§ã®è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Š. Wanderlust è‡ªä½“ã®è¨­å®šã¯åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§è¡Œãªã‚ã‚Œã‚‹ï¼
   ã“ã“ã§ã¯ =wl-init-file= ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§, è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ˜ç¤ºã—ã¦ã„ã‚‹ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf wl
  :if (file-exists-p "/etc/emacs/site-start.d/65wl-beta.el")
  :commands (wl wl-other-frame wl-draft wl-user-agent wl-user-agent-compose wl-draft-send wl-draft-kill)
  :preface
  (defun my:wl-mode-line-buffer-identification (&optional id)
    (force-mode-line-update t))
  (defconst my:d:wl-cache-directory
    (expand-file-name "wanderlust" "~/.cache"))
  (unless (file-directory-p
           (expand-file-name "local/Trash" my:d:wl-cache-directory))
    (make-directory
     (expand-file-name "local/Trash" my:d:wl-cache-directory) t))
  :advice (:override wl-mode-line-buffer-identification
                     my:wl-mode-line-buffer-identification)
  :custom
  `((elmo-msgdb-directory     . my:d:wl-cache-directory)
    (elmo-maildir-folder-path . my:d:wl-cache-directory)
    (elmo-cache-directory     . my:d:wl-cache-directory)
    (wl-score-files-directory . my:d:wl-cache-directory)
    (read-mail-command        . #'wl)
    (wl-init-file
     . ,(expand-file-name "init-wl" user-emacs-directory))
    )
  :init
  (define-mail-user-agent
    'wl-user-agent
    'wl-user-agent-compose
    'wl-draft-send
    'wl-draft-kill
    'mail-send-hook)
  )
   #+end_src
   å‰²ã¨ =/etc/emacs/site-start.d/65wl-beta.el= ã¨é‡è¤‡ã—ã¦ã„ã‚‹æ°—ãŒã™ã‚‹ãŒ...
** Wanderlust æœ¬ä½“ã®è¨­å®š
   :PROPERTIES:
   :CUSTOM_ID: org160184bf
   :END:
   å®Ÿéš›ã®è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Š
*** byte-compile ã®æº–å‚™
    :PROPERTIES:
    :CUSTOM_ID: orge2af69a1
    :END:
     #+begin_src emacs-lisp :tangle init-wl.el
(eval-and-compile
  (leaf el-x
    :el-get (el-x
             :type github
             :pkgname "sigma/el-x"
             :build `(("make" ,(format "EMACSBIN=%s" el-get-emacs)))
             :load-path "lisp"
             )
    :require t
    )
  )
(eval-when-compile
  (require 'cp5022x)
  (require 'wl)
  (require 'mime-def))
     #+end_src
*** ä¾å­˜/è¿½åŠ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨èª­ã¿è¾¼ã¿
    :PROPERTIES:
    :CUSTOM_ID: org9638e017
    :END:
**** rail
     :PROPERTIES:
     :CUSTOM_ID: org587385af
     :END:
     SEMI ã‚„ FLIM ãªã©ã® UA ã®è¡¨ç¤ºã« [[http://uwabami.github.com/rail/][rail]] ã‚’ä½¿ã£ã¦ã„ã‚‹.
     ã¡ãªã¿ã« rail ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨, ä»¥ä¸‹ã®æ§˜ã« User-Agent ãŒè¡¨ç¤ºã•ã‚Œã‚‹
     #+html: <div class="col-7 px2 mx-auto">
     #+html: <amp-img layout="responsive" width=640 height=400 src="https://uwabami.github.io/software/rail/wanderlust_with_or_without_rail.webp" alt="rail preview"></amp-img>
     #+html: </div>

     #+begin_src emacs-lisp :tangle init-wl.el
(leaf rail
  :init
  (unless (locate-library "rail")
    (el-get-bundle uwabami/rail))
  (setq rail-emulate-genjis t)
  :require t
  )
     #+end_src
**** cp5022x ã‚’ä½¿ã†
     :PROPERTIES:
     :CUSTOM_ID: orga4113e25
     :END:
     ISO-2022-JP ã‚’ CP50220 ã¨ã—ã¦æ‰±ã†.
     [[http://d.hatena.ne.jp/kiwanami/20091103/1257243524][Wanderlustã¨æ–‡å­—ã‚³ãƒ¼ãƒ‰]] ã‚‚å‚ç…§ã®ã“ã¨.
     #+begin_src emacs-lisp :tangle init-wl.el
(add-to-list 'mime-charset-coding-system-alist
             '(iso-2022-jp . cp50220))
;; fxxkin outlook
(add-to-list 'mime-charset-coding-system-alist
             '(gb2312 . gbk))
;;
(setq wl-mime-charset 'iso-2022-jp)
     #+end_src
**** SEMI ã®è¿½åŠ è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: orgc4ec7a62
     :END:
     HTML ãƒ¡ãƒ¼ãƒ«ã‚’è¡¨ç¤ºã™ã‚‹ãŸã‚ã« eww ã‚’ä½¿ã†.
     mime-setup ãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹å‰ã«è¨˜è¿°ã™ã‚‹å¿…è¦ã‚ã‚Š.
     #+begin_src emacs-lisp :tangle init-wl.el
(leaf mime-setup
  :preface
  (leaf w3m-load)
  (leaf mime-w3m :require t)
  ;; (setq mime-view-text/html-previewer 'shr
  ;;       mime-setup-enable-inline-html 'shr)
  ;; (defvar my:shr-width 72)
  ;; ;;
  ;; (defun my:shr-insert-document (&rest them)
  ;;   (let ((shr-width my:shr-width)) (apply them)))
  ;; ;;
  ;; (defun my:mime-shr-preview-text/html (&rest args)
  ;;   (advice-add 'shr-insert-document :around 'my:shr-insert-document)
  ;;   (unwind-protect
  ;;       (apply args)
  ;;     (advice-remove 'shr-insert-document 'my:shr-insert-document)))
  ;; :advice
  ;; (:around mime-shr-preview-text/html
  ;;          my:mime-shr-preview-text/html)
  )
     #+end_src
     ã©ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§é–‹ãã‹ â†’ =xdg-open= ã«ä¸¸æŠ•ã’ï¼
     #+begin_src emacs-lisp :tangle init-wl.el
;; (setq mime-view-mailcap-files '("~/.mailcap"))
     #+end_src
     =~/.mailcap= è‡ªä½“ã¯ä»¥ä¸‹
     #+begin_src conf :tangle no
applications/*; xdg-open %s;
image/*; xdg-open %s;
video/*; xdg-open %s;
     #+end_src
     MIME ã®ä¾‹ã®ä¿å­˜å…ˆã®å¤‰æ›´
     #+begin_src emacs-lisp :tangle init-wl.el
(setq mime-situation-examples-file
      (concat my:d:tmp "mime-example"))
     #+end_src
     text/plain ã‚ˆã‚Š html ã‚’å„ªå…ˆ =(- -;)=
     #+begin_src emacs-lisp :tangle init-wl.el
(setq mime-view-type-subtype-score-alist
      '(((text . plain) . 1)
        ((text . html)  . 0)
        ))
     #+end_src
     éŸ³ã‚’é³´ã‚‰ã™ã‚¢ãƒ¬ã‚„ã‚³ãƒ¬ã®ç„¡åŠ¹åŒ–
     #+begin_src emacs-lisp :tangle init-wl.el
(setq mime-play-find-every-situations nil
      mime-play-delete-file-immediately nil
      process-connection-type nil)
     #+end_src
*** å€‹äººæƒ…å ±ã®è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org6dae78eb
    :END:
    å…·ä½“çš„ãªè¨­å®šå†…å®¹ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ã„ã¦ã„ã‚‹
    #+begin_src emacs-lisp :tangle init-wl.el
(load (concat my:d:password-store "/wl-info.gpg"))
    #+end_src
    è¨­å®šã—ã¦ã„ã‚‹å†…å®¹ã¯ä»¥ä¸‹ã®é€šã‚Š
**** è‡ªèº«ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨è³¼èª­ãƒ¡ãƒ¼ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: org7f87384b
     :END:
     #+begin_src emacs-lisp :tangle no
;; From: ã®è¨­å®š
(setq wl-from (concat user-full-name " <" user-mail-address ">"))
;; (system-name) ãŒ FQDN ã‚’è¿”ã•ãªã„å ´åˆã€
;; `wl-local-domain' ã«ãƒ›ã‚¹ãƒˆåã‚’é™¤ã„ãŸãƒ‰ãƒ¡ã‚¤ãƒ³åã‚’è¨­å®š
(setq wl-local-domain "example.com")
;; è‡ªåˆ†ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ãƒªã‚¹ãƒˆ
(setq wl-user-mail-address-list
      (list (wl-address-header-extract-address wl-from)
            ;; "e-mail2@example.com"
            ;; "e-mail3@example.net" ...
            ))
;; è‡ªåˆ†ã®å‚åŠ ã—ã¦ã„ã‚‹ãƒ¡ãƒ¼ãƒªãƒ³ã‚°ãƒªã‚¹ãƒˆã®ãƒªã‚¹ãƒˆ
(setq wl-subscribed-mailing-list
      '("wl@lists.airs.net"
        "apel-ja@m17n.org"
        "emacs-mime-ja@m17n.org"
        ;; "ml@example.com" ...
        ))
     #+end_src
**** é€å—ä¿¡ç”¨ã‚µãƒ¼ãƒã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: orgba8bc2e7
     :END:
     å—ä¿¡(IMAP)
     #+begin_src emacs-lisp :tangle no
(setq elmo-imap4-default-server "your imap server")
(setq elmo-imap4-default-port '993)
(setq elmo-imap4-default-stream-type 'ssl)
     #+end_src
     é€ä¿¡(SMTP)
     #+begin_src emacs-lisp :tangle no
(setq wl-smtp-posting-server "your smtp server")
(setq wl-smtp-posting-user "your account")
(setq wl-smtp-posting-port 587)
(setq wl-smtp-connection-type 'starttls)
(setq wl-smtp-authenticate-type "login")
     #+end_src
**** From ã«å¿œã˜ã¦é€ä¿¡ã‚µãƒ¼ãƒã‚’ãã‚Šã‹ãˆã‚‹.
     :PROPERTIES:
     :CUSTOM_ID: org9af3a565
     :END:
     æœ¬æ¥ã¯ãƒ¡ãƒ¼ãƒ«ä½œæˆæ™‚/è¿”ä¿¡æ™‚ã® template ã®åˆ‡ã‚Šæ›¿ãˆãªã®ã ã‚Œã©,
     é€ä¿¡æ™‚ã® SMTP ã®è¨­å®šã‚’ from ã«åˆã‚ã›ã¦ãã‚Šã‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹.
     default ã«äºŒé‡ã«æŒ‡å®šã—ã¦ã„ã‚‹ã®ã¯,
     ä¸€åº¦åˆ¥ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«åˆ‡ã‚Šæ›¿ãˆãŸå¾Œã«å†ã³ãƒˆã‚°ãƒ«ã—ã¦æˆ»ã£ã¦æ¥ãŸéš›ã«å…ƒã«æˆ»ã™(ä¸Šæ›¸ã)ã™ã‚‹ãŸã‚.
     #+begin_src emacs-lisp :tangle no
(setq wl-template-alist
      '(("default"
         ("From" . wl-from)
         (wl-smtp-posting-server . "your smtp server")
         (wl-smtp-posting-user . "your account")
         (wl-smtp-posting-port . 587)
         (wl-smtp-connection-type . 'starttls)
         (wl-smtp-authenticate-type . "login")
         )
        ("example1"
         ("From" . "Your Name <account@example1.com>")
         (wl-smtp-posting-server . "smtp.example1.com")
         (wl-smtp-posting-user . "your account")
         (wl-smtp-posting-port . 587)
         (wl-smtp-connection-type . 'starttls)
         (wl-smtp-authenticate-type . "login")
         )
        ("example2"
         ("From" . "Your Name <account@example2.com>")
         (wl-smtp-posting-server . "smtp.example2.com")
         (wl-smtp-posting-user . "your account")
         (wl-smtp-posting-port . 587)
         (wl-smtp-connection-type . 'starttls)
         (wl-smtp-authenticate-type . "plain")
         )
        ("ssh:smtp"
         ;; need ssh tunnel
         ;; ssh -f -N -L 20025:localhost:25 smtp.server.com
         ("From" . "Your Name <account@example3.com>")
         (wl-smtp-posting-server . "localhost")
         (wl-smtp-posting-user . "your ssh account")
         (wl-smtp-posting-port . 20025)
         (wl-smtp-connection-type . 'nil)
         (wl-smtp-authenticate-type . 'nil)
         )
        ))
     #+end_src
     ssh tunnel ã‚’è‡ªå‹•çš„ã«ã‚„ã‚‹äº‹ã¯ã§ããªã„ãƒ¢ãƒ³ã ã‚ã†ã‹
     (é€ä¿¡æ™‚ã« open ã—ã¦, é€ä¿¡å¾Œã« close ã™ã‚‹, ã¿ãŸã„ãªã®).

     ã¤ã„ã§ã« template ã®åˆ‡ã‚Šæ›¿ãˆã«é–¢ã—ã¦å¹¾ã¤ã‹è¨­å®š.
     #+begin_src emacs-lisp :tangle init-wl.el
;; template åˆ‡ã‚Šæ›¿ãˆæ™‚ã« å†…å®¹ã‚’è¡¨ç¤º
(setq wl-template-visible-select t)
     #+end_src
     =draft-mode= ã§ =C-c C-n= ã‚’ã™ã‚‹ã¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆ
     #+begin_src emacs-lisp  :tangle init-wl.el
(define-key wl-draft-mode-map "\C-c\C-n" 'wl-template-select)
     #+end_src
     from ã«å¿œã˜ã¦ wl-from, wl-envelope-from,
     é€ä¿¡ smtp ã‚µãƒ¼ãƒã‚’å¤‰æ›´ã™ã‚‹é€ä¿¡æ™‚ã«å¤‰æ›´
     #+begin_src emacs-lisp  :tangle init-wl.el
(add-hook 'wl-draft-send-hook
          (lambda ()
            (set (make-local-variable 'wl-from)
                 (std11-fetch-field "From"))))
     #+end_src
     é€ä¿¡æ™‚ã«è‡ªå‹•çš„ã« wl-draft-config-alist ã‚’é©ç”¨...ã—ãªã„?
     #+begin_src emacs-lisp  :tangle init-wl.el
(remove-hook 'wl-draft-send-hook 'wl-draft-config-exec)
     #+end_src
*** åŸºæœ¬è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org19ec5248
    :END:
**** imap é–¢é€£
     :PROPERTIES:
     :CUSTOM_ID: org69cc3854
     :END:
     ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®èªè¨¼è¨­å®š
     ãƒ•ã‚©ãƒ«ãƒ€åã¯ UTF-7 ã§ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹ã®ã§,
     è¡¨ç¤ºã™ã‚‹éš›ã«ã“ã‚Œã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹
     #+begin_src emacs-lisp :tangle init-wl.el
(setq elmo-imap4-use-modified-utf7 t)
     #+end_src
**** éåŒæœŸãƒã‚§ãƒƒã‚¯
     :PROPERTIES:
     :CUSTOM_ID: org2d8166ce
     :END:
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-folder-check-async t)
     #+end_src
**** ãƒ•ã‚©ãƒ«ãƒ€ã®ä½ç½®ã® default ã‹ã‚‰ã®å¤‰æ›´
     :PROPERTIES:
     :CUSTOM_ID: org6572a382
     :END:
     =~/.cache/wanderlust/= ã«é›†ç´„ã—ã¦ã„ã‚‹
     local ã® Mail folder ã®ä½ç½®
     #+begin_src emacs-lisp :tangle init-wl.el
(setq elmo-maildir-folder-path "~/.cache/wanderlust"
      elmo-localdir-folder-path "~/.cache/wanderlust/local")
     #+end_src
     local ãƒ•ã‚©ãƒ«ãƒ€ã®è¨­å®š:
     =.lost+found= ã¯ =elmo-maildir-folder-path= ã‹ã‚‰ã®ç›¸å¯¾ãƒ‘ã‚¹ã«ãªã£ã¦ã„ã‚‹ã“ã¨ã«æ³¨æ„
     #+begin_src emacs-lisp :tangle init-wl.el
(setq elmo-lost+found-folder ".lost+found")
(setq wl-queue-folder "+queue")
     #+end_src
     folders ã®ä½ç½®ã®å¤‰æ›´
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-folders-file (concat my:d:password-store "/wl-folders.gpg"))
     #+end_src
     Drafts, Trash ã®ç½®ãå ´æ‰€
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-draft-folder "+Drafts")
(setq wl-trash-folder "+Trash")
(setq elmo-lost+found-folder "+lost+found")
(setq wl-temporary-file-directory "~/Downloads/")
     #+end_src
     ã‚¢ãƒ‰ãƒ¬ã‚¹å¸³
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-use-petname t)
(setq wl-address-file  "~/.mua/Address")
     #+end_src
     LDAP ã‚µãƒ¼ãƒã‹ã‚‰ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å¼•ãã“ã¨ã‚‚å¯èƒ½.
     ä»¥å‰ã¯ GCALDaemon ã‚’ä½¿ã£ã¦ local ã« ldap ã‚µãƒ¼ãƒã‚’ä¸Šã’ã¦ã„ãŸã®ã ã‘ã‚Œã©ã‚‚,
     Google Contacts ã® API ãŒå¤‰ã‚ã£ãŸã‚‰ã—ã
     GCALDaemon ã§ LDAP ã‚µãƒ¼ãƒã¯ä½¿ãˆãªããªã£ãŸã®ã§ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆ.
     #+begin_src emacs-lisp :tangle no
(setq wl-use-ldap t)
(setq wl-ldap-server "localhost")
(setq wl-ldap-port "389")
(setq wl-ldap-base "dc=math,dc=kyoto-u,dc=ac,dc=jp")
     #+end_src
     ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ä¿å­˜å…ˆ
     #+begin_src emacs-lisp :tangle init-wl.el
(setq elmo-passwd-alist-file-name (concat my:d:password-store "/wl-passwd.gpg"))
     #+end_src
**** ãƒ•ã‚©ãƒ«ãƒ€ç·¨é›†æ™‚ã« backup ã‚’ä½œæˆã—ãªã„.
     :PROPERTIES:
     :CUSTOM_ID: org72bfee4a
     :END:
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-fldmgr-make-backup nil)
     #+end_src
**** FCC, BCC ã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: org223d5fa2
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-fcc nil)
;; (setq wl-fcc "%Sent")
     #+end_src
     fcc ã‚’æ—¢èª­ã«ã™ã‚‹å ´åˆã¯ä»¥ä¸‹ï¼=wl-fcc= ãŒ nil ã®å ´åˆã«ã¯æ„å‘³ã¯ç„¡ã„
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-fcc-force-as-read t)
     #+end_src
     bcc ã¯å¸¸ã«è‡ªèº«ã«.
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-bcc (concat user-mail-address))
     #+end_src
**** èµ·å‹•æ™‚ã« =%INBOX= ã®ã¿ã‚’ãƒã‚§ãƒƒã‚¯
     :PROPERTIES:
     :CUSTOM_ID: org4378f104
     :END:
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-auto-check-folder-name "%INBOX")
     #+end_src
**** ãƒ•ã‚©ãƒ«ãƒ€é¸æŠæ™‚ã®åˆæœŸè¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: org6efc7670
     :END:
     imap ã® namespace ã‚’æ¯åº¦å…¥åŠ›ã™ã‚‹ã®ãŒé¢å€’ãªã®ã§, ã“ã‚Œã‚’è¿½åŠ ã—ã¦ãŠã.
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-default-spec "%")
     #+end_src
**** confirm é–¢é€£ã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: orgb2cf2b53
     :END:
     ã‚¹ã‚­ãƒ£ãƒ³æ™‚ã®å•ã„åˆã‚ã›ã®ç„¡åŠ¹åŒ–.
     ã¡ãªã¿ã« confirm ã‚’ nil ã«ã—ã¦ã‚‚ å•ã„åˆã‚ã›ãŒç„¡ã„ã ã‘ã§
     threshold ã¯åŠ¹ãã®ã§, æ˜ç¤ºçš„ã« nil ã«.
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq elmo-folder-update-confirm nil)
(setq elmo-folder-update-threshold nil)
(setq elmo-message-fetch-confirm nil)
(setq elmo-message-fetch-threshold nil)
(setq wl-prefetch-confirm nil)
(setq wl-prefetch-threshold nil)
     #+end_src
     çµ‚äº†æ™‚ã«ç¢ºèªã—ãªã„
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-interactive-exit nil)
     #+end_src
     é€ä¿¡æ™‚ã¯ç¢ºèªã™ã‚‹
     #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-interactive-send t)
     #+end_src
**** misc.
     :PROPERTIES:
     :CUSTOM_ID: org14b77860
     :END:
     å¤§ãã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡æ™‚ã«åˆ†å‰²ã—ãªã„
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq mime-edit-split-message nil)
     #+end_src
     ã‚¹ãƒ¬ãƒƒãƒ‰ã¯å¸¸ã«é–‰ã˜ã‚‹
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-thread-insert-opened nil)
     #+end_src
     3 pain è¡¨ç¤º -> ä½¿ã‚ãªã„
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-stay-folder-window nil)
     #+end_src
     æœªèª­ã‚’å„ªå…ˆçš„ã«èª­ã‚€
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-summary-move-order 'unread)
     #+end_src
     æ”¹ãƒšãƒ¼ã‚¸ç„¡è¦–
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-break-pages nil)
     #+end_src
     icon ã‚’ä½¿ã‚ãªã„ â†’ GUI ã§ã‚‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼è¡¨ç¤ºã—ã¦ãªã„ã—, ä½“æ„Ÿçš„ã«ã¯é…ããªã‚‹
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-highlight-folder-with-icon nil)
     #+end_src
**** dispose, delete ã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: org83490625
     :END:
     Gmailç”¨ã«%INBOXã§ã¯å‰Šé™¤ã‚’ =wl-trash-folder= ã¸ã®ç§»å‹•ã§ã¯ãªã, ã€Œdeleteã€ã«ï¼
     #+begin_src emacs-lisp   :tangle init-wl.el
(add-to-list 'wl-dispose-folder-alist
             '("^%INBOX" . remove))
     #+end_src
     è¿·æƒ‘ãƒ¡ãƒ¼ãƒ«é–¢é€£ã‚‚
     #+begin_src emacs-lisp   :tangle init-wl.el
(add-to-list 'wl-dispose-folder-alist
             '(".*Junk$" . remove))
     #+end_src
**** æŠ˜ã‚Šè¿”ã—ã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: orgd88be525
     :END:
     message ã¯æŠ˜ã‚Šè¿”ã™.
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-message-truncate-lines nil)
     #+end_src
     draft ã‚‚æŠ˜ã‚Šè¿”ã™
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-draft-truncate-lines nil)
     #+end_src
**** mode-line ã®è¨­å®š
     :PROPERTIES:
     :CUSTOM_ID: orgb31f5f2c
     :END:
     é•·ã„ã¨å«Œãªã®ã§ã‚¤ãƒ­ã‚¤ãƒ­å‰Šã‚‹
     #+begin_src emacs-lisp   :tangle init-wl.el
(setq wl-summary-mode-line-format "") ; "%f {%t}(%n/%u/%a)"
(setq wl-message-mode-line-format "") ; "<< %f:%F>> [%m]"
     #+end_src
*** ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰é–¢é€£
    :PROPERTIES:
    :CUSTOM_ID: org51dfe1e0
    :END:
    =C-c C-j= ã‚’ browse-url ã«æ˜ã‘æ¸¡ã™
    #+begin_src emacs-lisp :tangle init-wl.el
(define-key wl-draft-mode-map "\C-c\C-j" 'browse-url-at-point)
    #+end_src
    =M-u= ã§ unread ã«ã™ã‚‹
    #+begin_src emacs-lisp :tangle init-wl.el
(define-key wl-summary-mode-map "\M-u" 'wl-summary-mark-as-unread)
    #+end_src
    =i= ã§ sync <- Mew é¢¨
    #+begin_src emacs-lisp :tangle init-wl.el
(define-key wl-summary-mode-map "i" 'wl-summary-sync-update)
    #+end_src
    =C-o= ã¯ elscreen ã§ä½¿ã†
    #+begin_src emacs-lisp :tangle init-wl.el
(define-key wl-summary-mode-map "\C-o" nil )
    #+end_src
    =M-o= ã§ =auto-refile=  (Mew é¢¨)
    #+begin_src emacs-lisp :tangle init-wl.el
(define-key wl-summary-mode-map "\M-o" 'wl-summary-auto-refile)
    #+end_src
*** flag ã¨ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¡Œãæ¥ã™ã‚‹é–¢æ•°ã®è¿½åŠ 
    :PROPERTIES:
    :CUSTOM_ID: org460a927d
    :END:
    "=" ã§ãƒ•ãƒ©ã‚°ä»˜ããƒ•ã‚©ãƒ«ãƒ€ã¨
    å®Ÿéš›ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚ã‚‹ãƒ•ã‚©ãƒ«ãƒ€ã‚’è¡Œãæ¥ã™ã‚‹.
    Gmail ã®ã€Œã‚¹ã‚¿ãƒ¼ä»˜ãã€ãƒ•ã‚©ãƒ«ãƒ€ã§ã‚‚æœ‰åŠ¹
    #+begin_src emacs-lisp :tangle init-wl.el
(require 'elmo nil 'noerror)
(defun my:wl-summary-jump-to-referer-message ()
  (interactive)
  (when (wl-summary-message-number)
    (if (eq (elmo-folder-type-internal wl-summary-buffer-elmo-folder) 'flag)
        (progn
          (let* ((referer (elmo-flag-folder-referrer
                           wl-summary-buffer-elmo-folder
                           (wl-summary-message-number)))
                 (folder (if (> (length referer) 1)
                             (completing-read
                              (format "Jump to (%s): " (car (car referer)))
                              referer
                              nil t nil nil (car (car referer)))
                           (car (car referer)))))
            (wl-summary-goto-folder-subr folder 'no-sync nil nil t)
            (wl-summary-jump-to-msg (cdr (assoc folder referer)))))
      (when (eq (elmo-folder-type wl-summary-last-visited-folder) 'internal)
        (wl-summary-goto-last-visited-folder)))))
(define-key wl-summary-mode-map "=" 'my:wl-summary-jump-to-referer-message)
    #+end_src
*** summary-mode ã®è¡¨ç¤ºã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
    :PROPERTIES:
    :CUSTOM_ID: org433d7a5c
    :END:
**** è‡ªåˆ†ãŒå·®å‡ºäººã§ã‚ã‚‹ mail ã¯ To:æŸ ã¨è¡¨ç¤º
     :PROPERTIES:
     :CUSTOM_ID: org63a385a5
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-summary-showto-folder-regexp ".*")
(setq wl-summary-from-function 'wl-summary-default-from)
     #+end_src
**** ã‚µãƒãƒªè¡Œã®è¡¨ç¤ºé–¢é€£
     :PROPERTIES:
     :CUSTOM_ID: org94145d9c
     :END:
     ã‚µãƒãƒªè¡Œã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæŒ‡å®š
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-summary-line-format
      "%T%P%1@%1>%Y/%M/%D %21(%t%[%19(%c %f%)%]%) %#%~%s"
      wl-summary-width (- (window-width) 1))
     #+end_src
     ã‚µãƒãƒªè¡¨ç¤ºã¯åˆ‡ã‚Šè©°ã‚ãªã„
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-subject-length-limit t)
     #+end_src
     ã‚¹ãƒ¬ãƒƒãƒ‰ã®å¹…ã®æŒ‡å®š
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-thread-indent-level 2)
(setq wl-thread-have-younger-brother-str "+" ;; "â”œ"
      wl-thread-youngest-child-str "+" ;; "â””"
      wl-thread-vertical-str "|" ;; "â”‚"
      wl-thread-horizontal-str "-" ;; "â”€"
      wl-thread-space-str " ")
     #+end_src
     ä»¥ä¸‹ã®äºŒã¤ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯
     =elmo-msgdb-extra-fields= ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹.
     ã“ã®å¤‰æ•°ã¯æŒ¯ã‚Šåˆ†ã‘åˆ¤å®šã«ã‚‚ä½¿ç”¨ã™ã‚‹ã®ã§ãã“ã§è¨­å®šã—ã¦ã„ã‚‹
**** Gmail é¢¨ã«, è‡ªåˆ†å®›ã®ãƒ¡ãƒ¼ãƒ«ã« ">" ã‚’ã¤ã‘ã¦è¡¨ç¤ºã™ã‚‹
     :PROPERTIES:
     :CUSTOM_ID: orga083aeb5
     :END:
     å…ƒãƒã‚¿ [[http://d.hatena.ne.jp/khiker/20080206/wanderlust]]
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-user-mail-address-regexp "^uwabami.*\\|^sasakyh.*")
;; ä¸€è¦§è¡¨ç¤ºã§ã®ç½®ãæ›ãˆè¦å‰‡ã«è¿½åŠ 
(defun my:wl-summary-line-for-me ()
  (if (catch 'found
        (let ((to (elmo-message-entity-field wl-message-entity 'to))
              (cc (elmo-message-entity-field wl-message-entity 'cc)))
          (when (or (stringp to) cc)
            (setq to
                  (append (if (stringp to) (list to) to)
                          (when cc
                            (if (stringp cc) (list cc) cc)))))
          (dolist (i to)
            (when (wl-address-user-mail-address-p (eword-decode-string i))
              (throw 'found t)))))
      ">"
    ""))
;; > ã‚’ summary-line-format ã«è¿½åŠ 
(setq wl-summary-line-format-spec-alist
      (append wl-summary-line-format-spec-alist
              '((?> (my:wl-summary-line-for-me)))))
     #+end_src
**** æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã£ãŸã‚‰, ã‚µãƒãƒªè¡Œã« @ ã‚’ä»˜ã‘ã‚‹
     :PROPERTIES:
     :CUSTOM_ID: org04b0fd69
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-summary-line-format-spec-alist
      (append wl-summary-line-format-spec-alist
              '((?@ (wl-summary-line-attached)))))
     #+end_src
**** ã‚¯ã‚©ãƒ¼ãƒˆã•ã‚ŒãŸæ–‡å­—åˆ—ã‚‚ãƒ‡ã‚³ãƒ¼ãƒ‰ã™ã‚‹
     :PROPERTIES:
     :CUSTOM_ID: org9b1eb3e9
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq mime-header-lexical-analyzer
      '(
        ;; eword-analyze-quoted-string
        eword-analyze-domain-literal
        eword-analyze-comment
        eword-analyze-spaces
        eword-analyze-special
        eword-analyze-encoded-word
        eword-analyze-atom))
;; (mime-set-field-decoder
;;  'From nil 'eword-decode-and-unfold-unstructured-field-body)
;; (mime-set-field-decoder
;;  'To nil 'eword-decode-and-unfold-unstructured-field-body)
(with-eval-after-load 'eword-decode
  (mime-set-field-decoder
   'From nil 'eword-decode-and-unfold-unstructured-field-body)
  (mime-set-field-decoder
   'To nil 'eword-decode-and-unfold-unstructured-field-body))
     #+end_src
**** Subject ãŒå¤‰ã‚ã£ã¦ã‚‚ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’åˆ‡ã‚‰ãªã„
     :PROPERTIES:
     :CUSTOM_ID: org8e1a38e8
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-summary-divide-thread-when-subject-changed nil)
     #+end_src
**** Subject ã§ã® Tab ã‚„è¤‡æ•°ã‚¹ãƒšãƒ¼ã‚¹ã‚’ç„¡è¦–
     :PROPERTIES:
     :CUSTOM_ID: org4a68d8d4
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
;; (defadvice std11-unfold-string (after simply activate)
;;   (setq ad-return-value
;;         (replace-regexp-in-string ad-return-value "[ \t]+" " ")))
     #+end_src
**** é‡è¤‡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’éè¡¨ç¤ºã«
     :PROPERTIES:
     :CUSTOM_ID: org84fec166
     :END:
     ãƒ•ã‚©ãƒ«ãƒ€å†…ã® Message-ID ãŒåŒã˜ãƒ¡ãƒ¼ãƒ«ã‚’éè¡¨ç¤ºã«ã™ã‚‹
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-folder-process-duplicates-alist
      '(
        (".*" . hide)
        ))
     #+end_src
**** sort é †: è¿”ä¿¡ãŒæ¥ãŸé †
     :PROPERTIES:
     :CUSTOM_ID: orgc0e5bbcf
     :END:
     å…ƒãƒã‚¿ã¯ [[http://ikazuhiro.s206.xrea.com/article.php/20140920115345919][Re: wanderlust ã§ GMail é¢¨ã€æ–°ç€ãƒ¬ã‚¹é †ã«ã‚½ãƒ¼ãƒˆ]].
     ã‚ã‚“ã¾ã‚Šé ‘å¼µã‚‹æ°—ãŒãªã‹ã£ãŸã®ã§ =el-x= ã«ã‚ã‚‹ =dflet= ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚
     #+begin_src emacs-lisp  :tangle init-wl.el
(defun wl-summary-overview-entity-compare-by-reply-date (a b)
  "Compare message A and B by latest date of replies including thread."
  (dflet ((string-max2 (x y) (cond ((string< x y) y)
                                  ('t x)))
         (elmo-entity-to-number (x)
                                (elt (cddr x) 0))
         (thread-number-get-date (x)
                                 (timezone-make-date-sortable
                                  (elmo-msgdb-overview-entity-get-date
                                   (elmo-message-entity
                                    wl-summary-buffer-elmo-folder
                                    x))))
         (thread-get-family (x)
                            (cons x (wl-thread-entity-get-descendant
                                     (wl-thread-get-entity x))))
         (max-reply-date  (x)
                          (cond ((eq 'nil x)
                                 'nil)
                                ((eq 'nil (cdr x))
                                 (thread-number-get-date (car x)))
                                ('t
                                 (string-max2 (thread-number-get-date (car x))
                                              (max-reply-date (cdr x))))))
         )
    (string<
     (max-reply-date (thread-get-family (elmo-entity-to-number a)))
     (max-reply-date (thread-get-family (elmo-entity-to-number b))))))
(add-to-list 'wl-summary-sort-specs 'reply-date)
(setq wl-summary-default-sort-spec 'reply-date)
     #+end_src
*** æŒ¯ã‚Šåˆ†ã‘è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: orgbeaff272
    :END:
    =$= ä»¥å¤–ã‚’æŒ¯ã‚Šåˆ†ã‘å¯¾è±¡ã«
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-summary-auto-refile-skip-marks '("$"))
    #+end_src
**** æŒ¯ã‚Šåˆ†ã‘åˆ¤å®šã«ä½¿ç”¨ã™ã‚‹ãƒ˜ãƒƒãƒ€
     :PROPERTIES:
     :CUSTOM_ID: org1581be27
     :END:
     æ·»ä»˜ã®æœ‰ç„¡ã®è¡¨ç¤ºã«ã‚‚ä½¿ã†ã®ã§ =Content-Type= ã‚‚ç™»éŒ².
     ã‚ã¨ =Delivered-To= ã¯ãƒ¡ãƒ¼ãƒ«ã®æ¤œç´¢ã®æ™‚ã«çµæ§‹é‡å®ã—ã¦ã„ã‚‹.
     #+begin_src emacs-lisp :tangle init-wl.el
(setq elmo-msgdb-extra-fields
      '(
        "List-Post"
        "List-Id"
        "List-ID"                  ;; ãŸã¾ã« List-ID ã§æ¥ã‚‹ãƒ¡ãƒ¼ãƒ«ã‚ã‚‹ã‚ˆã­?
        "Resent-CC"
        "Mailing-List"
        "X-Mailing-List"
        "X-ML-Address"
        "X-ML-Name"
        "X-ML-To"
        "X-Loop"
        "Delivered-To"
        "Content-Type"              ;; æ·»ä»˜ã®æœ‰ç„¡ã®è¡¨ç¤ºã®ç‚ºã«è¿½åŠ 
        "X-Google-Appengine-App-Id" ;; GAEã®é€ä¿¡ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ã®æŒ¯ã‚Šåˆ†ã‘ç”¨
        "To"
        "Cc"
        "From"
        "Subject"
        "Reply-To"
        "Auto-Submitted"            ;; Git commit/Cron notify
        ))
     #+end_src
*** ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
    :PROPERTIES:
    :CUSTOM_ID: org1c00dc9a
    :END:
**** ã„ã£ãŸã‚“å…¨ã¦éè¡¨ç¤ºã«
     :PROPERTIES:
     :CUSTOM_ID: orgbdcad743
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-message-ignored-field-list '("^.*:"))
     #+end_src
**** è¦‹ãŸã„ãƒ˜ãƒƒãƒ€ã ã‘è¡¨ç¤º
     :PROPERTIES:
     :CUSTOM_ID: org279f859d
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-message-visible-field-list
      '("^Subject:"
        "^From:"
        "^To:"
        "^Cc:"
        "^Date:"
        "^Message-ID:"
        ))
     #+end_src
**** è¡¨ç¤ºé †ã®å¤‰æ›´
     :PROPERTIES:
     :CUSTOM_ID: org594e5622
     :END:
     Mew é¢¨...
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-message-sort-field-list
      '("^Subject:"
        "^From:"
        "^To:"
        "^Cc:"
        "^Date:"
        "^Message-ID:"
        ))
     #+end_src
**** From, To ã‚’çœç•¥è¡¨ç¤ºã—ãªã„
     :PROPERTIES:
     :CUSTOM_ID: org452d7cdb
     :END:
     To ã‚„ From ã«ã‚¢ãƒ‰ãƒ¬ã‚¹ãŒæ²¢å±±æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã¨çœç•¥ã•ã‚Œã‚‹ã®ã§, ã“ã‚Œã‚’ç„¡åŠ¹åŒ–
     #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-message-use-header-narrowing nil)
     #+end_src
*** Wanderlust: Face ã®è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org1bf4b420
    :END:
    ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚ˆã‚Šç´°ã‹ãæŒ‡å®šã™ã‚‹ãŸã‚ã«å¹¾ã¤ã‹ã® face å®šç¾©ã‚’è¿½åŠ .
    #+begin_src emacs-lisp :tangle init-wl.el
(setq wl-highlight-message-header-alist
      '(("Subject[ \t]*:"
         . wl-highlight-message-subject-header-contents)
        ("From[ \t]*:"
         . wl-highlight-message-from-header-contents)
        ("Date[ \t]*:"
         . wl-highlight-message-date-header-contents)
        ("\\(.*To\\|Cc\\|Newsgroups\\)[ \t]*:"
         . wl-highlight-message-important-header-contents)
        ("\\(User-Agent\\|X-Mailer\\|X-Newsreader\\)[ \t]*:"
         . wl-highlight-message-unimportant-header-contents)
        ))
    #+end_src
    face ã®è‰²ä»˜ã‘
    #+begin_src emacs-lisp :tangle init-wl.el
(defun my:wl-set-face (face spec)
  (make-face face)
  (cond ((fboundp 'face-spec-set)
         (face-spec-set face spec))
        (t
         (wl-declare-face face spec))))
(my:wl-set-face 'wl-highlight-folder-closed-face
                '((t (:foreground "#4cff4c" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-folder-few-face
                '((t (:foreground "#FF4C4C" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-folder-zero-face
                '((t (:foreground "#f6f3e8" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-1
                '((t (:foreground "#7fff7f" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-2
                '((t (:foreground "#ffff7f" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-3
                '((t (:foreground "#7f7fff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-4
                '((t (:foreground "#7fffff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-5
                '((t (:foreground "#ff7fff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-6
                '((t (:foreground "#ff7f7f" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-7
                '((t (:foreground "#4cff4c" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-8
                '((t (:foreground "#ffff4c" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-9
                '((t (:foreground "#4c4cff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-10
                '((t (:foreground "#4cffff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-11
                '((t (:foreground "#ff4cff" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-cited-text-12
                '((t (:foreground "#ff4c4c" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-date-header-contents
                '((t (:foreground "#4CFF4C" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-message-header-contents
                '((t (:foreground "#aaaaaa" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-headers
                '((t (:foreground "#4CFFFF" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-message-important-header-contents2
                '((t (:foreground "#4CFF4C" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-signature
                '((t (:foreground "#aaaaaa" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-message-important-header-contents
                '((t (:foreground "#FF4CFF" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-message-subject-header-contents
                '((t (:foreground "#FF4C4C" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-message-from-header-contents
                '((t (:foreground "#FFFF4C" :bold t :italic nil :weight bold ))))
(my:wl-set-face 'wl-highlight-message-unimportant-header-contents
                '((t (:foreground "#aaaaaa" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-summary-answered-face
                '((t (:foreground "#4CFF4C" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-summary-refiled-face
                '((t (:foreground "#7F7FFF" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-summary-thread-top-face
                '((t (:foreground "#F6F3E8" :bold nil :italic nil :weight normal ))))
(my:wl-set-face 'wl-highlight-summary-important-flag-face
                '((t (:foreground "#ffff4c" :bold nil :italic nil :weight normal ))))
;;
;; (my:wl-set-face 'wl-highlight-folder-killed-face
;;                 '((t (:foreground ,my:h:black :5Dbold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-folder-many-face
;;                 '((t (:foreground ,my:h:magenta :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-folder-opened-face
;;                 '((t (:foreground "#4cffff" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-folder-path-face
;;                 '((t (:underline t :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-folder-unknown-face
;;                 '((t (:foreground "#4cffff" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-folder-unread-face
;;                 '((t (:foreground ,my:n:blue :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-header-separator-face
;;                 '((t (:inherit highlight :bold t ))))
;; (my:wl-set-face 'wl-highlight-message-citation-header
;;                 '((t (:foreground ,my:h:green :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-copied-face
;;                 '((t (:foreground "#4CFFFF" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-deleted-face
;;                 '((t (:foreground ,my:h:black :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-displaying-face
;;                 '((t (:underline t :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-disposed-face
;;                 '((t (:foreground "#aaaaaa" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-flagged-face
;;                 '((t (:foreground ,my:h:yellow :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-forwarded-face
;;                 '((t (:foreground ,my:h:blue :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-high-read-face
;;                 '((t (:foreground ,my:h:green :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-high-unread-face
;;                 '((t (:foreground ,my:h:orange :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-important-face
;;                 '((t (:foreground "#ffff4c" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-killed-face
;;                 '((t (:foreground ,my:h:black :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-l:read-face
;;                 '((t (:foreground "#4CFF4C" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-l:unread-face
;;                 '((t (:foreground ,my:h:lightb :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-new-face
;;                 '((t (:foreground "#ff4c4c" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-normal-face
;;                 '((t (:foreground "#f6f3e8" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-prefetch-face
;;                 '((t (:foreground ,my:n:blue :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-resend-face
;;                 '((t (:foreground ,my:h:orange :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-target-face
;;                 '((t (:foreground "#4CFFFF" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-temp-face
;;                 '((t (:foreground ,my:n:violet :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-summary-unread-face
;;                 '((t (:foreground "#ff4c4c" :bold nil :italic nil ))))
;; (my:wl-set-face 'wl-highlight-thread-indent-face
;;                 '((t (:underline t :bold nil :italic nil ))))
    #+end_src
*** ä½œæˆ/è¿”ä¿¡è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org32b816f3
    :END:
    è‡ªåˆ†å®›ã®ãƒ¡ãƒ¼ãƒ«ã«è¿”ä¿¡ã™ã‚‹å ´åˆã¯ =To:=, =Cc:= ã‹ã‚‰è‡ªåˆ†ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’å‰Šé™¤
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-draft-always-delete-myself t)
    #+end_src
    "a" (without-argument)ã§ã¯ =Reply-To:= ã‚„ =From:= ãªã©ã§
    æŒ‡å®šã•ã‚ŒãŸå”¯ä¸€äººã¾ãŸã¯å”¯ä¸€ã¤ã®æŠ•ç¨¿å…ˆã«è¿”ä¿¡.
    ã¾ãŸ, =X-ML-Name:= ã¨ =Reply-To:= ãŒã¤ã„ã¦ã„ã‚‹ãªã‚‰ =Reply-To:= å®›ã«è¿”ä¿¡
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-draft-reply-without-argument-list
      '((("X-ML-Name" "Reply-To") . (("Reply-To") nil nil))
        ("X-ML-Name" . (("To" "Cc") nil nil))
        ("Followup-To" . (nil nil ("Followup-To")))
        ("Newsgroups" . (nil nil ("Newsgroups")))
        ("Reply-To" . (("Reply-To") nil nil))
        ("Mail-Reply-To" . (("Mail-Reply-To") nil nil))
        ("From" . (("From") nil nil))))
    #+end_src
    =C-u a= (with-argument)ã§ã‚ã‚Œã°é–¢ä¿‚ã™ã‚‹å…¨ã¦ã®äººãƒ»æŠ•ç¨¿å…ˆã«è¿”ä¿¡
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-draft-reply-with-argument-list
      '(("Followup-To" . (("From") nil ("Followup-To")))
        ("Newsgroups" . (("From") nil ("Newsgroups")))
        ("Mail-Followup-To" . (("Mail-Followup-To") nil ("Newsgroups")))
        ("From" . (("From") ("To" "Cc") ("Newsgroups")))))
    #+end_src
    ã‚µãƒãƒªè¡¨ç¤ºã«ã¯ petname ã‚’ä½¿ã†ãŒ, å¼•ç”¨ã«ã¯ä½¿ã‚ãªã„
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq wl-default-draft-cite-decorate-author nil)
    #+end_src
**** ãƒ¡ãƒ¼ãƒ«æœ¬æ–‡ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰
     :PROPERTIES:
     :CUSTOM_ID: orgccd69748
     :END:
     ä¸¸å›²ã¿æ•°å­—ãªã‚“ã‹ãŒå…¥ã£ã¦ã—ã¾ã†ã¨
     å‹æ‰‹ã«ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãŒå¤‰ã‚ã£ã¦ã—ã¾ã£ã¦é¬±é™¶ã—ã„. ã©ã†ã—ãŸãƒ¢ãƒ³ã ã‚ã†ã‹ã­.
     #+begin_src emacs-lisp :tangle no
(add-hook 'wl-draft-mode-hook
          (lambda ()
            (add-to-list 'mime-charset-type-list '(utf-8 8 nil))))
     #+end_src
**** draft mode ã§ orgtbl ã‚’æœ‰åŠ¹ã«
     :PROPERTIES:
     :CUSTOM_ID: org62a575b3
     :END:
     #+begin_src emacs-lisp  :tangle init-wl.el
(add-hook 'wl-draft-mode-hook 'turn-on-orgtbl)
     #+end_src
**** c-sig
     :PROPERTIES:
     :CUSTOM_ID: orgc1db3638
     :END:
     ç½²åã®é¸æŠã« c-sig ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹.
     è¨­å®šã¯ä»¥ä¸‹ã®é€šã‚Š. Mew é¢¨ã« =C-c <tab>= ã§ signature ã‚’æŒ¿å…¥ã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹
     #+begin_src emacs-lisp  :tangle init-wl.el
(leaf c-sig
  :config
  (eval-when-compile (require 'wl))
  (setq sig-insert-end t
        sig-save-to-sig-name-alist nil
        message-signature-file nil)
  (define-key wl-draft-mode-map "\C-c\t" 'insert-signature-eref)
  (add-hook 'wl-draft-mode-hook
            '(lambda ()
               (define-key (current-local-map) "\C-c\C-w"
                 'insert-signature-eref)))
  )
     #+end_src
*** GPG ç½²å
    :PROPERTIES:
    :CUSTOM_ID: orgda22b5d8
    :END:
    ä»¥å‰ã¯ mailcrypt ã‚’ä½¿ã£ã¦ã„ãŸã‘ã‚Œã©,
    epa ãŒã‚ã‚‹ã®ã§ä¸»ã«ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã®è¨­å®šã®ã¿.
    =draft-mode= ã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ã‚ã‚‰ã‹ã˜ã‚æŒ‡å®šã—ã¦ãŠã‹ãªã„ã¨,
    é€ä¿¡æ™‚ã«æ–‡å­—ã‚³ãƒ¼ãƒ‰ãŒå¤‰æ›ã•ã‚Œã‚‹ã®ã§ä¸æ­£ãªç½²åã¨ãªã£ã¦ã—ã¾ã†.

    ã‚‚ã£ã¨ã†ã¾ã„æ–¹æ³•/æ­£æ”»æ³•ãŒã‚ã‚Šãã†ãªæ°—ãŒã™ã‚‹ã‘ã‚Œã©,
    ä½¿ãˆã¦ã‚‹ã‹ã‚‰, ã¾ã‚è‰¯ã„ã‹ãª, ã¨ã‹.
    #+begin_src emacs-lisp :tangle init-wl.el
(setq mime-pgp-verify-when-preview nil)
(defun my:epa-wl-decrypt-message ()
  (interactive)
  (save-window-excursion
    (wl-summary-jump-to-current-message)
    (wl-message-decrypt-pgp-nonmime)))
(defun my:epa-wl-verify-message ()
  (interactive)
  (save-selected-window
    (wl-summary-jump-to-current-message)
    (wl-message-verify-pgp-nonmime)))
(leaf-keys ((:wl-summary-mode-map
             ("C-c : d" . my:epa-wl-decrypt-message)
             ("C-c : v" . my:epa-wl-verify-message))
            (:wl-draft-mode-map
             ("C-c : s" . epa-mail-sign)
             ("C-c : e" . epa-mail-encrypt)))
           )
    #+end_src
*** æ¤œç´¢
    :PROPERTIES:
    :CUSTOM_ID: org5d7309d7
    :END:
    notmuchã‚’ä½¿ã†.
    #+begin_src emacs-lisp  :tangle init-wl.el
(leaf elmo-search
  :config
  (elmo-search-register-engine 'notmuch-custom 'local-file
                               :prog "notmuch-query-custom"
                               :args '(elmo-search-split-pattern-list)
                               :charset 'utf-8)
  (setq elmo-search-default-engine 'notmuch-custom))
(leaf wl-qs
  :config
  (setq wl-quicksearch-folder "[]"
        )
  )
(leaf-keys ((:wl-summary-mode-map
             ("v" . wl-quicksearch-goto-search-folder-wrapper))
            (:wl-folder-mode-map
             ("v" . wl-quicksearch-goto-search-folder-wrapper)))
           )
    #+end_src
    å®Ÿéš›ã®å‘¼ã³å‡ºã—ã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’å…¨éƒ¨å–å¾—ã—ãŸã„ã®ã§ä»¥ä¸‹ã‚’å‘¼ã³å‡ºã—ã¦ã„ã‚‹
    #+begin_src sh :tangle no
#!/bin/sh
if [ ! x"$*" = x"" ] ; then
    res=$(notmuch search --output=threads "$*")
fi
if [ ! x"$res" = x"" ] ; then
    echo $res | xargs notmuch search --sort=oldest-first --output=files
fi
    #+end_src
    æ¤œç´¢æ™‚ã«ãƒ¡ãƒ¼ãƒ«ãŒå¤šã™ãã‚‹ã¨æ€’ã‚‰ã‚Œã‚‹ã®ã§. æ•°å­—ã¯é©å½“.
    #+begin_src emacs-lisp  :tangle init-wl.el
(setq elmo-multi-divide-number 2000000000)
(setq elmo-multi-number 2000000000)
    #+end_src
** Linux Desktop ã§ =mailto:= ãƒªãƒ³ã‚¯ã‚’æ‰±ã†ãŸã‚ã«
   :PROPERTIES:
   :CUSTOM_ID: orgcfa9b17b
   :END:
   ã¤ã„ã§ã« =mailto= ã®ãƒªãƒ³ã‚¯ã‚’ emacsclient ã§æ‰±ã†ãŸã‚ã«,
   ä»¥ä¸‹ã®é–¢æ•°ã‚’å®šç¾©ã—ã¦ãŠã
   #+begin_src emacs-lisp :tangle init.el
(defun my:mailto-compose-mail (mailto-url)
  "Custom: handling mailto: link"
  (if (and (stringp mailto-url)
           (string-match "\\`mailto:" mailto-url))
      (progn
        (eval-and-compile (require 'rfc2368))
        (let* ((headers (mapcar (lambda (h) (cons (intern (car h)) (cdr h)))
                                (rfc2368-parse-mailto-url mailto-url)))
               (good-headers (cl-remove-if (lambda (h) (member (car h) '(Body))) headers))
               (body (cdr (assoc 'Body headers))))
          (wl-draft good-headers nil nil body)))))
   #+end_src
   Desktop ã®è¨­å®šã§ã¯
   #+begin_src sh :tangle no
#!/bin/sh
# emacs-mailto-handler

mailto=$1
mailto="mailto:${mailto#mailto:}"
mailto=$(printf '%s\n' "$mailto" | sed -e 's/[\"]/\\&/g')
elisp_expr="(my:mailto-compose-mail \"$mailto\")"

emacsclient -a "" -n --eval "$elisp_expr" \
            '(set-window-dedicated-p (selected-window) t)'
   #+end_src
   ã‚’ãƒ¡ãƒ¼ãƒ©ã¨ã—ã¦æŒ‡å®šã™ã‚Œã°è‰¯ã„ï¼
   GNOME ã¯ =.desktop= ãƒ•ã‚¡ã‚¤ãƒ«ãŒç„¡ã„ã¨ã€ŒãŠæ°—ã«å…¥ã‚Šã€ç™»éŒ²ãŒã§ããªã„ã®ã§
   ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©å½“ãªåå‰ã§ =~/.local/share/applications/= ä»¥ä¸‹ã«æ”¾ã‚Šè¾¼ã‚“ã§ãŠãã¨è‰¯ã„ã ã‚ã†
   #+begin_src conf :tangle no
[Desktop Entry]
Name=Emacs Mail Handler
GenericName=Mail User Agent
X-GNOME-FullName=Emacs Mail Handler
Comment=Use emacsclient as MUA, handling mailto link
Keywords=email
Exec=/home/uwabami/bin/emacs-mailto-handler %U
Icon=emacs25
Terminal=false
Type=Application
Categories=GNOME;GTK;Office;Email;
StartupNotify=false
MimeType=application/mbox;message/rfc822;x-scheme-handler/mailto;
   #+end_src
** ãƒ¡ãƒ¼ãƒ«ã‹ã‚‰ã®äºˆå®šã®å–ã‚Šè¾¼ã¿: =mhc=
   :PROPERTIES:
   :CUSTOM_ID: org215a97b9
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf mhc
  :if (file-directory-p (concat (getenv "HOME") "/.config/mhc"))
  :ensure t
  :disabled t
  :commands (mhc-import)
  :init
  (setq mhc-calendar-day-strings ["æ—¥" "æœˆ" "ç«" "æ°´" "æœ¨" "é‡‘" "åœŸ"]
        mhc-calendar-header-function 'mhc-calendar-make-header-ja
        mhc-calendar-language 'japanese)
  )
   #+end_src
* é–‰ã˜ã‚¿ã‚°ã®å…¥åŠ›è£œåŠ©: =smartparens=
  :PROPERTIES:
  :CUSTOM_ID: orgc0b8a536
  :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf smartparens
  :disabled t
  :ensure t
  :blackout t
  :defun (sp-pair)
  :hook (after-init-hook . smartparens-global-mode)
  :config
  (require 'smartparens-config)
  (sp-pair "=" "=" :actions '(wrap))
  (sp-pair "+" "+" :actions '(wrap))
  (sp-pair "<" ">" :actions '(wrap))
  (sp-pair "$" "$" :actions '(wrap))
  )
  #+end_src
* ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«è‰²ä»˜ã‘: =rainbow-mode=
  :PROPERTIES:
  :CUSTOM_ID: org1f0e431b
  :END:
  =#RRGGBB= ã®ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã«å‹æ‰‹ã«è‰²ãŒä»˜ãï¼CSS ã®ç·¨é›†ä¸­ãªã‚“ã‹ã§åœ°å‘³ã«ä¾¿åˆ©ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf rainbow-mode
  :ensure t
  :blackout `((rainbow-mode . ,(format " %s" "\x1F308")))
  )
  #+end_src
* å¯¾å¿œã™ã‚‹æ‹¬å¼§ã‚’è¦‹æ˜“ã: =rainbow-delimiters=
  :PROPERTIES:
  :CUSTOM_ID: orgdddd3388
  :END:
  å¯¾å¿œã™ã‚‹æ‹¬å¼§ã‚’å¼·èª¿è¡¨ç¤ºã—ã¦ãã‚Œã‚‹
  [[https://www.emacswiki.org/emacs/RainbowDelimiters][RainbowDelimiters]]:
  global ã«æœ‰åŠ¹ã«ã™ã‚‹ã®ã¯ä»–ã®
  Major modeã¨ã®è¡çªãŒã‚ã‚‹ã®ã§æ­¢ã‚ãŸæ–¹ãŒè‰¯ã„, ã‚‰ã—ã„ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf rainbow-delimiters
  :ensure t
  :blackout t
  :hook (prog-mode-hook . rainbow-delimiters-mode)
  )
  #+end_src
* Org-mode
  :PROPERTIES:
  :CUSTOM_ID: org7b7eccc9
  :END:
  =org-mode= ãŒç„¡ã„ã¨ç”Ÿãã¦ã„ã‘ãªã„ä½“ã«ãªã‚Šã¾ã—ãŸ
** åŸºæœ¬è¨­å®š: =org=
   :PROPERTIES:
   :CUSTOM_ID: orgb143e870
   :END:
   ç›®æ–°ã—ã„è¨­å®šã¯ã—ã¦ã„ãªã„, ã¨æ€ã†ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf org
  :blackout `((org-mode . ,(all-the-icons-icon-for-mode 'org-mode)))
  :bind (("C-x n s" . org-narrow-to-subtree)
         ("C-x n w" . widen)
         ("C-c a"   . org-agenda)
         ("C-x m"   . org-capture)
         ("C-x M"   . my:org-journal-new-entry)
         )
  :advice
  (:before org-calendar-holiday
           (lambda () (require 'japanese-holidays)))
  :mode
  ;; æ˜”ã®ãƒ¡ãƒ¢(howm)ã‚‚ org-mode ã§é–‹ã
  (("\\.org\\'" "\\.howm\\'". org-mode))
  :preface
  ;;; timestamp æ›´æ–°æ–‡å­—åˆ—ã®å¤‰æ›´:
  ;;  org-mode ã§ã¯ ï¼ƒ+DATE: ã‚’ã²ã£ã‹ã‘ã‚‹ç”¨ã«(ï¼ƒã¯å°æ–‡å­—)ï¼
  (defun my:org-timestamp-hook ()
    "Change `time-stamp-start' in org-mode"
    (set (make-local-variable 'time-stamp-start) "#\\+date: ")
    (set (make-local-variable 'time-stamp-end)   "\$")
    )
  ;; GTD: TODOâ†’...â†’DONE ã¨ã—ãŸã‚¨ãƒ³ãƒˆãƒªã‚’ =Arhive.org= ã«ç§»å‹•
  (defun my:org-archive-done-tasks ()
    (interactive)
    (org-map-entries 'org-archive-subtree "/DONE" 'file))
  :hook
  `((org-mode-hook                  . my:org-timestamp-hook)
    (org-todo-statistics-hook       . my:org-archive-done-tasks)
    (org-todo-after-statistics-hook . my:org-archive-done-tasks))
  :custom
  `(;; Nextcloud ã«ä¿å­˜ã™ã‚‹
    (org-directory              . ,(expand-file-name my:d:org))
    ;; return ã§ãƒªãƒ³ã‚¯ã‚’è¾¿ã‚‹
    (org-return-follows-link    . t)
    ;; è¦‹å‡ºã—ã‚’ç•³ã‚“ã§è¡¨ç¤º
    (org-startup-folded         . t)
    ;; æŠ˜ã‚Šè¿”ã—ç„¡ã—
    (org-startup-truncated      . t)
    ;; link handler -> xdg-open ä»»ã›
    (org-file-apps-defaults     . '((remote . emacs)
                                    (system . "xdg-open %s")
                                    (t      . "xdg-open %s")))
    (org-file-apps-defaults-gnu . '((remote . emacs)
                                    (system . "xdg-open %s")
                                    (t      . "xdg-open %s")))
    (org-file-apps              . '((auto-mode . emacs)
                                    ("\\.mm\\'" . default)
                                    ("\\.x?html?\\'" . "xdg-open %s")
                                    ("\\.pdf\\'" . "xdg-open %s")))
    ;; GTD: çŠ¶æ…‹ã®è¿½åŠ 
    (org-todo-keywords          . '((sequence "TODO(t)" "WAIT(w)" "|" "DONE(d)" "CANCEL(c)" "SOMEDAY(s)")
                                    (type "ARTICLE(a)")
                                    (type "MEMO(m)")))
    ;; GTD: ã‚¿ã‚°ã®è¿½åŠ 
    (org-tag-alist              . '(("OFFICE"     . ?o)
                                    ("HOME"       . ?h)
                                    ("MAIL"       . ?m)
                                    ("WORK"       . ?w)
                                    ("Debian"     . ?d)
                                    ("Computer"   . ?c)
                                    ("Book"       . ?b)
                                    ("Emacs"      . ?e)
                                    ("TeX"        . ?t)
                                    ("Ruby"       . ?r)
                                    ("IGNORE"     . ?i)
                                    ("PLANNED"    . ?p)
                                    ))
    ;; DONE â†’ Archive.org ã«ç§»å‹•
    (org-archive-location       . "Archive.org::")
    ;; modules â†’ ã¨ã‚Šã‚ãˆãšã‚¯ãƒªã‚¢ã—ã¦ãŠã
    (org-modules  . '())
    )
  :config
  ;; ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå±•é–‹
  (leaf org-tempo
    :if (>= (string-to-number org-version) 9.2)
    :require t)
  ;; +æ‰“ã¡æ¶ˆã—+ ã® font-lock ã®å¤‰æ›´ â†’ã“ã‚Œã¯ãƒ†ãƒ¼ãƒã«ä»»ã›ã‚‹ã¹ã?
  (setq org-emphasis-alist
        (cons '("+" '(:strike-through t :foreground "#999999"))
              (cl-delete "+" org-emphasis-alist :key 'car :test 'equal)))
  ;; (with-eval-after-load "org"
  ;;   (setq org-file-apps '((auto-mode . emacs)
  ;;                         ("\\.mm\\'" . default)
  ;;                         ("\\.x?html?\\'" . default)
  ;;                         ("\\.pdf\\'" . "xdg-open %s")))
  ;;   )
  )
   #+end_src
** Org-Id
   :PROPERTIES:
   :CUSTOM_ID: org67465ee0
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf org-id
  :commands
  (my:add-custom-id
   my:get-custom-id
   my:org-custom-id-get
   my:delete-all-id-in-file
   my:org-id-add-to-headlines-in-file)
  :init
  (leaf org-macs :require t)
  :custom
  `((org-id-locations-file
     . ,(expand-file-name "org-id-locations" my:d:share))
    ;; (org-id-link-to-org-use-id . create-if-interactive-and-no-custom-id)
    )
  :config
  (defun my:add-custom-id ()
    "Add \"CUSTOM_ID\" to the current tree if not assigned yet."
    (interactive)
    (my:org-custom-id-get nil t))
  ;;
  (defun my:get-custom-id ()
    "Return a part of UUID with an \"org\" prefix.
e.g. \"org3ca6ef0c\"."
    (let* ((id (org-id-new "")))
      (when (org-uuidgen-p id)
        (downcase (concat "org"  (substring (org-id-new "") 0 8))))))
  ;;
  (defun my:org-custom-id-get (&optional pom create)
    "Get the CUSTOM_ID property of the entry at point-or-marker POM.
See https://writequit.org/articles/emacs-org-mode-generate-ids.html"
    (interactive)
    (org-with-point-at pom
      (let ((id (org-entry-get nil "CUSTOM_ID")))
        (cond
         ((and id (stringp id) (string-match "\\S-" id))
          id)
         (create
          (setq id (my:get-custom-id))
          (unless id
            (error "Invalid ID"))
          (org-entry-put pom "CUSTOM_ID" id)
          (message "--- CUSTOM_ID assigned: %s" id)
          (org-id-add-location id (buffer-file-name (buffer-base-buffer)))
          id)))))
  ;;
  (defun my:delete-all-id-in-file ()
    (interactive)
    (goto-char 1)
    (while (not (eq (point) (point-max)))
      (org-next-visible-heading 1)
      (let ((id (org-entry-get (point) "ID")))
        (when id
          (message "ID: %s" id)
          (org-delete-property "ID"))))
    (message "--- done."))
  ;;
  (defun my:org-id-add-to-headlines-in-file ()
    "Add CUSTOM_ID properties to all headlines in the current file.
See https://writequit.org/articles/emacs-org-mode-generate-ids.html"
    (interactive)
    (save-excursion
      (widen)
      (goto-char (point-min))
      (when (re-search-forward "^#\\+options:.*auto-id:t" (point-max) t)
        (org-map-entries
         (lambda () (my:org-custom-id-get (point) 'create))))))
  ;;
  :hook (before-save-hook
         . (lambda ()
             (when (and (eq major-mode 'org-mode)
                        (eq buffer-read-only nil))
               (my:org-id-add-to-headlines-in-file))))
  )
   #+end_src
** Babel
   :PROPERTIES:
   :CUSTOM_ID: org99399f3b
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf org-babel
  :after all-the-icons-in-terminal
  :blackout
  `((org-src-mode . ,(format " %s" (all-the-icons-octicon "code"))))
  :custom
  (;; font-lock
   (org-src-fontify-natively         . t)
   ;; TAB ã®æŒ™å‹•
   (org-src-tab-acts-natively        . t)
   ;; ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆ
   (org-edit-src-content-indentation . 0)
   ;; ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’æ®‹ã™
   (org-src-preserve-indentation     . t))
  )
   #+end_src
** Agenda: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«, TODO è¡¨ç¤º
   :PROPERTIES:
   :CUSTOM_ID: org016dbf67
   :END:
   GTD ç”¨ã®è¨­å®šï¼å¾Œè¿°ã® =org-gcal= ã¨ =orgmine= ã§å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚‚è¡¨ç¤ºã—ã¦ã„ã‚‹ï¼
   ã¤ã„ã§ã«
   - åœŸæ›œæ—¥ã‚’ã® face ã‚’è¿½åŠ .
   - ç¥æ—¥, ä¼‘æ—¥ã‚’æ—¥æ›œã¨åŒã˜faceã«ã™ã‚‹.
   ãªã‚“ã¦äº‹ã‚‚ã‚„ã£ã¦ã„ã‚‹ï¼å…ƒãƒã‚¿ã¯ [[https://julien.danjou.info/blog/2010/org-mode-and-holidays][Org-mode and holidays]]
   #+begin_src emacs-lisp :tangle init.el
(leaf org-agenda
  :commands org-agenda
  :defer-config
  (defface my:org-agenda-date-saturday
    '((t (:foreground "#7FBFFF" :bold t )))
    "Agenda è¡¨ç¤ºä¸­ã®åœŸæ›œæ—¥ç”¨ã®face")
  (defface my:org-agenda-date-today-saturday
    '((t (:inherit my:org-agenda-date-saturday :underline t)))
    "Agenda è¡¨ç¤ºä¸­ã®ä»Šæ—¥ã‹ã¤åœŸæ›œæ—¥ç”¨ã®face")
  (defface my:org-agenda-date-today-weekend
    '((t (:inherit org-agenda-date-weekend :underline t)))
    "Agenda è¡¨ç¤ºä¸­ã®ä»Šæ—¥ã‹ã¤æ—¥ãƒ»ç¥æ—¥ç”¨ã®face")
  ;; ã“ã£ã‹ã‚‰ã¯ org-gcal ã§åŒæœŸã—ãŸã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®è‰²
  (defface my:org-agenda-calendar-Univ
    '((t (:foreground "#7FFF7F")))
    "Agenda è¡¨ç¤ºä¸­, Univ.org ã®è¡¨ç¤º face"
    :group 'org-agenda )
  (defface my:org-agenda-calendar-Schedule
    '((t (:foreground "#7FFFFF")))
    "Agenda è¡¨ç¤ºä¸­, Schedule.org ã®è¡¨ç¤º face"
    :group 'org-agenda )
  (defface my:org-agenda-calendar-GFD
    '((t (:foreground "#FFFF7F")))
    "Agenda è¡¨ç¤ºä¸­, GFD.org ã®è¡¨ç¤º face"
    :group 'org-agenda )
  (defface my:org-agenda-calendar-DebianJP
    '((t (:foreground "#BF7FFF")))
    "Agenda è¡¨ç¤ºä¸­, DebianJP.org ã®è¡¨ç¤º face"
    :group 'org-agenda )
  (defface my:org-agenda-calendar-twitter
    '((t (:foreground "#CCCCCC")))
    "Agenda è¡¨ç¤ºä¸­, Twitter log ã®è¡¨ç¤º face"
    :group 'org-agenda )
  ;; æ›´æ–°ç”¨ã®é–¢æ•° - ã¨ã‚Šã‚ãˆãšå‹•ã„ã¦ã„ã‚‹ã®ã§è‰¯ã—ã¨ã™ã‚‹ãŒ,
  ;; ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°ã—ãŸã„
  (defun my:org-agenda-day-face-function (date)
    "Compute DATE face for saturday, holidays."
    (cl-dolist (file (org-agenda-files nil 'ifmode))
      (cond
       ((member (calendar-day-of-week date) '(0))
        (if (org-agenda-todayp date)
            (cl-return 'my:org-agenda-date-today-weekend))
        (cl-return 'org-agenda-date-weekend))
       ((member (calendar-day-of-week date) '(6))
        (if (org-agenda-todayp date)
            (cl-return 'my:org-agenda-date-today-saturday))
        (cl-return 'my:org-agenda-date-saturday)))
      (let ((face
             (cl-dolist (entry (org-agenda-get-day-entries file date))
               (let ((category (with-temp-buffer
                                 (insert entry)
                                 (org-get-category (point-min)))))
                 (when (or (string= "ç¥æ—¥" category)
                           (string= "ä¼‘æ—¥" category))
                   (if (org-agenda-todayp date)
                       (cl-return 'my:org-agenda-date-today-weekend)
                     (cl-return 'org-agenda-date-weekend)))))))
        (when face (cl-return face)))))
  (setq org-agenda-day-face-function
        'my:org-agenda-day-face-function)
  ;; font-lock ã®é©ç”¨
  (defun my:org-agenda-finalize-font-lock ()
    "Custom: apply custom font-lock"
    (save-excursion
      (goto-char (point-min))
      (while (re-search-forward "Univ:" nil t)
        (add-text-properties
         (match-beginning 0) (point-at-eol)
         '(face my:org-agenda-calendar-Univ)))
      (goto-char (point-min))
      (while (re-search-forward "Schedule:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face my:org-agenda-calendar-Schedule)))
      (goto-char (point-min))
      (while (re-search-forward "MHC:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face my:org-agenda-calendar-Schedule)))
      (goto-char (point-min))
      (while (re-search-forward "DebianJP:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face my:org-agenda-calendar-DebianJP)))
      (goto-char (point-min))
      (while (re-search-forward "GFD:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face my:org-agenda-calendar-GFD)))
      (goto-char (point-min))
      (while (re-search-forward "twitter:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face my:org-agenda-calendar-twitter)))
      (goto-char (point-min))
      (while (re-search-forward "èª•ç”Ÿæ—¥:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face org-agenda-date-weekend)))
      (goto-char (point-min))
      (while (re-search-forward "ç¥æ—¥:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face org-agenda-date-weekend)))
      (goto-char (point-min))
      (while (re-search-forward "ä¼‘æ—¥:" nil t)
        (add-text-properties (match-beginning 0) (point-at-eol)
                             '(face org-agenda-date-weekend)))))
  ;;
  (add-hook 'org-agenda-finalize-hook
            #'my:org-agenda-finalize-font-lock)
  ;;
  (setq org-agenda-span 'day
        org-agenda-format-date "%Y/%m/%d (%a)"
        org-agenda-start-on-weekday 0
        org-agenda-weekend-days '(0)
        org-agenda-repeating-timestampo-show-all t
        org-agenda-day-face-function 'my:org-agenda-day-face-function
        org-agenda-custom-commands
        '(
          ("n" "agenda and all TODO list"
           (
            (agenda ""
                    ((org-agenda-ndays 1)
                     (org-agenda-entry-types '(:timestamp :sexp))))
            (todo "TODO"
                  ((org-agenda-prefix-format " %i %-22:c")))
            (todo "æ–°è¦|ç€æ‰‹|é€²è¡Œä¸­|ç¢ºèª"
                  ((org-agenda-prefix-format " %i %-22:c")))
            (todo "WAIT"
                  ((org-agenda-prefix-format " %i %-22:c")))

            (todo "SOMEDAY"
                  ((org-agenda-prefix-format " %i %-22:c")))
            ))
          ("N" "All memo entry"
           (;;
            (todo "MEMO")
            ))
          )
        )
  ;; ä½¿ç”¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«
  (dolist (file
           '("Archive.org"
             "Holidays.org"
             "Memo.org"
             "Schedule.org"
             "MHC.org"
             "GFD.org"
             "Univ.org"
             "DebianJP.org"
             "twitter.org"
             "redmine_GFD.org"
             "redmine_FluidSoc.org"
             ))
    (add-to-list 'org-agenda-files (expand-file-name file my:d:org)))
  (add-to-list 'org-agenda-files (locate-user-emacs-file "README.org"))
  (if (file-directory-p
       (expand-file-name "Public/" (getenv "HOME")))
      (dolist (file
               (directory-files-recursively
                (expand-file-name "Public/" (getenv "HOME")) "org$"))
        (add-to-list 'org-agenda-files file)))
  (if (file-directory-p
       (expand-file-name "journal/" my:d:org))
      (dolist (file
               (directory-files-recursively
                (expand-file-name "journal/" my:d:org) "org$"))
        (add-to-list 'org-agenda-files file)))
  )
   #+end_src
** Org-journal: æ—¥è¨˜
   :PROPERTIES:
   :CUSTOM_ID: org456c87fa
   :END:
   æ©Ÿèƒ½ãŒè±Šå¯Œãªã®ã ãŒ, ã‚¤ãƒã‚¤ãƒä½¿ã„ã“ãªã›ã¦ã„ãªã„.
   #+begin_src emacs-lisp :tangle init.el
(leaf org-journal
  :if (and (file-directory-p my:d:org)
           (>= emacs-major-version 25))
  :commands my:org-journal-new-entry
  :bind ((:org-journal-mode-map
          ("C-c C-c" . my:org-journal-entry-save-and-exit)))
  :ensure t
  :init
  (defun my:org-journal-new-entry (prefix &optional time)
    "Add new journal entry on new elscreen"
    (interactive "P")
    (elscreen-create)
    (org-journal-new-entry nil time))
  ;;
  (defun my:org-journal-entry-save-and-exit ()
    "Save journal entry and close elscreen buffer"
    (interactive)
    (save-buffer)
    (elscreen-kill))
  :hook
  ((org-journal-mode-hook
    . (lambda()
        (setq-local truncate-lines t))))
  :custom
  `((org-journal-file-type                 . 'yearly)
    (org-journal-dir                       . ,(expand-file-name "journal" my:d:org))
    (org-journal-file-format               . "%Y.org")
    (org-journal-cache-file
     . ,(expand-file-name "org-journal.cache" my:d:tmp))
    (org-journal-date-format               . "%x (%a)")
    (org-journal-time-format               . "<%Y-%m-%d %R> ")
    (org-journal-time-prefix               . "** MEMO ")
    (org-journal-enable-agenda-integration . t)
    (org-journal-find-file                 . 'find-file)
    (org-journal-carryover-delete-empty-journal . 'ask)
    (org-journal-start-on-weekday          . 0) ;; sunday
    )
  :config
  (eval-and-compile 'browse-url)
  (with-eval-after-load 'org-journal
    (global-set-key (kbd "C-c C-j") 'browse-url-at-point))
  )
   #+end_src
** Org-capture: ãƒ¡ãƒ¢å–ã‚Š
   :PROPERTIES:
   :CUSTOM_ID: orgbe835a6b
   :END:
   ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã¯ä»¥å‰ changelog memo ã‚’ã‚„ã£ã¦ã„ãŸæ™‚ã®ç™–ã§ =C-x m= ã‚’ãƒ¡ãƒ¢ã«ã—ã¦ã„ã‚‹.
   #+begin_src emacs-lisp :tangle init.el
(leaf org-capture
  :if (file-directory-p my:d:org)
  :commands org-capture
  :pl-setq
  (my:org:calendar1 my:org:calendar2)   ;; åå‰ãŒã‚¤ã‚±ã¦ãªã„ã£!
  :config
  (defun my:org-journal-add-date-entry-capture ()
    (org-journal-new-entry t)
    (goto-char (point-max))
    )
  (setq org-default-notes-file (expand-file-name "Memo.org" my:d:org))
  (setq org-capture-templates
        `(
          ("t" "TODO" plain
           (function my:org-journal-add-date-entry-capture)
           "** TODO %(format-time-string org-journal-time-format)%^{title} %^g\n  %?\n  %a"
           :prepend nil
           :unnarrowed nil
           :kill-buffer t
           )
          ("m" "ãƒ¡ãƒ¢ã‚’è¿½åŠ " plain
           (function my:org-journal-add-date-entry-capture)
           "** MEMO %(format-time-string org-journal-time-format)%?"
           :prepend nil
           :unnarrowed nil
           :kill-buffer t
           )
          ("a" "å°‘ã—é•·ã‚ã®è¨˜äº‹ã‚’è¿½åŠ ã™ã‚‹" plain
           (function my:org-journal-add-date-entry-capture)
           "** ARTICLE %(format-time-string org-journal-time-format)%? "
           :prepend nil
           :unnarrowed nil
           :kill-buffer t
           )
          ("s" "å€‹äººäºˆå®šè¡¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ " plain
           (file ,(expand-file-name "Schedule.org" my:d:org))
           "* %^{prompt}\n  :PROPERTIES:\n  :calendar-id: %(format \"%s\" my:org:calendar1)\n  :END:\n  :org-gcal:\n%?\n%i\n  :END:"
           :prepend nil
           :unnarrowed nil
           :kill-buffer t
           )
          ("u" "ä»•äº‹äºˆå®šè¡¨ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’è¿½åŠ " plain
           (file ,(expand-file-name "Univ.org" my:d:org))
           "* %^{prompt}\n  :PROPERTIES:\n  :calendar-id: %(format \"%s\" my:org:calendar2)\n  :END:\n  :org-gcal:\n%?\n%i\n  :END:"
           :prepend nil
           :unnarrowed nil
           :kill-buffer t
           )
          )
        )
  )
   #+end_src
** Orgã¨Google ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®é€£æº: =org-gcal=
   :PROPERTIES:
   :CUSTOM_ID: org6a1d2f0c
   :END:
   request token ç­‰ã®ç½®ãå ´æ‰€ã®å¤‰æ›´
   å®Ÿéš›ã®æƒ…å ±ç­‰ã¯ =password-store= ã‚’ä½¿ã£ã¦è¨­å®šã—ã¦ãŠã.
   ã¤ã„ã§ã« agenda è¡¨ç¤ºã®éš›ã®è‰²ä»˜ã‘ã‚’è¨­å®šï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf org-gcal
  :if (and my:d:password-store
           (file-directory-p my:d:org))
  :ensure t
  :commands (org-gcal-fetch org-gcal-sync)
  :preface
  (setq org-gcal-dir (expand-file-name "org-gcal" my:d:tmp))
  (unless (file-directory-p org-gcal-dir)
    (make-directory org-gcal-dir))
  :init
  (leaf request
    :ensure t
    :preface
    (setq request-storage-directory (expand-file-name "request" my:d:tmp))
    (unless (file-directory-p request-storage-directory)
      (make-directory request-storage-directory))
    :config
    (setq request-storage-directory (expand-file-name "request" my:d:tmp))
    )
  (leaf persist
    :config
    (setq persist--directory-location (expand-file-name "persist" my:d:tmp)))
  :custom
  `((org-gcal-dir          . ,(expand-file-name
                               "org-gcal" my:d:tmp))
    (org-gcal-token-file   . ,(expand-file-name
                               "org-gcal/.org-gcal-token" my:d:tmp))
    (org-gcal-down-days    . 180)  ;; æœªæ¥ 180 æ—¥
    (org-gcal-up-days      .  30)  ;; éå» 30 æ—¥
    (org-gcal-auto-archive . nil)
    (org-gcal-notify-p     . nil)
    (org-gcal-remove-api-cancelled-evetnts . t)
    (org-gcal-remove-events-with-cancelled-todo . t)
    ;;
    (alert-log-messages    . t)
    (alert-default-style   .'libnotify))
  :pl-setq
  (org-gcal-client-id
   org-gcal-client-secret
   org-gcal-file-alist)
  :hook (org-capture-after-finalize-hook  . org-gcal-fetch)
  )
   #+end_src
** Orgã¨Redmine ã®é€£æº: =orgmine=
   :PROPERTIES:
   :CUSTOM_ID: org5908f7b5
   :END:
   ç´ æ™´ã—ã„!!
   [[https://github.com/kametoku/orgmine][kametoku/orgmine: Emacs minor mode for org-mode with redmine integration]]
   #+begin_src emacs-lisp :tangle init.el
(leaf *orgmine
  :if  (and my:d:password-store
            (file-directory-p my:d:org))
  :init
  (setq enable-local-variables :safe)
  (leaf elmine :ensure t)
  (add-hook 'org-mode-hook
            (lambda ()
              (if (assoc "om_server" org-file-properties) (orgmine-mode))))
  (leaf orgmine
    :commands (orgmine-mode)
    :el-get kametoku/orgmine
    :pl-setq orgmine-servers
    :config
    (setq orgmine-note-block-begin "#+begin_src gfm"   ;; è¦èª¿æ•´
          orgmine-note-block-end   "#+end_src\n"
          orgmine-default-todo-keyword "æ–°è¦")
    )
  )
   #+end_src
** Orgã¨Trelloã®é€£æº: =org-trello=
   :PROPERTIES:
   :CUSTOM_ID: org0ea55d7d
   :END:
   ToDoç®¡ç†ã« Trello ã‚’ä½¿ã„å§‹ã‚ãŸã®ã§, è¨­å®š
   #+BEGIN_SRC emacs-lisp
;; (leaf org-trello
;;   :if (and my:d:password-store
;;            (file-directory-p my:d:org))
;;   :ensure t
;;   :custom
;;   `((org-trello-files . '(,(expand-file-name "Trello.org" my:d:org))))
;;   )
   #+END_SRC
** Org-Wiki
   :PROPERTIES:
   :CUSTOM_ID: org5f8d1640
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf org-wiki
  :if (file-directory-p "~/Public/cc-env")
  :el-get (org-wiki
           :type github
           :pkgname "uwabami/org-wiki")
  :custom
  `((org-wiki-location     . "~/Public/cc-env")
    (org-wiki-publish-root . "{{site.url}}/cc-env/")
    (org-wiki-template
     . ,(concat "#+TITLE: %n\n"
                "#+date: 20\n"
                "#+LAYOUT: default\n"
                "#+PREMALINK: /cc-env/%n.html\n"
                "#+options: auto-id:nil\n"
                "#+REF: cc-env/%n\n"
                "Related [[wiki:index][Index]] [[~/Public/cc-env/index.org::#orge0707863][Debian]]\n"
                "* %n\n"
                )))
  )
   #+end_src
** Org-Export
   :PROPERTIES:
   :CUSTOM_ID: org54ab7934
   :END:
*** å…¨èˆ¬è¨­å®š
    :PROPERTIES:
    :CUSTOM_ID: org06031219
    :END:
    latex, beamer,jekyll(å¾Œè¿°) ã®ã¿ã‚’æœ‰åŠ¹ã«.
    #+begin_src emacs-lisp :tangle init.el
(leaf ox
  :preface
  ;; ç©ºè¡Œã®å‰Šé™¤
  (defun my:remove-org-newlines-at-cjk-text (&optional _mode)
    "å…ˆé ­ãŒ '*', '#', '|' ã§ãªãã€æ”¹è¡Œã®å‰å¾ŒãŒæ—¥æœ¬ã®æ–‡å­—ã®å ´åˆã¯æ”¹è¡Œã‚’é™¤å»"
    (interactive)
    (goto-char (point-min))
    (while (re-search-forward "^\\([^|#*\n].+\\)\\(.\\)\n *\\(.\\)" nil t)
      (if (and (> (string-to-char (match-string 2)) #x2000)
               (> (string-to-char (match-string 3)) #x2000))
          (replace-match "\\1\\2\\3"))
      (goto-char (point-at-bol))))
  :hook
  ;; ((org-export-before-processing-hook . my:remove-org-newlines-at-cjk-text))
  :custom
  ((org-export-backends             . '(;; remove somve built-in
                                        ;; html
                                        jekyll
                                        latex
                                        beamer))
   (org-export-with-toc             . nil)
   (org-export-with-section-numbers . nil))
  )
    #+end_src
*** HTML
    :PROPERTIES:
    :CUSTOM_ID: org10cd0de1
    :END:
    #+begin_src emacs-lisp :tangle init.el
(leaf ox-html
  :custom
  ((org-html-table-align-individual-fields . nil)
   (org-html-table-default-attributes      . nil)
   (org-html-html5-fancy                   . t)
   (org-html-doctype                       . "html5")
   ;; (org-html-container-element             . "div")
   (org-html-inline-image-rules
    . '(("file"  . "\\.\\(jpeg\\|jpg\\|png\\|gif\\|webp\\|svg\\)\\'")
        ("http"  . "\\.\\(jpeg\\|jpg\\|png\\|gif\\|webp\\|svg\\)\\'")
        ("https" . "\\.\\(jpeg\\|jpg\\|png\\|gif\\|webp\\|svg\\)\\'")))
   )
)
    #+end_src
*** LaTeX, Beamer
    :PROPERTIES:
    :CUSTOM_ID: org4d9c6533
    :END:
    #+begin_src emacs-lisp :tangle init.el
(leaf ox-latex
  :after ox
  :preface
  :init
  (leaf ox-beamer
    :custom
    `((org-beamer-frame-level . 2)
      (org-beamer-frame-default-options . "fragile,squeeze,c")
      )
    :config
    ;; for Beamer
    (add-to-list 'org-export-options-alist
                 '(:shortdate    "SHORTDATE"   nil nil))
    (add-to-list 'org-export-options-alist
                 '(:shorttitle   "SHORTTITLE"  nil nil))
    (add-to-list 'org-export-options-alist
                 '(:shortauthor  "SHORTAUTHOR" nil nil))
    (add-to-list 'org-export-options-alist
                 '(:institute    "INSTITUTE"   nil nil))
    )
  :custom
  `((org-latex-default-class . "my:platex")
    (org-latex-pdf-process   . '("latexmk -pvc %f"))
    (org-latex-classes
     . '(("my:platex"
          "\\documentclass[a4j]{jsarticle}
            [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]"
          ("\\section\{%s\}" . "\\section*\{%s\}")
          ("\\subsection\{%s\}" . "\\subsection*\{%s\}")
          ("\\subsubsection\{%s\}" . "\\subsubsection*\{%s\}"))
         ("my:beamer"
          "\\documentclass[dvipdfmx,presentation]{beamer}
             [NO-DEFAULT-PACKAGES] [NO-PACKAGES] [EXTRA]"
          ("\\section\{%s\}" . "\\section*\{%s\}")
          ("\\subsection\{%s\}" . "\\subsection*\{%s\}")
          ("\\subsubsection\{%s\}" . "\\subsubsection*\{%s\}"))))
    )
  )
    #+end_src
*** Jekyll
    :PROPERTIES:
    :CUSTOM_ID: org589a50cc
    :END:
    Web ã‚µã‚¤ãƒˆã¯ Jekyll ã§ä½œæˆã—ã¦ã„ã¾ã™.
    ä»¥å‰ã¯ org file ã‚’ç›´æ¥ jekyll ã§å‡¦ç†ã—ã¦ã„ã¾ã—ãŸãŒ,
    æœ€è¿‘ã¯ org ã‚’ html ã« export ã—ã¦, ãã‚Œã‚’å‡¦ç†ã™ã‚‹æ§˜ã«ã—ã¦ã„ã¾ã™.

    exporter ã¯ [[https://uwabami.github.com/ox-jekyll][uwabami/ox-jekyll]] ã«ã‚ã‚Šã¾ã™.
    #+begin_src emacs-lisp :tangle init.el
(leaf ox-jekyll
  :if (file-directory-p "~/Public/cc-env")
  :el-get (ox-jekyll
           :type github
           :pkgname "uwabami/ox-jekyll")
  :after ox-html
  :config
  (defun my:org-wiki-jekyll-finalized1 (contents backend info)
    "Replace some URL"
    (when (org-export-derived-backend-p backend 'jekyll)
      (s-replace
       (format "<a href=\"file://%sREADME.html"
               (expand-file-name user-emacs-directory))
       "<a href=\"{{baseurl}}/cc-env/Emacs.html"
       contents)))
  (add-to-list 'org-export-filter-body-functions
               'my:org-wiki-jekyll-finalized1)
  (defun my:org-wiki-jekyll-finalized2 (contents backend info)
    "Replace some URL"
    (when (org-export-derived-backend-p backend 'jekyll)
      (s-replace
       (format "<a href=\"file://%s"
               (expand-file-name "Public/" (getenv "HOME")))
       "<a href=\"{{site.url}}/"
       contents)))
  (add-to-list 'org-export-filter-body-functions
               'my:org-wiki-jekyll-finalized2)
  (defun my:org-wiki-jekyll-finalized3 (contents backend info)
    "Replace some URL"
    (when (org-export-derived-backend-p backend 'jekyll)
    (replace-regexp-in-string
     " id=\"outline-container-org.+\" class=\"outline-.+\""
     "" contents)))
  (add-to-list 'org-export-filter-body-functions
               'my:org-wiki-jekyll-finalized3)
  (defun my:org-wiki-jekyll-finalized4 (contents backend info)
    "Replace some URL"
    (when (org-export-derived-backend-p backend 'jekyll)
    (replace-regexp-in-string
     "<a id=\"org.+?\"></a>"
     "" contents)))
  (add-to-list 'org-export-filter-body-functions
               'my:org-wiki-jekyll-finalized4)
  )
    #+end_src
** Org-Publish
   :PROPERTIES:
   :CUSTOM_ID: orge77c5c82
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf org-publish
  :after (ox-jekyll org-wiki)
  :custom
  `((org-publish-timestamp-directory
    . ,(expand-file-name "org-timestamps.el" my:d:tmp)))
  :config
  (defun org-wiki-publish ()
    (interactive)
    (org-publish (org-wiki-make-org-publish-plist
                  'org-jekyll-publish-to-html)
                 t))
  )
   #+end_src
* Outline Magic
  :PROPERTIES:
  :CUSTOM_ID: org912b87a3
  :END:
  ã©ã‚“ã©ã‚“å¢—ãˆãã†ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf outline
  :init
  (leaf outline-magic
    :ensure t
    :bind ((:outline-minor-mode-map
            ("C-c TAB" . outline-cycle)))
    :hook ((LaTeX-mode-hook . my:add-outline-headings)
           (LaTeX-mode-hook . outline-minor-mode))
    :init
    (defun my:add-outline-headings ()
      "Custom: Add promotion headings"
      (setq outline-promotion-headings '("\\chapter"
                                         "\\section"
                                         "\\subsection"
                                         "\\subsubsection"
                                         "\\paragraph"
                                         "\\subparagraph"
                                         "\\begin{frame}"
                                         )))
    )
  )
  #+end_src
* VCS
  :PROPERTIES:
  :CUSTOM_ID: orgc6b67eb9
  :END:
  ã¾ã‚, ã»ã¨ã‚“ã© Git é–¢é€£ãªè¨³ã§ã™ãŒï¼
** git{attributes,config,ignore}-mode, git-commit
   :PROPERTIES:
   :CUSTOM_ID: org429f5b00
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf *git
  :if (>= emacs-major-version 25)
  :init
  (leaf git-commit :ensure t)
  (leaf gitattributes-mode :ensure t)
  (leaf gitconfig-mode :ensure t)
  (leaf gitignore-mode :ensure t)
  )
   #+end_src
** magit:
   :PROPERTIES:
   :CUSTOM_ID: org59371622
   :END:
   magit ã¯ Emacs ã® Git Frontend.
   çµå±€ã®æ‰€ CUI ã§ã‚³ãƒãƒ³ãƒ‰å©ãäº‹ã‚‚å¤šã„ã‘ã‚Œã©, ã“ã‚Œã¯ã“ã‚Œã§é‡å®ã—ã¦ã„ã‚‹ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf magit
  :bind (("C-x g" . magit-status))
  :ensure t
  :init
  (leaf transient
    :custom
    `((transient-history-file
       . ,(expand-file-name "transient-history.el" my:d:tmp))
      (transient-levels-file
       . ,(expand-file-name "transient-levels.el" my:d:tmp))
      (transient-values-file
       . ,(expand-file-name "transient-values.el" my:d:tmp))
      (transient-force-fixed-pitch . t))
    )
  :config
  (setq magit-completing-read-function 'ido
        magit-refs-show-commit-count   'all
        magit-log-buffer-file-locked   t
        magit-revision-show-gravatars  nil
        )
  )
   #+end_src
** Forge
   :PROPERTIES:
   :CUSTOM_ID: org6727f452
   :END:
   Gitub/Gitlab ã¨ Magit ã®é€£æº
   #+begin_src emacs-lisp :tangle init.el
(leaf forge
  :disabled t
  :after magit
  )
   #+end_src
** Git Gutter+
   :PROPERTIES:
   :CUSTOM_ID: org994abf0f
   :END:
   é£½ããŸã‚‰æ­¢ã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã‘ã‚Œã©.
   #+begin_src emacs-lisp :tangle init.el
(leaf git-gutter+
  :if (>= emacs-major-version 25)
  :ensure t
  :blackout `((git-gutter+-mode
               . ,(format "%s" (all-the-icons-octicon "git-merge"))))
  :bind ("C-x G" . global-git-gutter+-mode)
  )
   #+end_src
* é–¢æ•°å®šç¾©ã‚’è¾¿ã‚‹: =dump-jump=, =smart-jump=
  :PROPERTIES:
  :CUSTOM_ID: org710c040c
  :END:
  ã‚ã¾ã‚Šä¸Šæ‰‹ãä½¿ãˆã¦ã„ãªã„.
  #+begin_src emacs-lisp :tangle init.el
(leaf dumb-jump
  :disabled t
  :if (executable-find "rg")
  :ensure t
  :bind (("M-g o" . dumb-jump-go-other-window)
         ("M-g j" . dumb-jump-go)
         ("M-g i" . dumb-jump-go-prompt)
         ("M-g x" . dumb-jump-go-prefer-external)
         ("M-g z" . dumb-jump-go-prefer-external-other-window))
  :custom '((dumb-jump-selector       . 'ido)
            (dumb-jump-force-searcher . 'rg))
  )
(leaf smart-jump
  :disabled t
  :ensure t
  :config
  (smart-jump-setup-default-registers)
  )
  #+end_src
* SOMEDAY è¨€èªæ¯ã®è£œå®Œ: =company-mode=
  :PROPERTIES:
  :CUSTOM_ID: org935a4dbf
  :END:
  ã¾ã ã†ã¾ãä½¿ã„ã“ãªã›ã¦ã„ãªã„ï¼
  - [[https://qiita.com/wktkshn/items/3ac46671d1c242a59f7e][company-dabbrevã§æ—¥æœ¬èªã‚’è£œå®Œã—ãªã„]]
  ã‚’æœ‰åŠ¹ã«ã—ã¦ã¿ãŸãŒ, ã“ã‚Œã§è‰¯ã„ã®ã‹ã—ã‚‰...?
  #+begin_src emacs-lisp :tangle init.el
(leaf company
  :ensure t
  :blackout t
  :init
  (defun edit-category-table-for-company-dabbrev (&optional table)
    (define-category ?s "word constituents for company-dabbrev" table)
    (let ((i 0))
      (while (< i 128)
        (if (equal ?w (char-syntax i))
            (modify-category-entry i ?s table)
          (modify-category-entry i ?s table t))
        (setq i (1+ i)))))
  (edit-category-table-for-company-dabbrev)
  ;; (add-hook 'TeX-mode-hook 'edit-category-table-for-company-dabbrev) ; ä¸‹ã®è¿½è¨˜å‚ç…§
  (setq company-dabbrev-char-regexp "\\cs")
  :custom
  ((company-idle-delay            . 0)
   (company-selection-wrap-around . t)
   (company-minimum-prefix-length . 4)
   ;; disable some noisy default backends
   (company-backends . '(company-files
                         company-capf
                         (company-dabbrev-code
                          company-gtags
                          company-etags
                          company-keywords))))
  :bind
  (;; ("<tab>"    . company-indent-or-complete-common)
   (:company-active-map
    ("C-n"     . company-select-next)
    ("C-p"     . company-select-previous)
    ("C-s"     . company-filter-candidates)
    ("C-<tab>" . company-complete-common-or-cycle)
    ("<tab>"   . company-indent-or-complete-common)
    )
   (:company-search-map
    ("C-p" . company-select-previous)
    ("C-n" . company-select-next)))
  :hook
  `((after-init-hook      . global-company-mode)
    (minibuffer-setup-hook . ,(lambda ()
                                (company-mode -1)))
    )
  )
  #+end_src
  - [X] [[https://github.com/TheBB/company-reftex][TheBB/company-reftex]]
  - [X] [[https://github.com/vspinu/company-math][vspinu/company-math]]
  - [X] [[https://github.com/alexeyr/company-auctex][alexeyr/company-auctex]]
* SOMEDAY ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè£œå®Œ: =yasnippet= [0/1]
  :PROPERTIES:
  :CUSTOM_ID: orgffdbe5ff
  :END:
  #+begin_src emacs-lisp :tangle init.el
  (leaf yasnippet
    :ensure t
    :blackout t
    :disabled t
    :custom
    `((yas-indent-line  . 'fixed)
      (yas-snippet-dirs . '(,(expand-file-name "snippets" my:d:share))))
    :hook (after-init-hook . yas-global-mode)
    :bind ((yas-keymap
            ("C-<tab>" . nil)
            ("<tab>"   . nil))  ; for company
           (yas-minor-mode-map
            ("<tab>"   . nil)
            ("C-<tab>" . nil)
            ("C-c y e" . yas-expand)
            ("C-c y i" . yas-insert-snippet)
            ("C-c y n" . yas-new-snippet)
            ("C-c y v" . yas-visit-snippet-file)
            ("C-c y l" . yas-describe-tables)
            ("C-c y g" . yas-reload-all)))
    :init
    (leaf yasnippet-snippets :ensure t)
    (leaf yatemplate :ensure t)
    )
  #+end_src
  - [ ] æ„å›³ã—ãªã„æ‰€ã§ç™ºç«ã—ã¦ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒæŒ¿å…¥ã•ã‚Œã¦ã—ã¾ã†ã®ã§ä¿ç•™ä¸­
* SOMEDAY =flymake=: on-the-fly check [0/1]
  :PROPERTIES:
  :CUSTOM_ID: orgd4b6f681
  :END:
  on-the-fly syntax checker.
  åŒæ§˜ã®æ‹¡å¼µã«ã¯ =flycheck= ãŒã‚ã‚‹ã‘ã‚Œã©,
  =flycheck= ã¯ã„ã‚ã„ã‚ã‚„ã‚Šã™ãã¦ã¦ç§ã«ã¯åˆã‚ãªã„.
  #+begin_src emacs-lisp :tangle init.el
(leaf flymake
  :if (<= 26.1 (string-to-number emacs-version))
  :ensure t
  )
  #+end_src
  - [ ] è¨­å®šèª¿æ•´ãŒå¿…è¦
* LSP: =lsp-mode=
  :PROPERTIES:
  :CUSTOM_ID: org44ddff4c
  :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf lsp-mode
  :if (executable-find "fortls")
  :ensure t
  :custom
  `((lsp-print-io             . nil)
   (lsp-trace                . nil)
   (lsp-print-performance    . nil)
   (lsp-auto-guess-root      . t)
   (lsp-document-sync-method . 'incremental)
   (lsp-response-timeout     . 5)
   (lsp-prefer-flymake       .'flymake)
   (lsp-session-file         .,(expand-file-name "lsp-session-v1" my:d:tmp))
   )
  :init
  (leaf lsp-ui
    :ensure t
    :custom
    ((lsp-ui-doc-enable            . t)
     (lsp-ui-doc-header            . t)
     (lsp-ui-doc-include-signature . t)
     (lsp-ui-doc-position          . 'at-point)
     (lsp-ui-doc-max-width         . 150)
     (lsp-ui-doc-max-height        . 30)
     (lsp-ui-doc-use-childframe    . nil)
     (lsp-ui-doc-use-webkit        . nil)
     (lsp-ui-flycheck-enable       . nil)
     (lsp-ui-peek-enable           . t)
     (lsp-ui-peek-peek-height      . 20)
     (lsp-ui-peek-list-width       . 50)
     (lsp-ui-peek-fontify          . 'on-demand) ;; never, on-demand, or always
     )
    )
  :hook
  ((lsp-mode-hook . lsp-ui-mode)
   (f90-mode-hook . lsp))
  )
  #+end_src
* TeX: =AUCTeX=
  :PROPERTIES:
  :CUSTOM_ID: org88a3cb1b
  :END:
  ã‚„ã£ã¦ã„ã‚‹äº‹ã¯
  - japanese-latex-mode ã«ãŠã„ã¦, å¹¾ã¤ã‹ã®ã‚³ãƒãƒ³ãƒ‰ãŒè¿½åŠ /ä¸Šæ›¸ãã•ã‚Œã¦ã„ã‚‹ãŒ,  ã‚ã¾ã‚Šä½¿ã†ã“ã¨ã®ç„¡ã„ã‚³ãƒãƒ³ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ãŒå«Œãªã®ã§ãã‚Œã‚‰ã‚’å‰Šé™¤ï¼
  - ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«ã¯[[http://personal.psu.edu/jcc8/software/latexmk/][Latexmk]]ã‚’ä½¿ã†
  ã¨è¨€ã£ãŸæ‰€.
  [[http://personal.psu.edu/jcc8/software/latexmk/][Latexmk]]ã®è¨­å®šã«ã¯[[https://github.com/tom-tan/auctex-latexmk][auctex-latexmk]]ã‚’åˆ©ç”¨ã™ã‚‹ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf auctex
  :if (and (executable-find "uplatex")
           (executable-find "latexmk"))
  ;; :ensure t
  :init
  (unless (file-directory-p (expand-file-name "auctex/auto" my:d:tmp))
    (progn
      (make-directory (expand-file-name "auctex/auto" my:d:tmp) t)
      (make-directory (expand-file-name "auctex/style" my:d:tmp) t)))
  (leaf reftex
    :custom
    ((reftex-plug-into-AUCTeX               . t)
     (reftex-cite-prompt-optional-args      . t)
     (reftex-toc-split-windows-horizontally . t))
    )
  (leaf company-reftex :ensure t)
;;  (leaf company-auctex
;;    :ensure t
;;    )
  (leaf auctex-latexmk
    :el-get tom-tan/auctex-latexmk
    :hook (LaTeX-mode-hook . auctex-latexmk-setup)
    :config
    (setq auctex-latexmk-inherit-TeX-PDF-mode nil
          TeX-command-default "LaTeXMk"
          japanese-LaTeX-command-default "LaTeX"
          )
    )
  :custom
  `((TeX-auto-local
     . ,(expand-file-name "auctex/auto" my:d:tmp))
    (TeX-style-local
     . ,(expand-file-name "auctex/style" my:d:tmp))
    (TeX-parse-self                    . t)
    (TeX-auto-save                     . t)
    (TeX-auto-untabify                 . t)
    (TeX-source-correlate-mode         . t)
    (TeX-source-correlate-start-server . t)
    (TeX-source-correlate-method       . 'synctex)
    ;; (font-latex-fontify-script         . nil)
    ;; (font-latex-script-display         . nil)
    ;; (font-latex-fontify-sectioning     . 1.0)
    )
  :config
  (setq TeX-command-output-list '(("LaTeXMk" ("pdf"))))
  (with-eval-after-load 'tex-jp
    (dolist (command '("pTeX" "pLaTeX" "jTeX" "jLaTeX" "jBibTeX" "Mendex"
                       "upMendex" "pBibTeX" "BibTeX" "Biber" "Ps2pdf" ))
      (delq (assoc command TeX-command-list) TeX-command-list))
    (setq TeX-view-program-selection '((output-dvi "xdvi")
                                       (output-pdf "Evince")
                                       (output-html "xdg-open")))
    )
  :mode-hook
  ((LaTeX-mode-hook
    . ((turn-on-reftex)
       (TeX-source-correlate-mode)
       (TeX-PDF-mode)
       (LaTeX-math-mode)
       ;; (company-auctex-init)
       (reftex-mode)
       (outline-minor-mode))))
  )
  #+end_src
  =~/.latexmkrc= ã¯ä»¥ä¸‹ã®é€šã‚Š
  #+begin_src perl :tangle no
#!/usr/bin/env perl
$kanji = defined $ENV{"LATEXENC"} ? "-kanji=$ENV{\"LATEXENC\"}" : "-kanji=utf8" ;
$latex  = "platex -interaction=nonstopmode -src-specials -shell-escape --synctex=1 $kanji" ;
$latex_silent = "platex -interaction=batchmode -src-specials -shell-escape --synctex=1 $kanji" ;
$pdflatex = "ptex2pdf -e -l -ot '-shell-escape -synctex=1 $kanji'";
$bibtex = "pbibtex $kanji";
# disable makeindex/mendex
$makeindex = "touch -m %D";
# if ( $ENV{"LATEXENC"} == "jis" ){
#     $makeindex = "mendex -J %O -c -r -o %D %S ";
# } elsif ( $ENV{"LATEXENC"} == "euc" ){
#     $makeindex = "mendex -E %O -c -r -o %D %S ";
# } elsif ( $ENV{"LATEXENC"} == "sjis" ){
#     $makeindex = "mendex -S %O -c -r -o %D %S";
# } else {
#     $makeindex = "mendex -U %O -c -r -o %D %S";
# }
$dvipdf = "dvipdfmx %O -o %D %S";
$dvips = 'dvips %O -z -f %S | convbkmk -u > %D';
$ps2pdf = 'ps2pdfwr %O %S %D';
$pdf_mode = 3;
$pdf_previewer = 'xdg-open';
# $pdf_previewer = 'fwdevince %S %D';
$pdf_update_method = 1;
$cleanup_mode = 2;
$clean_ext = "snm nav vrb synctex.gz spl bbl blg run.xml pgf-plot.table pgf-plot.gnuplot"
  #+end_src
* Autoconf
  :PROPERTIES:
  :CUSTOM_ID: org898b9a45
  :END:
  ã„ã‚Œã¦ã¿ãŸã‘ã‚Œã©, ã¯ã¦ã•ã¦ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf sh-autoconf
  :el-get (sh-autoconf
           :type http
           :url "https://download.tuxfamily.org/user42/sh-autoconf.el")
  :mode (("/configure\\.\\(ac\\|in\\)\\'"    . sh-mode)
         ("/ac\\(include\\|local\\)\\.m4\\'" . sh-mode))
  )
  #+end_src
* Fortran
  :PROPERTIES:
  :CUSTOM_ID: org11ccc687
  :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf f90
  :mode ("\\.\\(f|F\\)\\(90|95|03|08\\)$" . f90-mode)
  :init
  (leaf f90-indent
    :custom
    ((f90-do-indent               . 2)
     (f90-if-indent               . 2)
     (f90-type-indent             . 2)
     (f90-program-indent          . 2)
     (f90-continuation-indent     . 2)
     (f90-directive-comment-re    . "!omp\\$" )
     (f90-indented-comment-re     . "!" )
     (f90-break-delimiters        . "[-+\\*/><=,% \t]")
     (f90-break-before-delimiters . t)
     (f90-beginning-ampersand     . nil)
     (f90-smart-end               . 'blink)
     (f90-auto-keyword-case       . nil)
     (f90-leave-line-no           . nil)
     (f90-comment-region          . "!! ")
     (f90-indent-comment          . "! "))
    )
  )
  #+end_src
* Markdown
  :PROPERTIES:
  :CUSTOM_ID: org6035cc60
  :END:
  markdownè‡ªä½“ã¯ã‚ã¾ã‚Šå¥½ãã˜ã‚ƒãªã„ã‚“ã ã‘ã‚Œã©,
  å¿…è¦ã«è¿«ã‚‰ã‚Œã¦æ›¸ãäº‹ãŒå¢—ãˆã¦ããŸã®ã§è¨­å®šã—ã¦ãŠãï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf markdown-mode
  :if (executable-find "pandoc")
  :mode ("\\.\\(md\\|markdown\\|mkd\\)\\'" . gfm-mode)
  :preface
  (defun my:disable-electric-indent-local-mode ()
    (electric-indent-local-mode -1))
  :hook ((markdown-mode-hook . my:disable-electric-indent-local-mode)
         (gfm-mode-hook      . my:disable-electric-indent-local-mode)
         )
  :config
  (setq markdown-command
        "pandoc --from markdown_github -t html5 --mathjax --highlight-style pygments"
        )
  )
  #+end_src
* SCSS
  :PROPERTIES:
  :CUSTOM_ID: org4b0a1cef
  :END:
  ã¡ã‚‡ã„ã¡ã‚‡ã„å¼„ã‚‹æ©Ÿä¼šãŒå¢—ãˆã¦ããŸã®ã§å°å…¥ï¼
  #+begin_src emacs-lisp :tangle init.el
(leaf scss-mode
  :if (executable-find "sass")
  :ensure t
  :mode "\\.scss\\'"
  :custom
  `((scss-sass-command . ,(executable-find "sass")))
  )
  #+end_src
* PlantUML
  :PROPERTIES:
  :CUSTOM_ID: orge4a7e301
  :END:
  #+BEGIN_SRC emacs-lisp
(leaf plantuml-mode
  :if (executable-find "plantuml")
  :ensure t
  :custom
  `((plantuml-executable-path . ,(executable-find "plantuml"))
    (plantuml-default-exec-mode . 'executable))
  :init
;;   (add-to-list
;;    'org-src-lang-modes '("plantuml" . plantuml))
  )
  #+END_SRC
* Re:VIEW
  :PROPERTIES:
  :CUSTOM_ID: org332b8d85
  :END:
  #+BEGIN_SRC emacs-lisp
(leaf review-mode
  :ensure t
  :custom
  `((review-mode-use-skk-mode . t)
    (reivew-use-em . t)
    )
  )
  #+END_SRC
* ãã®ä»–ã®ãƒ¢ãƒ¼ãƒ‰è¨­å®š
  :PROPERTIES:
  :CUSTOM_ID: orga28ad005
  :END:
  èª­ã¿è¾¼ã‚€ã ã‘ã® mode ã®è¨­å®š. è¨­å®šãŒå¢—ãˆãŸã‚‰åˆ¥é€”ã¾ã¨ã‚ã‚‹ã€‚
  #+begin_src emacs-lisp :tangle init.el
(leaf *misc-mode
  :init
  (leaf yaml-mode
    :ensure t
    :mode "\\(\.yml\\|\.yaml\\)"
    )
  (leaf generic-x)
  (leaf textile-mode :ensure t)
  (leaf lua-mode :ensure t)
  (leaf debian-el)
  (leaf sh-mode
    :custom ((system-uses-terminfo . nil))
    )
  (leaf apt-sources-list :ensure t
    :custom
    ((apt-sources-list-suites
      . '("stable" "stable-backports"
          "testing" "testing-backports"
          "unstable" "experimental"
          "jessie" "jessie-backports"
          "stretch" "stretch-backports"
          "buster" "buster-backports"
          "bullseye"
          "sid")))
    )
  (leaf woman
    :custom-face
    ((woman-bold   . '((t (:inherit font-lock-type-face :bold t))))
     (woman-italic . '((t (:inherit font-lock-keyword-face :underline t)))))
    )
  (leaf info-colors
    :ensure t
    :hook
    (Info-selection #'info-colors-fontify-node))
  )
  #+end_src
** SSH config mode
   :PROPERTIES:
   :CUSTOM_ID: org993cf404
   :END:
   #+begin_src emacs-lisp :tangle init.el
(leaf ssh-config-mode
  :ensure t
  :mode ((("/\\.ssh/config\\'" "/sshd?_config\\'") . ssh-config-mode)
         ("/known_hosts\\'"                        . ssh-known-hosts-mode)
         ("/authorized_keys?\\'"                   . ssh-authorized-keys-mode))
  :hook (ssh-config-mode . turn-on-font-lock)
  )
   #+end_src
* SOMEDAY æ—¥è¨˜: =tDiary= [0/1]
  :PROPERTIES:
  :CUSTOM_ID: org9992a617
  :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf tdiary-mode
  :if (and my:d:password-store
           (file-directory-p (concat (getenv "HOME") "/Nextcloud/tdiary")))
  :commands (tdiary-mode tdiary-replace tdiary-append)
  :el-get uwabami/tdiary-mode
  :defvar tdiary-passwd-file
  :pl-setq
  (tdiary-csrf-key tdiary-passwd-file)
  ;; :init
  ;; (setq tdiary-text-save-p t)
  :config
  (setq tdiary-text-directory (concat (getenv "HOME") "/Nextcloud/tdiary/")
        tdiary-diary-list '(("log" "https://uwabami.junkhub.org/log/"))
        tdiary-style-mode 'org-mode
        tdiary-text-suffix ".org"
        tdiary-http-timeout 100
        )
  (tdiary-passwd-file-load)
  ;; (with-eval-after-load 'tdiary-mode
  ;;   (setq tdiary-text-save-p t))
  )
  #+end_src
  - [ ] org2blog ã§ tDiary ã‚’æ›´æ–°ã§ããªã„ã‹å¦„æƒ³ã—ã¦ã„ã‚‹
* ãƒ†ãƒ¼ãƒ, ãƒ•ã‚©ãƒ³ãƒˆ, ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³, ãªã©ãªã©
  :PROPERTIES:
  :CUSTOM_ID: orgbf458527
  :END:
** SOMEDAY xterm-color [0/1]
   :PROPERTIES:
   :CUSTOM_ID: org4c769ff7
   :END:
   è‰²ã‚’ç«¯æœ«ã¨æƒãˆã‚‹ã€‚
   #+begin_src emacs-lisp :tangle init.el
(leaf xterm-color
  :disabled t
  :ensure t
  :config
  (setq xterm-color-names
        ["#000000"    ; black
         "#FF4C4C"    ; red
         "#4Cff4C"    ; green
         "#FFFF4C"    ; yellow
         "#4C4CFF"    ; blue
         "#FF4CFF"    ; magenta
         "#4CFFFF"    ; cyan
         "#AAAAAA"]   ; white
        xterm-color-names-bright
        ["#020202"    ; black
         "#FF7F7F"    ; red
         "#7FFF7F"    ; green
         "#FFFF7F"    ; yellow
         "#7F7FFF"    ; blue
         "#FF7FFF"    ; magenta
         "#7FFFFF"    ; cyan
         "#FFFFFF"]   ; white
        xterm-color-use-bold-for-bright nil
        )
  )
   #+end_src
   - [ ] ã¡ã‚ƒã‚“ã¨åŠ¹ã„ã¦ãªã„, ã‚ˆã†ãª?
** SOMEDAY ãƒ•ã‚©ãƒ³ãƒˆ [0/1]
   :PROPERTIES:
   :CUSTOM_ID: org356b9857
   :END:
  #+begin_src emacs-lisp :tangle init.el
;;;###autoload
(defun my:load-window-config ()
  "load window-system specific settings"
  (interactive)
  (progn
    (set-face-attribute 'default nil
                        :family "FSMRMP"
                        :height 135)
    (set-face-attribute 'fixed-pitch nil
                        :family "FSMRMP"
                        :height 135)
    (set-face-attribute 'variable-pitch nil
                        :family "FSMRMP"
                        :height 135)
    ;; Math symbols
    (set-fontset-font nil
                      '(#x2200 . #x22FF)
                      (font-spec :family "FSMRMP" :height 135))
    ;; Greek
    (set-fontset-font nil
                      '(#x0370 . #x03FF)
                      (font-spec :family "FSMRMP" :height 135))
    ;; Some Icons
    (set-fontset-font nil
                      '(#xE0A0 . #xEEE0)
                      (font-spec :family "FSMRMP" :height 135))
    (setq use-default-font-for-symbols t)
    ))
;;;###autoload
(defun my:load-side-window-config ()
  "load window-system specific settings"
  (interactive)
  (progn
    (set-face-attribute 'default nil
                        :family "FSMRMP"
                        :height 120)
    (set-face-attribute 'fixed-pitch nil
                        :family "FSMRMP"
                        :height 120)
    (set-face-attribute 'variable-pitch nil
                        :family "FSMRMP"
                        :height 120)
    ;; Math symbols
    (set-fontset-font nil
                      '(#x2200 . #x22FF)
                      (font-spec :family "FSMRMP" :height 120))
    ;; Greek
    (set-fontset-font nil
                      '(#x0370 . #x03FF)
                      (font-spec :family "FSMRMP" :height 120))
    ;; Some Icons
    (set-fontset-font nil
                      '(#xE0A0 . #xEEE0)
                      (font-spec :family "FSMRMP" :height 120))
    ))
(leaf *gui
  :if window-system
  :config
  (set-frame-parameter nil 'alpha 95)
  (setq use-default-font-for-symbols t)
  (my:load-window-config)
  )
  #+end_src
  - [ ] FSMRMP ã®ã‚®ãƒªã‚·ãƒ£æ–‡å­—ãŒå…¨è§’ã«ãªã‚‰ãªã„. è¦èª¿æ•´
  #+BEGIN_EXAMPLE
å¹…ã®ç¢ºèª:
Greek, Math, çµµæ–‡å­—ã¯å…¨è§’, ä»–ã¯åŠè§’ã§ 2:1 ã«ãªã£ã¦ã„ã‚‹ã‹ã®ç¢ºèªç”¨

|abcdefghijkl|
|ABCDEFGHIJKL|
|'";:-+=/\~`?|
|âˆâ‰¤â‰¥âˆâˆ‘âˆ«|
|Ã—Â±â‰’â‰¡âŠ†âŠ‡|
|Î±Î²Î³Î´ÎµÎ¶|
|Î·Î¸Î¹ÎºÎ»Î¼|
|Î‘Î’Î“Î”Î•Î–|
|Î—Î˜Î™ÎšÎ›Îœ|
|æ—¥æœ¬èªã®ç¾è¦³|
|ã‚ã„ã†ãˆãŠã‹|
|ã‚¢ã‚¤ã‚¦ã‚¨ã‚ªã‚«|
|ï½±ï½²ï½³ï½´ï½µï½¶ï½·ï½¸ï½¹ï½ºï½»ï½¼|

| hoge                 | hogeghoe | age              |
|----------------------+----------+------------------|
| ä»Šæ—¥ã‚‚ã„ã„å¤©æ°—ã§ã™ã­ | ãŠã€     | ç­‰å¹…ã«ãªã£ãŸğŸ‘ ğŸº|
|----------------------+----------+------------------|
  #+END_EXAMPLE
** Major, Minor ãƒ¢ãƒ¼ãƒ‰ã®è¡¨ç¤ºã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º: =blackout=
   :PROPERTIES:
   :CUSTOM_ID: org20d8ce5c
   :END:
   åŸºæœ¬å€‹ã€…ã®ãƒ¢ãƒ¼ãƒ‰ã®è¨­å®šã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ã‚‹ã‘ã‚Œã©ã‚‚ï¼
   #+begin_src emacs-lisp :tangle init.el
(leaf *modeline-string
  ;; ã“ã“ã§ã‚„ã‚‹ã‚ˆã‚Š, modeline ã®è¨­å®šæ™‚ã«ä¸€æ‹¬ã§å¤‰æ›ã—ãŸæ–¹ãŒè‰¯ã„æ°—ã‚‚ã—ã¦ããŸï¼
  :blackout ((lisp-interaction-mode
              (all-the-icons-icon-for-mode 'lisp-interaction-mode))
             (emacs-lisp-mode
              (all-the-icons-icon-for-mode 'emacs-lisp-mode))
             (text-mode
              (all-the-icons-icon-for-mode 'text-mode))
             )
  )
   #+end_src
** theme: =doom-theme=
   :PROPERTIES:
   :CUSTOM_ID: org7e722d0e
   :END:
   ã“ã‚Œã¾ã§å¼„ã£ã¦ã„ãŸ font-lock ã‚’
   doom-theme ã‚’ãƒ™ãƒ¼ã‚¹ã«ç§»æ¤ä¸­: [[https://github.com/uwabami/emacs-doom-darkpastel][uwabami/emacs-doom-darkpastel]]
  #+begin_src emacs-lisp :tangle init.el
;; (setq frame-background-mode (frame-parameter nil 'background-mode))
(leaf *doom-themes
  :if (>= emacs-major-version 25)
  :init
  (leaf doom-themes :ensure t)
  (leaf emacs-doom-darkpastel
    :el-get (emacs-doom-darkpastel
             :type github
             :pkgname "uwabami/emacs-doom-darkpastel"
             :prepare (add-to-list 'custom-theme-load-path default-directory)
             )
    )
  :custom
  (doom-darkpastel-set-background . nil)
  :config
  (load-theme 'doom-darkpastel t)
  (eaw-and-emoji-fullwidth)
  )
  #+end_src
** modeline
   :PROPERTIES:
   :CUSTOM_ID: org51edfacc
   :END:
   powerline ã‚’ä½¿ã£ã¦ã‚‹
   #+BEGIN_SRC emacs-lisp
(leaf powerline
  :ensure t
  :init
  (defun my:powerline-ddskk ()
    "skkãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªãã¦ã‚‚çŠ¶æ…‹ã‚’è¡¨ç¤º"
    (cond
     ((not (boundp 'skk-modeline-input-mode))
      (setq skk-modeline-input-mode "--[--]:"))
     (t skk-modeline-input-mode)))
  ;;
  (defun my:skk-setup-modeline ()
      "skk-setup-modeline ã«ã‚ˆã‚‹ modeline ã®æ›´æ–°ã‚’ç„¡åŠ¹åŒ–"
    (setq skk-indicator-alist (skk-make-indicator-alist))
    (force-mode-line-update t))
  ;;
  (defun my:major-mode-icon (mode)
    "Update file icon in mode-line, just display major-mode icon. not filename."
    (let* ((icon (all-the-icons-icon-for-mode mode)))
    (if (symbolp icon)
        (all-the-icons-faicon "file-code-o"
                              :face 'all-the-icons-dsilver
                              :height 1.0)
      icon)))
  :advice (:override skk-setup-modeline my:skk-setup-modeline)
  :custom
  `((powerline-buffer-size-suffix  . nil)
    (powerline-display-hud         . nil)
    (powerline-display-buffer-size . nil)
    (powerline-text-scale-factor   .  1)
    )
  :config
  (defun my:powerline-theme ()
    "Setup the default mode-line."
    (interactive)
    (my:powerline-ddskk)
    (setq-default
     mode-line-format
     '("%e"
       (:eval
        (let* ((active (powerline-selected-window-active))
               (mode-line-buffer-id (if active 'mode-line-buffer-id 'mode-line-buffer-id-inactive))
               (mode-line (if active 'mode-line 'mode-line-inactive))
               (face1 (if active 'mode-line-highlight 'powerline-inactive2))
               ;; (face1 (if active 'powerline-active1 'powerline-inactive2))
               ;; (face2 (if active 'powerline-active2 'powerline-inactive2))
               ;; (face2 (if active 'mode-line-highlight 'powerline-inactive2))
               (lhs (list (powerline-raw (substring skk-modeline-input-mode 2 -1) mode-line 'l)
                          (powerline-raw "%*" mode-line 'l)
                          (powerline-raw mode-line-mule-info mode-line 'l)
                          (powerline-raw (my:major-mode-icon major-mode) mode-line 'l)
                          ;; (powerline-raw (all-the-icons-icon-for-mode major-mode) mode-line 'l)
                          (powerline-buffer-id mode-line-buffer-id 'l)
                          (powerline-raw " ")
                          ))
               (rhs (list (powerline-raw global-mode-string face1 'r)
                          (powerline-vc face1 'r)
                          (powerline-raw " ")
                          (powerline-raw "%6p" mode-line 'r)
                          )))
          (concat (powerline-render lhs)
                  (powerline-fill face1 (powerline-width rhs))
                  (powerline-render rhs))))))
    )
  (my:powerline-theme)
  ;; (powerline-revert)
  )
   #+END_SRC
* èµ·å‹•æ™‚é–“ã®å‡ºåŠ›
  :PROPERTIES:
  :CUSTOM_ID: orgca1f29da
  :END:
  [[http://memo.sugyan.com/entry/20120120/1327037494][èµ·å‹•æ™‚é–“ã‚’è¨ˆæ¸¬ã™ã‚‹ æ”¹è¨‚ç‰ˆ - ã™ãã‚ƒãƒ¼ã‚“ãƒ¡ãƒ¢]]
  #+begin_src emacs-lisp :tangle init.el
(leaf *show-startup-time
  :hook
  (emacs-startup-hook
   . (lambda ()
       (message "init time: %.3f sec"
                (float-time (time-subtract after-init-time before-init-time)))))
  )
  #+end_src
* Debug
  :PROPERTIES:
  :CUSTOM_ID: orgd89ceb4b
  :END:
  #+begin_src emacs-lisp :tangle init.el
(leaf esup
  :ensure t
  :custom
  ((esup-insignificant-time . 0.01)
   (esup-depth              . 0)) ;; ğŸ¤”
  )
(leaf org-bullets
  :disabled t
  :ensure t
  :custom
   (org-bullets-bullet-list . '("ï€† " "â— " "â–¡" "ãƒ»"))
  :hook
  (org-mode-hook
   . (lambda () (org-bullets-mode 1)))
  )
  #+end_src
* æœ€å¾Œã«
  :PROPERTIES:
  :CUSTOM_ID: orgf87c4e84
  :END:
** profiler report
   :PROPERTIES:
   :CUSTOM_ID: org8d339cf7
   :END:
   ã“ã‚Œã‚‚å¿…è¦ã«å¿œã˜ã¦
  #+begin_src emacs-lisp :tangle init.el
;; (profiler-report)
;; (profiler-stop)
  #+end_src
** provide ã®è¨­å®š
   :PROPERTIES:
   :CUSTOM_ID: org4c97a1e0
   :END:
  #+begin_src emacs-lisp :tangle init.el
(provide 'init)
;; Local Variables:
;; byte-compile-warnings: (not obsolete cl-functions)
;; End:
  #+end_src
** LICENSE
   :PROPERTIES:
   :CUSTOM_ID: orge8960401
   :END:
   å¹¾ã¤ã‹ã®é–¢æ•°ã®å…ƒãƒã‚¿ã¨ã—ã¦ Emacs æœ¬ä½“ã®ã‚³ãƒ¼ãƒ‰ã‚’å‚ç…§ã—ãŸã®ã§,
   GPL-3 or later ã§ã™ï¼
   #+begin_example
Copyright (C) 2011--2017 Youhei SASAKI <uwabami@gfd-dennou.org>
.
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.
.
This package is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.
.
You should have received a copy of the GNU General Public License
along with this program. If not, see <https://www.gnu.org/licenses/>.
   #+end_example
